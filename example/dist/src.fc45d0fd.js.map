{"version":3,"sources":["node_modules/solid-js/dist/index.js","node_modules/solid-js/dist/dom/index.js","../src/context.ts","../src/components/Link.tsx","../src/components/MatchRoute.tsx","../src/components/RouteTree.tsx","../src/index.tsx","node_modules/tslib/tslib.es6.js","../src/encode.ts","../src/utils.ts","../src/index.ts","../src/encoding.ts","../src/rules.ts","../src/tokeniser.ts","../src/Path.ts","../src/helpers.ts","../src/matchChildren.ts","../src/sortChildren.ts","../src/RouteNode.ts","node_modules/symbol-observable/es/ponyfill.js","node_modules/symbol-observable/es/index.js","node_modules/router5-transition-path/dist/index.es.js","node_modules/router5/dist/index.es.js","node_modules/router5-plugin-browser/dist/index.es.js","src/index.tsx","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["taskIdCounter","isCallbackScheduled","isPerformingWork","taskQueue","currentTask","shouldYieldToHost","yieldInterval","deadline","maxYieldInterval","scheduleCallback","scheduledCallback","maxSigned31BitInt","setupScheduler","window","MessageChannel","channel","port","port2","postMessage","port1","onmessage","currentTime","performance","now","hasTimeRemaining","hasMoreWork","error","_callback","setTimeout","navigator","scheduling","isInputPending","enqueue","task","findIndex","m","n","length","k","cmp","expirationTime","splice","requestCallback","fn","options","startTime","timeout","newTask","id","flushWork","cancelCallback","initialTime","workLoop","callback","didUserCallbackTimeout","shift","equalFn","a","b","ERROR","runEffects","runQueue","NOTPENDING","STALE","PENDING","UNOWNED","owned","cleanups","context","owner","transPending","setTransPending","createSignal","Owner","Listener","Pending","Updates","Effects","Transition","ExecCount","createRoot","detachedOwner","listener","root","result","runUpdates","cleanNode","value","areEqual","s","observers","observerSlots","pending","comparator","undefined","readSignal","bind","writeSignal","createComputed","updateComputation","createComputation","createRenderEffect","createEffect","globalThis","_$HYDRATION","asyncSSR","runUserEffects","c","SuspenseContext","lookup","suspense","user","push","resumeEffects","e","running","apply","createMemo","state","createDeferred","source","t","timeoutMs","deferred","setDeferred","node","createSelector","subs","Map","p","v","key","keys","get","pure","set","onCleanup","delete","batch","q","i","data","call","useTransition","sources","Set","effects","promises","untrack","console","warn","onError","Symbol","getListener","createContext","defaultValue","Provider","createProvider","useContext","getContextOwner","getSuspenseContext","createResource","init","loading","setLoading","contexts","h","err","pr","loadEnd","has","size","completeLoad","name","resources","decrement","clear","read","resolved","add","increment","load","hydrating","registry","loadResource","notStreamed","then","Object","defineProperty","updates","lookDownstream","sSlot","sourceSlots","tValue","isComp","o","markUpstream","Error","time","runComputation","nextValue","handleError","updatedAt","tOwned","runTop","top","inFallback","wait","forEach","len","queue","userLength","resume","pop","index","obs","fns","f","resolveChildren","children","Array","isArray","results","provider","props","rendered","$RAW","$NODE","$PROXY","wrap","traps","Proxy","proxyTraps","isWrappable","obj","__proto__","prototype","unwrap","item","skipGetters","unwrapped","prop","isFrozen","slice","l","assign","desc","getOwnPropertyDescriptors","getDataNodes","target","nodes","property","receiver","wrappable","hasOwnProperty","_","deleteProperty","setProperty","force","notify","mergeState","updatePath","current","path","traversed","part","prev","partType","concat","from","to","by","createState","unwrappedState","wrappedState","setState","args","createResourceNode","r","createResourceState","loadingTraps","resourceTraps","loadState","resolver","applyState","parent","merge","previous","j","start","end","newEnd","newIndicesNext","keyVal","Math","min","temp","newIndices","targetKeys","previousKeys","reconcile","setterTraps","produce","FALLBACK","mapArray","list","mapFn","items","mapped","disposers","indexes","newItems","newLen","tempdisposers","tempIndexes","fallback","disposer","mapper","indexArray","signals","createComponent","Comp","assignProps","descriptors","defineProperties","splitProps","split","clone","map","lazy","ctx","nextHydrateContext","mod","default","setHydrateContext","hydration","count","For","each","Index","Show","childDesc","getOwnPropertyDescriptor","callFn","condition","when","Switch","conditions","evalConditions","keyed","Match","ErrorBoundary","errored","setErrored","fallbackDesc","Dynamic","others","comp","component","SuspenseListContext","trackSuspense","awaitSuspense","active","trigger","Promise","resolve","res","SuspenseList","suspenseSetter","showContent","showFallback","listContext","setFallback","register","showingContent","showingFallback","reveal","revealOrder","tail","visibleContent","visibleFallback","reverse","all","every","stop","next","Suspense","counter","store","Solid$$","Types","ATTRIBUTE","PROPERTY","Attributes","href","type","width","height","role","style","alias","for","class","spellCheck","allowFullScreen","autoCapitalize","autoFocus","autoPlay","SVGAttributes","innerHTML","textContent","innerText","className","htmlFor","tabIndex","allowReorder","attributeName","attributeType","autoReverse","baseFrequency","calcMode","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan","NonComposedEvents","SVGNamespace","xlink","xml","memo","equal","reconcileArrays","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","nextSibling","insertBefore","removeChild","sequence","replaceChild","eventRegistry","render","code","element","dispose","insert","firstChild","hydrate","templates","querySelectorAll","reduce","getAttribute","childNodes","template","html","check","isSVG","document","createElement","content","delegateEvents","eventNames","addEventListener","eventHandler","clearDelegatedEvents","removeEventListener","setAttribute","removeAttribute","setAttributeNS","namespace","removeAttributeNS","classList","classKeys","classValue","classNames","nameLen","toggle","nodeStyle","cssText","removeProperty","spread","accessor","skipChildren","spreadExpression","marker","initial","insertExpression","prevProps","info","eventName","lc","toLowerCase","indexOf","ns","replace","g","dynamicProperty","src","enumerable","ssrClassList","ssrStyle","escape","ssrSpread","toSSRAttribute","ATTR_REGEX","CONTENT_REGEX","attr","match","exec","lastIndex","out","charCodeAt","substring","getNextElement","isSSR","getHydrationKey","el","cloneNode","completed","getNextMarker","nodeType","nodeValue","runHydrationEvents","events","generateHydrationScript","streaming","join","JSON","stringify","composedPath","configurable","handler","cancelBubble","host","Node","unwrapArray","multi","toString","createTextNode","cleanChildren","array","normalizeIncomingArray","appendNodes","appendChild","normalized","dynamic","idx","replacement","inserted","isParent","renderToString","reject","race","resolveSSRNode","renderDOMToString","container","body","d1","d2","ssr","Portal","useShadow","mount","HTMLHeadElement","renderRoot","attachShadow","mode","ref","Context","useRoute","getRoute","useRouteName","getRouteName","useRouteNameRaw","getRouteNameRaw","shallowStringyEq","String","useIsActive","link","params","isEqual","getIsActiveByName","isActive","getRouteParams","routeParams","here","LinkNav","renderRouteLike","route","defaultLinkConfig","navActiveClassName","createLink","self","config","router5","linkProps","innerProps","navIgnoreParams","alwaysInactive","getClassList","nav","getHref","buildPath","disabled","ev","preventDefault","navigate","onClick","Back","history","back","blur","MatchContext","doesMatch","suffix","prefix","exact","startsWith","SwitchRoutes","getIndex","same","ix","ShowRoute","getMatch","createGetMatch","MatchRoute","RouteStateMachine","tree","_assumed","traverseHydrate","path0","node0","Render","defaultProps","noProps","getPathSuffix","x","y","populate","gp","updated","traverse","RenderHere","passthru","routes","child","createSolidRouter","createRouter5","onStart","linkConfig","unsubs","freeze","Link","Router","assume","initialState","getState","setRoute","getSplitRouteName","router","subscribe","unsub","hints","extendStatics","d","setPrototypeOf","__extends","__","constructor","create","__assign","arguments","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","rejected","done","__generator","label","sent","trys","ops","verb","iterator","op","TypeError","__createBinding","k2","__exportStar","exports","__values","__read","ar","__spread","__spreadArrays","il","jl","__await","__asyncGenerator","asyncIterator","settle","fulfill","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","__esModule","__importDefault","__classPrivateFieldGet","privateMap","__classPrivateFieldSet","makeOptions","opts","arrayFormat","booleanFormat","nullFormat","encodeValue","encodeURIComponent","decodeValue","decodeURIComponent","encodeBoolean","encodedValue","encodeNull","getNameEncoder","encodeArray","arr","encodeName","val","encode","decode","getSearch","pos","isSerialisable","parseName","bracketPosition","hasBrackets","parse","param","_a","rawName","_b","currentValue","decodedValue","build","filter","paramName","Boolean","omit","paramsToOmit","searchPart","querystring","removedParams","kept","removed","keep","paramsToKeep","keptParams","acc","chunk","includes","excludeSubDelimiters","encodeURIComponentExcludingSubDelims","segment","encodingMethods","uri","encodeURI","uriComponent","none","legacy","decodingMethods","decodeURI","encodeParam","encoding","isSpatParam","encoder","decodeParam","defaultOrConstrained","rules","pattern","regex","RegExp","tokenise","str","tokens","matched","some","rule","otherVal","Function","substr","exists","optTrailingSlash","strictTrailingSlash","upToDelimiter","delimiter","test","appendQueryParam","existingVal","defaultOptions","urlParamsEncoding","hasUrlParams","hasSpatParam","hasMatrixParams","hasQueryParams","spatParams","getParams","urlParams","queryParams","Path","caseSensitive","urlTest","parseQueryParams","unexpectedQueryParams","_this","isQueryParam","delimited","ignoreConstraints","ignoreSearch","encodedUrlParams","missingParameters","constraintsPassed","base","searchParams","sparams","buildQueryParams","predicate","getMetaFromSegments","segments","accName","meta","parser","allParams","buildStateFromMatch","buildPathFromSegments","queryParamsMode","trailingSlashMode","nonSearchParams","segments_1","_i","extraParams","searchParamsObject","segmentPath","absolute","finalPath","getPathFromSegments","getPath","matchChildren","pathSegment","currentMatch","consumedBefore","_c","strongMatching","_d","isRoot","remainingPath","partialTest","consumedPath","remainingQueryParams_1","getNonAbsoluteChildren","nodes_1","sortChildren","originalChildren","sort","sortPredicate","left","right","leftPath","rightPath","leftSegments","rightSegments","leftParamsCount","rightParamsCount","leftParamLength","rightParamLength","childRoutes","checkParents","onAdd","finalSort","sortDescendants","RouteNode","getParentSegments","cb","setParent","addRouteNode","routeNode","fullName","routeName","segmentsByName","getSegmentsByName","getSegmentsMatchingPath","matchedSegments","firstSegmentParams","lastSegment","lastSegmentSlashChild","findSlashChild","names","hasParentsParams","hasParams","absoluteChildren","findAbsoluteChildren","slashChildren","findSegmentByName","filteredRoutes","topLevelNodes","startingNodes","finalMatch","symbolObservablePonyfill","observable","global","module","nameToIDs","ids","hasMetaParams","extractSegmentParams","transitionPath","toState","fromState","toStateOptions","fromStateIds","toStateIds","maxI","pointOfDifference","_loop_1","leftParams","rightParams","different","state_1","reload","toDeactivate","toActivate","intersection","shouldUpdateNode","nodeName","fromSate","toDeactivateReversed","matching","activatedSegment","sameLevelDeactivatedSegment","autoCleanUp","allowNotFound","rewritePathOnMatch","withOptions","routerOptions","getOptions","setOption","option","errorCodes","ROUTER_NOT_STARTED","NO_START_PATH_OR_STATE","ROUTER_ALREADY_STARTED","ROUTE_NOT_FOUND","SAME_STATES","CANNOT_DEACTIVATE","CANNOT_ACTIVATE","TRANSITION_ERR","TRANSITION_CANCELLED","constants","UNKNOWN_ROUTE","ROUTER_START","ROUTER_STOP","TRANSITION_START","TRANSITION_CANCEL","TRANSITION_SUCCESS","TRANSITION_ERROR","withRoutes","forward","fromRoute","toRoute","forwardMap","rootNode","onRouteAdded","canActivate","forwardTo","decodeParams","decoders","encodeParams","encoders","defaultParams","addNode","canActivateHandler","strictEquality","ignoreQueryParams","activeState","areStatesEqual","makeState","areStatesDescendants","paramsWithDefault","encodedParams","matchPath","name_1","decodedParams","forwardState","builtPath","setRootPath","rootPath","setPath","withDependencies","dependencies","routerDependencies","setDependency","dependencyName","dependency","setDependencies","deps","getDependencies","getInjectables","executeFactory","factoryFunction","withState","stateId","routerState","forceId","makeNotFoundState","state1","state2","getUrlParams","state1Params","state2Params","parentState","childState","buildState","eventsMap","onStop","onTransitionSuccess","onTransitionStart","onTransitionError","onTransitionCancel","withPlugins","routerPlugins","getPlugins","usePlugin","plugins","removePluginFns","plugin","startPlugin","removePlugin","appliedPlugin","removeEventListeners","methodName","removeListener","teardown","withMiddleware","middlewareFactories","middlewareFunctions","useMiddleware","middlewares","middleware","middlewareFunction","clearMiddleware","getMiddlewareFactories","getMiddlewareFunctions","withObservability","callbacks","invokeEventListeners","_cb","isObject","finalListener","unsubscribeHandler","previousRoute","unsubscribe","observer","$$observable","functions","isCancelled","errorKey","remainingFunctions","isState","hasStateChanged","mergeStates","processFn","stepFn","errBase","_done","newState","resVal","stack","promiseError","isMapped","transition","cancelled","getLifecycleFunctions","canDeactivateFunctions","canActivateFunctions","cancel","activeSegments_1","clearCanDeactivate","makeError","isUnknownRoute","asyncBase","canDeactivate","forceDeactivate","canDeactivateFunctionMap","fnMap","canActivateFunctionMap","pipeline","noop","withNavigation","cancelCurrentTransition","navigateToDefault","defaultRoute","lastArg","isStarted","sameStates","skipTransition","transitionToState","redirect","params_1","redirected","noop$1","withRouterLifecycle","started","startPathOrState","startPath","startState","invokeErrCb","navigateToDefault_1","redirect_1","toFunction","withRouteLifecycle","canDeactivateFactories","canActivateFactories","getLifecycleFactories","canDeactivateHandler","factory","pipe","arg","createRouter","cloneRouter","clonedRouter","isBrowser","getBase","location","pathname","supportsPopStateOnHashChange","userAgent","pushState","title","replaceState","addPopstateListener","shouldAddHashChangeListener","useHash","getLocation","hash","hashPrefix","correctedPath","safelyEncodePath","search","getHash","browser","safeBrowser","preserveHash","browserPluginFactory","transitionOptions","removePopStateListener","browserPlugin","routerStart","buildUrl","urlToPath","url","pathParts","matchUrl","replaceHistoryState","lastKnownState","updateBrowserState","trimmedState","finalState","onPopState","evt","historyState","hasState","statesAreEqual","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","close","onclose","log","removeErrorOverlay","message","overlay","createErrorOverlay","getElementById","remove","stackTrace","getParents","modules","parents","dep","cached","cache"],"mappings":"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","file":"src.fc45d0fd.js","sourceRoot":"..","sourcesContent":["let taskIdCounter = 1,\n    isCallbackScheduled = false,\n    isPerformingWork = false,\n    taskQueue = [],\n    currentTask = null,\n    shouldYieldToHost = null,\n    yieldInterval = 5,\n    deadline = 0,\n    maxYieldInterval = 300,\n    scheduleCallback = null,\n    scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  if (window && window.MessageChannel) {\n    const channel = new MessageChannel(),\n          port = channel.port2;\n    scheduleCallback = () => port.postMessage(null);\n    channel.port1.onmessage = () => {\n      if (scheduledCallback !== null) {\n        const currentTime = performance.now();\n        deadline = currentTime + yieldInterval;\n        const hasTimeRemaining = true;\n        try {\n          const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n          if (!hasMoreWork) {\n            scheduledCallback = null;\n          } else port.postMessage(null);\n        } catch (error) {\n          port.postMessage(null);\n          throw error;\n        }\n      }\n    };\n  } else {\n    let _callback;\n    scheduleCallback = () => {\n      if (!_callback) {\n        _callback = scheduledCallback;\n        setTimeout(() => {\n          const currentTime = performance.now();\n          deadline = currentTime + yieldInterval;\n          const hasMoreWork = _callback(true, currentTime);\n          _callback = null;\n          if (hasMoreWork) scheduleCallback();\n        }, 0);\n      }\n    };\n  }\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      let k = n + m >> 1;\n      let cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n      timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst equalFn = (a, b) => a === b;\nlet ERROR = null;\nlet runEffects = runQueue;\nconst NOTPENDING = {};\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst [transPending, setTransPending] = createSignal(false, true);\nlet Owner = null;\nlet Listener = null;\nlet Pending = null;\nlet Updates = null;\nlet Effects = null;\nlet Transition = null;\nlet ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  detachedOwner && (Owner = detachedOwner);\n  const listener = Listener,\n        owner = Owner,\n        root = fn.length === 0 ? UNOWNED : {\n    owned: null,\n    cleanups: null,\n    context: null,\n    owner\n  };\n  Owner = root;\n  Listener = null;\n  let result;\n  try {\n    runUpdates(() => result = fn(() => cleanNode(root)), true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  return result;\n}\nfunction createSignal(value, areEqual) {\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    pending: NOTPENDING,\n    comparator: areEqual ? typeof areEqual === \"function\" ? areEqual : equalFn : undefined\n  };\n  return [readSignal.bind(s), writeSignal.bind(s)];\n}\nfunction createComputed(fn, value) {\n  updateComputation(createComputation(fn, value, true));\n}\nfunction createRenderEffect(fn, value) {\n  updateComputation(createComputation(fn, value, false));\n}\nfunction createEffect(fn, value) {\n  if (globalThis._$HYDRATION && globalThis._$HYDRATION.asyncSSR) return;\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false),\n        s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  c.user = true;\n  Effects.push(c);\n}\nfunction resumeEffects(e) {\n  Transition && (Transition.running = true);\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createMemo(fn, value, areEqual) {\n  const c = createComputation(fn, value, true);\n  c.pending = NOTPENDING;\n  c.observers = null;\n  c.observerSlots = null;\n  c.state = 0;\n  c.comparator = areEqual ? typeof areEqual === \"function\" ? areEqual : equalFn : undefined;\n  updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createDeferred(source, options) {\n  let t,\n      timeout = options ? options.timeoutMs : undefined;\n  const [deferred, setDeferred] = createSignal();\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  updateComputation(node);\n  setDeferred(node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn) {\n  let subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const key of subs.keys()) if (fn(key, v) || fn(key, p)) {\n      const c = subs.get(key);\n      c.state = STALE;\n      if (c.pure) Updates.push(c);else Effects.push(c);\n    }\n    return v;\n  }, undefined, true);\n  updateComputation(node);\n  return key => {\n    if (Listener) {\n      subs.set(key, Listener);\n      onCleanup(() => subs.delete(key));\n    }\n    return fn(key, node.value);\n  };\n}\nfunction batch(fn) {\n  if (Pending) return fn();\n  const q = Pending = [],\n        result = fn();\n  Pending = null;\n  runUpdates(() => {\n    for (let i = 0; i < q.length; i += 1) {\n      const data = q[i];\n      if (data.pending !== NOTPENDING) {\n        const pending = data.pending;\n        data.pending = NOTPENDING;\n        writeSignal.call(data, pending);\n      }\n    }\n  }, false);\n  return result;\n}\nfunction useTransition() {\n  return [transPending, fn => {\n    Transition || (Transition = {\n      sources: new Set(),\n      effects: [],\n      promises: new Set(),\n      running: true\n    });\n    Transition.running = true;\n    batch(fn);\n  }];\n}\nfunction untrack(fn) {\n  let result,\n      listener = Listener;\n  Listener = null;\n  result = fn();\n  Listener = listener;\n  return result;\n}\nfunction onCleanup(fn) {\n  if (Owner === null) console.warn(\"cleanups created outside a `createRoot` or `render` will never be run\");else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) console.warn(\"error handlers created outside a `createRoot` or `render` will never be run\");else if (Owner.context === null) Owner.context = {\n    [ERROR]: [fn]\n  };else if (!Owner.context[ERROR]) Owner.context[ERROR] = [fn];else Owner.context[ERROR].push(fn);\n}\nfunction getListener() {\n  return Listener;\n}\nfunction createContext(defaultValue) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  return lookup(Owner, context.id) || context.defaultValue;\n}\nfunction getContextOwner() {\n  return Owner;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext({}));\n}\nfunction createResource(init, options = {}) {\n  const [s, set] = createSignal(init),\n        [loading, setLoading] = createSignal(false, true),\n        contexts = new Set(),\n        h = globalThis._$HYDRATION || {};\n  let err = null,\n      pr = null;\n  function loadEnd(p, v, e) {\n    if (pr === p) {\n      err = e;\n      pr = null;\n      if (Transition && Transition.promises.has(p)) {\n        Transition.promises.delete(p);\n        runUpdates(() => {\n          Transition.running = true;\n          if (!Transition.promises.size) {\n            Effects.push.apply(Effects, Transition.effects);\n            Transition.effects = [];\n          }\n          completeLoad(v);\n        }, false);\n      } else completeLoad(v);\n    }\n    return v;\n  }\n  function completeLoad(v) {\n    batch(() => {\n      set(v);\n      if (h.asyncSSR && options.name) h.resources[options.name] = v;\n      setLoading(false);\n      for (let c of contexts.keys()) c.decrement();\n      contexts.clear();\n    });\n  }\n  function read() {\n    const c = SuspenseContext && lookup(Owner, SuspenseContext.id),\n          v = s();\n    if (err) throw err;\n    if (Listener && !Listener.user && c) {\n      if (!Listener.pure) createComputed(() => {\n        s();\n        if (pr && c.resolved && Transition) Transition.promises.add(pr);\n      });\n      if (pr) {\n        if (Listener.pure && c.resolved && Transition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n          c.increment();\n          contexts.add(c);\n        }\n      }\n    }\n    return v;\n  }\n  function load(fn) {\n    err = null;\n    let p;\n    const hydrating = h.context && !!h.context.registry;\n    if (hydrating) {\n      if (h.loadResource && !options.notStreamed) {\n        fn = h.loadResource;\n      } else if (options.name && h.resources && options.name in h.resources) {\n        fn = () => {\n          const data = h.resources[options.name];\n          delete h.resources[options.name];\n          return data;\n        };\n      }\n    }\n    p = fn();\n    Transition && pr && Transition.promises.delete(pr);\n    if (typeof p !== \"object\" || !(\"then\" in p)) {\n      pr = null;\n      completeLoad(p);\n      return p;\n    }\n    pr = p;\n    batch(() => {\n      setLoading(true);\n      set(untrack(s));\n    });\n    return p.then(v => loadEnd(p, v), e => loadEnd(p, s(), e));\n  }\n  Object.defineProperty(read, \"loading\", {\n    get() {\n      return loading();\n    }\n  });\n  return [read, load];\n}\nfunction readSignal() {\n  if (this.state && this.sources) {\n    const updates = Updates;\n    Updates = null;\n    this.state === STALE ? updateComputation(this) : lookDownstream(this);\n    Updates = updates;\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (Transition && Transition.running && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(value, isComp) {\n  if (this.comparator) {\n    if (Transition && Transition.running && Transition.sources.has(this)) {\n      if (this.comparator(this.tValue, value)) return value;\n    } else if (this.comparator(this.value, value)) return value;\n  }\n  if (Pending) {\n    if (this.pending === NOTPENDING) Pending.push(this);\n    this.pending = value;\n    return value;\n  }\n  if (Transition) {\n    if (Transition.running || !isComp && Transition.sources.has(this)) {\n      Transition.sources.add(this);\n      this.tValue = value;\n    }\n    if (!Transition.running) this.value = value;\n  } else this.value = value;\n  if (this.observers && (!Updates || this.observers.length)) {\n    runUpdates(() => {\n      for (let i = 0; i < this.observers.length; i += 1) {\n        const o = this.observers[i];\n        if (o.observers && o.state !== PENDING) markUpstream(o);\n        o.state = STALE;\n        if (o.pure) Updates.push(o);else Effects.push(o);\n      }\n      if (Updates.length > 10e5) {\n        Updates = [];\n        throw new Error(\"Potential Infinite Loop Detected.\");\n      }\n    }, false);\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n        listener = Listener,\n        time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    Transition.running = true;\n    runComputation(node, node.tValue, time);\n    Transition.running = false;\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.observers && node.observers.length) {\n      writeSignal.call(node, nextValue, true);\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure) {\n  const c = {\n    fn,\n    state: STALE,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: null,\n    pure\n  };\n  if (Owner === null) console.warn(\"computations created outside a `createRoot` or `render` will never be disposed\");else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  return c;\n}\nfunction runTop(node) {\n  let top = node.state === STALE && node,\n      pending;\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  while (node.fn && (node = node.owner)) {\n    if (node.state === PENDING) pending = node;else if (node.state === STALE) {\n      top = node;\n      pending = undefined;\n    }\n  }\n  if (pending) {\n    const updates = Updates;\n    Updates = null;\n    lookDownstream(pending);\n    Updates = updates;\n    if (!top || top.state !== STALE) return;\n  }\n  top && updateComputation(top);\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    do {\n      if (Updates) {\n        runQueue(Updates);\n        Updates = [];\n      }\n      if (!wait) {\n        if (Transition && Transition.running && Transition.promises.size) {\n          Transition.effects.push.apply(Transition.effects, Effects);\n        } else runEffects(Effects);\n        Effects = [];\n      }\n    } while (Updates && Updates.length);\n    Updates = null;\n    if (wait) return;\n    Effects = null;\n    if (Transition) {\n      if (!Transition.promises.size) {\n        Transition.sources.forEach(v => {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n        });\n        Transition = null;\n        setTransPending(false);\n      } else if (Transition.running) {\n        Transition.running = false;\n        setTransPending(true);\n      }\n    }\n  }\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction runUserEffects(queue) {\n  let i,\n      userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  const resume = queue.length;\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n  for (i = resume; i < queue.length; i++) runTop(queue[i]);\n}\nfunction lookDownstream(node) {\n  node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      if (source.state === STALE) runTop(source);else if (source.state === PENDING) lookDownstream(source);\n    }\n  }\n}\nfunction markUpstream(node) {\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (!o.state) {\n      o.state = PENDING;\n      o.observers && markUpstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n            index = node.sourceSlots.pop(),\n            obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n              s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = 0; i < node.tOwned.length; i++) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n  } else if (node.owned) {\n    for (i = 0; i < node.owned.length; i++) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = 0; i < node.cleanups.length; i++) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  node.state = 0;\n  node.context = null;\n}\nfunction handleError(err) {\n  const fns = ERROR && lookup(Owner, ERROR);\n  if (!fns) throw err;\n  fns.forEach(f => f(err));\n}\nfunction lookup(owner, key) {\n  return owner && (owner.context && owner.context[key] || owner.owner && lookup(owner.owner, key));\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\") return createMemo(() => resolveChildren(children()));\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      let result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id) {\n  return function provider(props) {\n    let rendered;\n    createComputed(() => {\n      Owner.context = {\n        [id]: props.value\n      };\n      rendered = untrack(() => resolveChildren(props.children));\n    });\n    return rendered;\n  };\n}\n\nconst $RAW = Symbol(\"state-raw\"),\n      $NODE = Symbol(\"state-node\"),\n      $PROXY = Symbol(\"state-proxy\");\nfunction wrap(value, traps) {\n  return value[$PROXY] || (value[$PROXY] = new Proxy(value, traps || proxyTraps));\n}\nfunction isWrappable(obj) {\n  return obj != null && typeof obj === \"object\" && (obj.__proto__ === Object.prototype || Array.isArray(obj));\n}\nfunction unwrap(item, skipGetters) {\n  let result, unwrapped, v, prop;\n  if (result = item != null && item[$RAW]) return result;\n  if (!isWrappable(item)) return item;\n  if (Array.isArray(item)) {\n    if (Object.isFrozen(item)) item = item.slice(0);\n    for (let i = 0, l = item.length; i < l; i++) {\n      v = item[i];\n      if ((unwrapped = unwrap(v, skipGetters)) !== v) item[i] = unwrapped;\n    }\n  } else {\n    if (Object.isFrozen(item)) item = Object.assign({}, item);\n    let keys = Object.keys(item),\n        desc = skipGetters && Object.getOwnPropertyDescriptors(item);\n    for (let i = 0, l = keys.length; i < l; i++) {\n      prop = keys[i];\n      if (skipGetters && desc[prop].get) continue;\n      v = item[prop];\n      if ((unwrapped = unwrap(v, skipGetters)) !== v) item[prop] = unwrapped;\n    }\n  }\n  return item;\n}\nfunction getDataNodes(target) {\n  let nodes = target[$NODE];\n  if (!nodes) target[$NODE] = nodes = {};\n  return nodes;\n}\nconst proxyTraps = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    const value = target[property];\n    if (property === $NODE || property === \"__proto__\") return value;\n    const wrappable = isWrappable(value);\n    if (getListener() && (typeof value !== \"function\" || target.hasOwnProperty(property))) {\n      let nodes, node;\n      if (wrappable && (nodes = getDataNodes(value))) {\n        node = nodes._ || (nodes._ = createSignal());\n        node[0]();\n      }\n      nodes = getDataNodes(target);\n      node = nodes[property] || (nodes[property] = createSignal());\n      node[0]();\n    }\n    return wrappable ? wrap(value) : value;\n  },\n  set() {\n    return true;\n  },\n  deleteProperty() {\n    return true;\n  }\n};\nfunction setProperty(state, property, value, force) {\n  if (!force && state[property] === value) return;\n  const notify = Array.isArray(state) || !(property in state);\n  if (value === undefined) {\n    delete state[property];\n  } else state[property] = value;\n  let nodes = getDataNodes(state),\n      node;\n  (node = nodes[property]) && node[1]();\n  notify && (node = nodes._) && node[1]();\n}\nfunction mergeState(state, value, force) {\n  const keys = Object.keys(value);\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    setProperty(state, key, value[key], force);\n  }\n}\nfunction updatePath(current, path, traversed = []) {\n  let part,\n      prev = current;\n  if (path.length > 1) {\n    part = path.shift();\n    const partType = typeof part,\n          isArray = Array.isArray(current);\n    if (Array.isArray(part)) {\n      for (let i = 0; i < part.length; i++) {\n        updatePath(current, [part[i]].concat(path), [part[i]].concat(traversed));\n      }\n      return;\n    } else if (isArray && partType === \"function\") {\n      for (let i = 0; i < current.length; i++) {\n        if (part(current[i], i)) updatePath(current, [i].concat(path), [i].concat(traversed));\n      }\n      return;\n    } else if (isArray && partType === \"object\") {\n      const {\n        from = 0,\n        to = current.length - 1,\n        by = 1\n      } = part;\n      for (let i = from; i <= to; i += by) {\n        updatePath(current, [i].concat(path), [i].concat(traversed));\n      }\n      return;\n    } else if (path.length > 1) {\n      updatePath(current[part], path, [part].concat(traversed));\n      return;\n    }\n    prev = current[part];\n    traversed = [part].concat(traversed);\n  }\n  let value = path[0];\n  if (typeof value === \"function\") {\n    value = value(prev, traversed);\n    if (value === prev) return;\n  }\n  if (part === undefined && value == undefined) return;\n  value = unwrap(value);\n  if (part === undefined || isWrappable(prev) && isWrappable(value) && !Array.isArray(value)) {\n    mergeState(prev, value);\n  } else setProperty(current, part, value);\n}\nfunction createState(state) {\n  const unwrappedState = unwrap(state || {}, true);\n  const wrappedState = wrap(unwrappedState);\n  function setState(...args) {\n    batch(() => updatePath(unwrappedState, args));\n  }\n  return [wrappedState, setState];\n}\n\nfunction createResourceNode(v, name) {\n  const node = createSignal(),\n        [r, load] = createResource(v, {\n    name\n  });\n  return [() => (r(), node[0]()), node[1], load, () => r.loading];\n}\nfunction createResourceState(state, options = {}) {\n  const loadingTraps = {\n    get(nodes, property) {\n      const node = nodes[property] || (nodes[property] = createResourceNode(undefined, name && `${options.name}:${property}`));\n      return node[3]();\n    },\n    set() {\n      return true;\n    },\n    deleteProperty() {\n      return true;\n    }\n  };\n  const resourceTraps = {\n    get(target, property, receiver) {\n      if (property === $RAW) return target;\n      if (property === $PROXY) return receiver;\n      if (property === \"loading\") return new Proxy(getDataNodes(target), loadingTraps);\n      const value = target[property];\n      if (property === $NODE || property === \"__proto__\") return value;\n      const wrappable = isWrappable(value);\n      if (getListener() && (typeof value !== \"function\" || target.hasOwnProperty(property))) {\n        let nodes, node;\n        if (wrappable && (nodes = getDataNodes(value))) {\n          node = nodes._ || (nodes._ = createSignal());\n          node[0]();\n        }\n        nodes = getDataNodes(target);\n        node = nodes[property] || (nodes[property] = createResourceNode(value, `${options.name}:${property}`));\n        node[0]();\n      }\n      return wrappable ? wrap(value) : value;\n    },\n    set() {\n      return true;\n    },\n    deleteProperty() {\n      return true;\n    }\n  };\n  const unwrappedState = unwrap(state || {}, true),\n        wrappedState = wrap(unwrappedState, resourceTraps);\n  function setState(...args) {\n    batch(() => updatePath(unwrappedState, args));\n  }\n  function loadState(v, r) {\n    const nodes = getDataNodes(unwrappedState),\n          keys = Object.keys(v);\n    for (let i = 0; i < keys.length; i++) {\n      const k = keys[i],\n            node = nodes[k] || (nodes[k] = createResourceNode(unwrappedState[k], `${options.name}:${k}`)),\n            resolver = v => (r ? setState(k, r(v)) : setProperty(unwrappedState, k, v), v),\n            p = node[2](v[k]);\n      typeof p === \"object\" && \"then\" in p ? p.then(resolver) : resolver(p);\n    }\n  }\n  return [wrappedState, loadState, setState];\n}\n\nfunction applyState(target, parent, property, merge, key) {\n  let previous = parent[property];\n  if (target === previous) return;\n  if (!isWrappable(target) || !isWrappable(previous) || key && target[key] !== previous[key]) {\n    target !== previous && setProperty(parent, property, target);\n    return;\n  }\n  if (Array.isArray(target)) {\n    if (target.length && previous.length && (!merge || key && target[0][key] != null)) {\n      let i, j, start, end, newEnd, item, newIndicesNext, keyVal;\n      for (start = 0, end = Math.min(previous.length, target.length); start < end && (previous[start] === target[start] || key && previous[start][key] === target[start][key]); start++) {\n        applyState(target[start], previous, start, merge, key);\n      }\n      const temp = new Array(target.length),\n            newIndices = new Map();\n      for (end = previous.length - 1, newEnd = target.length - 1; end >= start && newEnd >= start && (previous[end] === target[newEnd] || key && previous[end][key] === target[newEnd][key]); end--, newEnd--) {\n        temp[newEnd] = previous[end];\n      }\n      if (start > newEnd || start > end) {\n        for (j = start; j <= newEnd; j++) setProperty(previous, j, target[j]);\n        for (; j < target.length; j++) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        }\n        if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n        return;\n      }\n      newIndicesNext = new Array(newEnd + 1);\n      for (j = newEnd; j >= start; j--) {\n        item = target[j];\n        keyVal = key ? item[key] : item;\n        i = newIndices.get(keyVal);\n        newIndicesNext[j] = i === undefined ? -1 : i;\n        newIndices.set(keyVal, j);\n      }\n      for (i = start; i <= end; i++) {\n        item = previous[i];\n        keyVal = key ? item[key] : item;\n        j = newIndices.get(keyVal);\n        if (j !== undefined && j !== -1) {\n          temp[j] = previous[i];\n          j = newIndicesNext[j];\n          newIndices.set(keyVal, j);\n        }\n      }\n      for (j = start; j < target.length; j++) {\n        if (j in temp) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        } else setProperty(previous, j, target[j]);\n      }\n    } else {\n      for (let i = 0, len = target.length; i < len; i++) {\n        applyState(target[i], previous, i, merge, key);\n      }\n    }\n    if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n    return;\n  }\n  const targetKeys = Object.keys(target);\n  for (let i = 0, len = targetKeys.length; i < len; i++) {\n    applyState(target[targetKeys[i]], previous, targetKeys[i], merge, key);\n  }\n  const previousKeys = Object.keys(previous);\n  for (let i = 0, len = previousKeys.length; i < len; i++) {\n    if (target[previousKeys[i]] === undefined) setProperty(previous, previousKeys[i], undefined);\n  }\n}\nfunction reconcile(value, options = {}) {\n  const {\n    merge,\n    key = \"id\"\n  } = options,\n        v = unwrap(value);\n  return state => {\n    if (!isWrappable(state)) return v;\n    applyState(v, {\n      state\n    }, \"state\", merge, key);\n    return state;\n  };\n}\nconst setterTraps = {\n  get(target, property) {\n    if (property === $RAW) return target;\n    const value = target[property];\n    return isWrappable(value) ? new Proxy(value, setterTraps) : value;\n  },\n  set(target, property, value) {\n    setProperty(target, property, unwrap(value));\n    return true;\n  },\n  deleteProperty(target, property) {\n    setProperty(target, property, undefined);\n    return true;\n  }\n};\nfunction produce(fn) {\n  return state => {\n    if (isWrappable(state)) fn(new Proxy(state, setterTraps));\n    return state;\n  };\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n      mapped = [],\n      disposers = [],\n      len = 0,\n      indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => {\n    for (let i = 0, length = disposers.length; i < length; i++) disposers[i]();\n  });\n  return () => {\n    let newItems = list() || [],\n        i,\n        j;\n    return untrack(() => {\n      let newLen = newItems.length,\n          newIndices,\n          newIndicesNext,\n          temp,\n          tempdisposers,\n          tempIndexes,\n          start,\n          end,\n          newEnd,\n          item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          for (i = 0; i < len; i++) disposers[i]();\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n          for (j = 0; j < newLen; j++) {\n            items[j] = newItems[j];\n            mapped[j] = createRoot(mapper);\n          }\n          len = newLen;\n        } else {\n          temp = new Array(newLen);\n          tempdisposers = new Array(newLen);\n          indexes && (tempIndexes = new Array(newLen));\n          for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n          for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n            temp[newEnd] = mapped[end];\n            tempdisposers[newEnd] = disposers[end];\n            indexes && (tempIndexes[newEnd] = indexes[end]);\n          }\n          newIndices = new Map();\n          newIndicesNext = new Array(newEnd + 1);\n          for (j = newEnd; j >= start; j--) {\n            item = newItems[j];\n            i = newIndices.get(item);\n            newIndicesNext[j] = i === undefined ? -1 : i;\n            newIndices.set(item, j);\n          }\n          for (i = start; i <= end; i++) {\n            item = items[i];\n            j = newIndices.get(item);\n            if (j !== undefined && j !== -1) {\n              temp[j] = mapped[i];\n              tempdisposers[j] = disposers[i];\n              indexes && (tempIndexes[j] = indexes[i]);\n              j = newIndicesNext[j];\n              newIndices.set(item, j);\n            } else disposers[i]();\n          }\n          for (j = start; j < newLen; j++) {\n            if (j in temp) {\n              mapped[j] = temp[j];\n              disposers[j] = tempdisposers[j];\n              if (indexes) {\n                indexes[j] = tempIndexes[j];\n                indexes[j](j);\n              }\n            } else mapped[j] = createRoot(mapper);\n          }\n          len = mapped.length = newLen;\n          items = newItems.slice(0);\n        }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j, true);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n      mapped = [],\n      disposers = [],\n      signals = [],\n      len = 0,\n      i;\n  onCleanup(() => {\n    for (let i = 0, length = disposers.length; i < length; i++) disposers[i]();\n  });\n  return () => {\n    const newItems = list() || [];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          for (i = 0; i < len; i++) disposers[i]();\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = mapped.length = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nfunction createComponent(Comp, props) {\n  return untrack(() => Comp(props));\n}\nfunction assignProps(target, ...sources) {\n  for (let i = 0; i < sources.length; i++) {\n    const descriptors = Object.getOwnPropertyDescriptors(sources[i]);\n    Object.defineProperties(target, descriptors);\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  const descriptors = Object.getOwnPropertyDescriptors(props),\n        split = k => {\n    const clone = {};\n    for (let i = 0; i < k.length; i++) {\n      const key = k[i];\n      if (descriptors[key]) {\n        Object.defineProperty(clone, key, descriptors[key]);\n        delete descriptors[key];\n      }\n    }\n    return clone;\n  };\n  return keys.map(split).concat(split(Object.keys(descriptors)));\n}\nfunction lazy(fn) {\n  return props => {\n    const h = globalThis._$HYDRATION || {},\n          hydrating = h.context && h.context.registry,\n          ctx = nextHydrateContext(),\n          [s, l] = createResource(undefined, {\n      notStreamed: true\n    });\n    if (hydrating && h.resources) {\n      fn().then(mod => l(() => mod.default));\n    } else l(() => fn().then(mod => mod.default));\n    let Comp;\n    return createMemo(() => (Comp = s()) && untrack(() => {\n      if (!ctx) return Comp(props);\n      const c = h.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      !c && setHydrateContext();\n      return r;\n    }));\n  };\n}\nfunction setHydrateContext(context) {\n  globalThis._$HYDRATION.context = context;\n}\nfunction nextHydrateContext() {\n  const hydration = globalThis._$HYDRATION;\n  return hydration && hydration.context ? {\n    id: `${hydration.context.id}.${hydration.context.count++}`,\n    count: 0,\n    registry: hydration.context.registry\n  } : undefined;\n}\n\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback ? fallback : undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback ? fallback : undefined));\n}\nfunction Show(props) {\n  const childDesc = Object.getOwnPropertyDescriptor(props, \"children\").value,\n        callFn = typeof childDesc === \"function\" && childDesc.length,\n        condition = createMemo(callFn ? () => props.when : () => !!props.when, undefined, true);\n  return createMemo(() => {\n    const c = condition();\n    return c ? callFn ? untrack(() => props.children(c)) : props.children : props.fallback;\n  });\n}\nfunction Switch(props) {\n  let conditions = props.children;\n  Array.isArray(conditions) || (conditions = [conditions]);\n  const evalConditions = createMemo(() => {\n    for (let i = 0; i < conditions.length; i++) {\n      const c = conditions[i].when;\n      if (c) return [i, conditions[i].keyed ? c : !!c];\n    }\n    return [-1];\n  }, undefined, (a, b) => a && a[0] === b[0] && a[1] === b[1]);\n  return createMemo(() => {\n    const [index, when] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = conditions[index].children;\n    return typeof c === \"function\" && c.length ? untrack(() => c(when)) : c;\n  });\n}\nfunction Match(props) {\n  const childDesc = Object.getOwnPropertyDescriptor(props, \"children\").value;\n  props.keyed = typeof childDesc === \"function\" && !!childDesc.length;\n  return props;\n}\nfunction ErrorBoundary(props) {\n  const [errored, setErrored] = createSignal(),\n        fallbackDesc = Object.getOwnPropertyDescriptor(props, \"fallback\").value,\n        callFn = typeof fallbackDesc === \"function\" && !!fallbackDesc.length;\n  onError(setErrored);\n  let e;\n  return createMemo(() => (e = errored()) != null ? callFn ? untrack(() => props.fallback(e)) : props.fallback : props.children);\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  return createMemo(() => {\n    const comp = p.component;\n    return comp && untrack(() => comp(others));\n  });\n}\n\nconst SuspenseListContext = createContext();\nlet trackSuspense = false;\nfunction awaitSuspense(fn) {\n  const SuspenseContext = getSuspenseContext();\n  if (!trackSuspense) {\n    let count = 0;\n    const [active, trigger] = createSignal(false);\n    SuspenseContext.active = active;\n    SuspenseContext.increment = () => count++ === 0 && trigger(true);\n    SuspenseContext.decrement = () => --count <= 0 && trigger(false);\n    trackSuspense = true;\n  }\n  return () => new Promise(resolve => {\n    const res = fn();\n    createRenderEffect(() => !SuspenseContext.active() && resolve(res));\n  });\n}\nfunction SuspenseList(props) {\n  let index = 0,\n      suspenseSetter,\n      showContent,\n      showFallback;\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) {\n    const [inFallback, setFallback] = createSignal(false, true);\n    suspenseSetter = setFallback;\n    [showContent, showFallback] = listContext.register(inFallback);\n  }\n  const registry = [],\n        comp = createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        const [showingContent, showContent] = createSignal(false, true),\n              [showingFallback, showFallback] = createSignal(false, true);\n        registry[index++] = {\n          inFallback,\n          showContent,\n          showFallback\n        };\n        return [showingContent, showingFallback];\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n  createComputed(() => {\n    const reveal = props.revealOrder,\n          tail = props.tail,\n          visibleContent = showContent ? showContent() : true,\n          visibleFallback = showFallback ? showFallback() : true,\n          reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = registry.every(i => !i.inFallback());\n      suspenseSetter && suspenseSetter(!all);\n      registry.forEach(i => {\n        i.showContent(all && visibleContent);\n        i.showFallback(visibleFallback);\n      });\n      return;\n    }\n    let stop = false;\n    for (let i = 0, len = registry.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n            s = registry[n].inFallback();\n      if (!stop && !s) {\n        registry[n].showContent(visibleContent);\n        registry[n].showFallback(visibleFallback);\n      } else {\n        const next = !stop;\n        if (next && suspenseSetter) suspenseSetter(true);\n        if (!tail || next && tail === \"collapsed\") {\n          registry[n].showFallback(visibleFallback);\n        } else registry[n].showFallback(false);\n        stop = true;\n        registry[n].showContent(next);\n      }\n    }\n    if (!stop && suspenseSetter) suspenseSetter(false);\n  });\n  return comp;\n}\nfunction Suspense(props) {\n  let counter = 0,\n      showContent,\n      showFallback;\n  const [inFallback, setFallback] = createSignal(false),\n        SuspenseContext = getSuspenseContext(),\n        store = {\n    increment: () => {\n      if (++counter === 1) {\n        setFallback(true);\n        trackSuspense && SuspenseContext.increment();\n      }\n    },\n    decrement: () => {\n      if (--counter === 0) {\n        setFallback(false);\n        trackSuspense && Promise.resolve().then(SuspenseContext.decrement);\n      }\n    },\n    inFallback,\n    effects: [],\n    resolved: false\n  };\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) [showContent, showFallback] = listContext.register(store.inFallback);\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      const rendered = untrack(() => props.children);\n      return () => {\n        const inFallback = store.inFallback(),\n              visibleContent = showContent ? showContent() : true,\n              visibleFallback = showFallback ? showFallback() : true;\n        if (!inFallback && visibleContent) {\n          store.resolved = true;\n          resumeEffects(store.effects);\n          return rendered;\n        }\n        if (!visibleFallback) return;\n        return props.fallback;\n      };\n    }\n  });\n}\n\nif (!globalThis.Solid$$) globalThis.Solid$$ = true;else console.warn(\"You appear to have multiple instances of Solid. This can lead to unexpected behavior.\");\n\nexport { $RAW, Dynamic, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, assignProps, awaitSuspense, batch, cancelCallback, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createRenderEffect, createResource, createResourceState, createRoot, createSelector, createSignal, createState, equalFn, getContextOwner, getListener, indexArray, lazy, mapArray, onCleanup, onError, produce, reconcile, requestCallback, splitProps, untrack, unwrap, useContext, useTransition };\n","import { createMemo, createRoot, createRenderEffect, onCleanup, splitProps, untrack } from '../index.js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, assignProps, createComponent, getContextOwner as currentContext, createRenderEffect as effect } from '../index.js';\n\nconst Types = {\n  ATTRIBUTE: \"attribute\",\n  PROPERTY: \"property\"\n},\n      Attributes = {\n  href: {\n    type: Types.ATTRIBUTE\n  },\n  width: {\n    type: Types.ATTRIBUTE\n  },\n  height: {\n    type: Types.ATTRIBUTE\n  },\n  role: {\n    type: Types.ATTRIBUTE\n  },\n  style: {\n    type: Types.PROPERTY,\n    alias: \"style.cssText\"\n  },\n  for: {\n    type: Types.PROPERTY,\n    alias: \"htmlFor\"\n  },\n  class: {\n    type: Types.PROPERTY,\n    alias: \"className\"\n  },\n  spellCheck: {\n    type: Types.PROPERTY,\n    alias: \"spellcheck\"\n  },\n  allowFullScreen: {\n    type: Types.PROPERTY,\n    alias: \"allowFullscreen\"\n  },\n  autoCapitalize: {\n    type: Types.PROPERTY,\n    alias: \"autocapitalize\"\n  },\n  autoFocus: {\n    type: Types.PROPERTY,\n    alias: \"autofocus\"\n  },\n  autoPlay: {\n    type: Types.PROPERTY,\n    alias: \"autoplay\"\n  }\n},\n      SVGAttributes = {\n  innerHTML: {\n    type: Types.PROPERTY\n  },\n  textContent: {\n    type: Types.PROPERTY\n  },\n  innerText: {\n    type: Types.PROPERTY\n  },\n  className: {\n    type: Types.ATTRIBUTE,\n    alias: \"class\"\n  },\n  htmlFor: {\n    type: Types.ATTRIBUTE,\n    alias: \"for\"\n  },\n  tabIndex: {\n    type: Types.ATTRIBUTE,\n    alias: \"tabindex\"\n  },\n  allowReorder: {\n    type: Types.ATTRIBUTE\n  },\n  attributeName: {\n    type: Types.ATTRIBUTE\n  },\n  attributeType: {\n    type: Types.ATTRIBUTE\n  },\n  autoReverse: {\n    type: Types.ATTRIBUTE\n  },\n  baseFrequency: {\n    type: Types.ATTRIBUTE\n  },\n  calcMode: {\n    type: Types.ATTRIBUTE\n  },\n  clipPathUnits: {\n    type: Types.ATTRIBUTE\n  },\n  contentScriptType: {\n    type: Types.ATTRIBUTE\n  },\n  contentStyleType: {\n    type: Types.ATTRIBUTE\n  },\n  diffuseConstant: {\n    type: Types.ATTRIBUTE\n  },\n  edgeMode: {\n    type: Types.ATTRIBUTE\n  },\n  externalResourcesRequired: {\n    type: Types.ATTRIBUTE\n  },\n  filterRes: {\n    type: Types.ATTRIBUTE\n  },\n  filterUnits: {\n    type: Types.ATTRIBUTE\n  },\n  gradientTransform: {\n    type: Types.ATTRIBUTE\n  },\n  gradientUnits: {\n    type: Types.ATTRIBUTE\n  },\n  kernelMatrix: {\n    type: Types.ATTRIBUTE\n  },\n  kernelUnitLength: {\n    type: Types.ATTRIBUTE\n  },\n  keyPoints: {\n    type: Types.ATTRIBUTE\n  },\n  keySplines: {\n    type: Types.ATTRIBUTE\n  },\n  keyTimes: {\n    type: Types.ATTRIBUTE\n  },\n  lengthAdjust: {\n    type: Types.ATTRIBUTE\n  },\n  limitingConeAngle: {\n    type: Types.ATTRIBUTE\n  },\n  markerHeight: {\n    type: Types.ATTRIBUTE\n  },\n  markerUnits: {\n    type: Types.ATTRIBUTE\n  },\n  maskContentUnits: {\n    type: Types.ATTRIBUTE\n  },\n  maskUnits: {\n    type: Types.ATTRIBUTE\n  },\n  numOctaves: {\n    type: Types.ATTRIBUTE\n  },\n  pathLength: {\n    type: Types.ATTRIBUTE\n  },\n  patternContentUnits: {\n    type: Types.ATTRIBUTE\n  },\n  patternTransform: {\n    type: Types.ATTRIBUTE\n  },\n  patternUnits: {\n    type: Types.ATTRIBUTE\n  },\n  pointsAtX: {\n    type: Types.ATTRIBUTE\n  },\n  pointsAtY: {\n    type: Types.ATTRIBUTE\n  },\n  pointsAtZ: {\n    type: Types.ATTRIBUTE\n  },\n  preserveAlpha: {\n    type: Types.ATTRIBUTE\n  },\n  preserveAspectRatio: {\n    type: Types.ATTRIBUTE\n  },\n  primitiveUnits: {\n    type: Types.ATTRIBUTE\n  },\n  refX: {\n    type: Types.ATTRIBUTE\n  },\n  refY: {\n    type: Types.ATTRIBUTE\n  },\n  repeatCount: {\n    type: Types.ATTRIBUTE\n  },\n  repeatDur: {\n    type: Types.ATTRIBUTE\n  },\n  requiredExtensions: {\n    type: Types.ATTRIBUTE\n  },\n  requiredFeatures: {\n    type: Types.ATTRIBUTE\n  },\n  specularConstant: {\n    type: Types.ATTRIBUTE\n  },\n  specularExponent: {\n    type: Types.ATTRIBUTE\n  },\n  spreadMethod: {\n    type: Types.ATTRIBUTE\n  },\n  startOffset: {\n    type: Types.ATTRIBUTE\n  },\n  stdDeviation: {\n    type: Types.ATTRIBUTE\n  },\n  stitchTiles: {\n    type: Types.ATTRIBUTE\n  },\n  surfaceScale: {\n    type: Types.ATTRIBUTE\n  },\n  systemLanguage: {\n    type: Types.ATTRIBUTE\n  },\n  tableValues: {\n    type: Types.ATTRIBUTE\n  },\n  targetX: {\n    type: Types.ATTRIBUTE\n  },\n  targetY: {\n    type: Types.ATTRIBUTE\n  },\n  textLength: {\n    type: Types.ATTRIBUTE\n  },\n  viewBox: {\n    type: Types.ATTRIBUTE\n  },\n  viewTarget: {\n    type: Types.ATTRIBUTE\n  },\n  xChannelSelector: {\n    type: Types.ATTRIBUTE\n  },\n  yChannelSelector: {\n    type: Types.ATTRIBUTE\n  },\n  zoomAndPan: {\n    type: Types.ATTRIBUTE\n  }\n};\nconst NonComposedEvents = new Set([\"abort\", \"animationstart\", \"animationend\", \"animationiteration\", \"blur\", \"change\", \"copy\", \"cut\", \"error\", \"focus\", \"gotpointercapture\", \"load\", \"loadend\", \"loadstart\", \"lostpointercapture\", \"mouseenter\", \"mouseleave\", \"paste\", \"progress\", \"reset\", \"scroll\", \"select\", \"submit\", \"transitionstart\", \"transitioncancel\", \"transitionend\", \"transitionrun\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\n\nfunction memo(fn, equal) {\n  return createMemo(fn, undefined, equal);\n}\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n      aEnd = a.length,\n      bEnd = bLength,\n      aStart = 0,\n      bStart = 0,\n      after = a[aEnd - 1].nextSibling,\n      map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) parentNode.removeChild(a[aStart]);\n        aStart++;\n      }\n    } else if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n    } else if (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n              sequence = 1,\n              t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else parentNode.removeChild(a[aStart++]);\n    }\n  }\n}\n\nconst eventRegistry = new Set();\nlet hydration = null;\nfunction render(code, element, init) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    insert(element, code(), element.firstChild ? null : undefined, init);\n  });\n  return disposer;\n}\nfunction hydrate(code, element) {\n  hydration = globalThis._$HYDRATION || (globalThis._$HYDRATION = {});\n  hydration.context = {\n    id: \"0\",\n    count: 0,\n    registry: {}\n  };\n  const templates = element.querySelectorAll(`*[_hk]`);\n  Array.prototype.reduce.call(templates, (memo, node) => {\n    const id = node.getAttribute(\"_hk\"),\n          list = memo[id] || (memo[id] = []);\n    list.push(node);\n    return memo;\n  }, hydration.context.registry);\n  const dispose = render(code, element, [...element.childNodes]);\n  delete hydration.context;\n  return dispose;\n}\nfunction template(html, check, isSVG) {\n  const t = document.createElement(\"template\");\n  t.innerHTML = html;\n  if (check && t.innerHTML.split(\"<\").length - 1 !== check) throw `Template html does not match input:\\n${t.innerHTML}\\n\\n${html}`;\n  let node = t.content.firstChild;\n  if (isSVG) node = node.firstChild;\n  return node;\n}\nfunction delegateEvents(eventNames) {\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!eventRegistry.has(name)) {\n      eventRegistry.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents() {\n  for (let name of eventRegistry.keys()) document.removeEventListener(name, eventHandler);\n  eventRegistry.clear();\n}\nfunction setAttribute(node, name, value) {\n  if (value === false || value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (value === false || value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction classList(node, value, prev) {\n  const classKeys = Object.keys(value);\n  for (let i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n          classValue = !!value[key],\n          classNames = key.split(/\\s+/);\n    if (!key || prev && prev[key] === classValue) continue;\n    for (let j = 0, nameLen = classNames.length; j < nameLen; j++) node.classList.toggle(classNames[j], classValue);\n  }\n  return value;\n}\nfunction style(node, value, prev) {\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  let v, s;\n  if (prev != null && typeof prev !== \"string\") {\n    for (s in value) {\n      v = value[s];\n      v !== prev[s] && nodeStyle.setProperty(s, v);\n    }\n    for (s in prev) {\n      value[s] == null && nodeStyle.removeProperty(s);\n    }\n  } else {\n    for (s in value) nodeStyle.setProperty(s, value[s]);\n  }\n  return value;\n}\nfunction spread(node, accessor, isSVG, skipChildren) {\n  if (typeof accessor === \"function\") {\n    createRenderEffect(current => spreadExpression(node, accessor(), current, isSVG, skipChildren));\n  } else spreadExpression(node, accessor, undefined, isSVG, skipChildren);\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}) {\n  let info;\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    if (value === prevProps[prop]) continue;\n    if (prop === \"style\") {\n      style(node, value, prevProps[prop]);\n    } else if (prop === \"classList\") {\n      classList(node, value, prevProps[prop]);\n    } else if (prop === \"ref\") {\n      value(node);\n    } else if (prop === \"on\") {\n      for (const eventName in value) node.addEventListener(eventName, value[eventName]);\n    } else if (prop === \"onCapture\") {\n      for (const eventName in value) node.addEventListener(eventName, value[eventName], true);\n    } else if (prop.slice(0, 2) === \"on\") {\n      const lc = prop.toLowerCase();\n      if (!NonComposedEvents.has(lc.slice(2))) {\n        const name = lc.slice(2);\n        if (Array.isArray(value)) {\n          node[`__${name}`] = value[0];\n          node[`__${name}Data`] = value[1];\n        } else node[`__${name}`] = value;\n        delegateEvents([name]);\n      } else node[lc] = value;\n    } else if (!isSVG && (info = Attributes[prop])) {\n      if (info.type === \"attribute\") {\n        setAttribute(node, prop, value);\n      } else node[info.alias] = value;\n    } else if (isSVG || prop.indexOf(\"-\") > -1 || prop.indexOf(\":\") > -1) {\n      const ns = prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n      if (ns) setAttributeNS(node, ns, prop, value);else if (info = SVGAttributes[prop]) {\n        if (info.alias) setAttribute(node, info.alias, value);else setAttribute(node, prop, value);\n      } else setAttribute(node, prop.replace(/([A-Z])/g, g => `-${g[0].toLowerCase()}`), value);\n    } else node[prop] = value;\n    prevProps[prop] = value;\n  }\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction ssrClassList(value) {\n  let classKeys = Object.keys(value),\n      result = \"\";\n  for (let i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n          classValue = !!value[key];\n    if (!key || !classValue) continue;\n    i && (result += \" \");\n    result += key;\n  }\n  return result;\n}\nfunction ssrStyle(value) {\n  if (typeof value === \"string\") return value;\n  let result = \"\";\n  const k = Object.keys(value);\n  for (let i = 0; i < k.length; i++) {\n    const s = k[i];\n    if (i) result += \";\";\n    result += `${s}:${escape(value[s], true)}`;\n  }\n  return result;\n}\nfunction ssrSpread(props, isSVG) {\n  return () => {\n    if (typeof props === \"function\") props = props();\n    const keys = Object.keys(props);\n    let result = \"\";\n    for (let i = 0; i < keys.length; i++) {\n      const prop = keys[i];\n      if (prop === \"children\") {\n        console.warn(`SSR currently does not support spread children.`);\n        continue;\n      }\n      const value = props[prop];\n      if (prop === \"style\") {\n        result += `style=\"${ssrStyle(value)}\"`;\n      } else if (prop === \"classList\") {\n        result += `class=\"${ssrClassList(value)}\"`;\n      } else {\n        const key = toSSRAttribute(prop, isSVG);\n        result += `${key}=\"${escape(value, true)}\"`;\n      }\n      if (i !== keys.length - 1) result += \" \";\n    }\n    return result;\n  };\n}\nconst ATTR_REGEX = /[&<\"]/,\n      CONTENT_REGEX = /[&<]/;\nfunction escape(html, attr) {\n  if (typeof html !== \"string\") return html;\n  const match = (attr ? ATTR_REGEX : CONTENT_REGEX).exec(html);\n  if (!match) return html;\n  let index = 0;\n  let lastIndex = 0;\n  let out = \"\";\n  let escape = \"\";\n  for (index = match.index; index < html.length; index++) {\n    switch (html.charCodeAt(index)) {\n      case 34:\n        if (!attr) continue;\n        escape = \"&quot;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) out += html.substring(lastIndex, index);\n    lastIndex = index + 1;\n    out += escape;\n  }\n  return lastIndex !== index ? out + html.substring(lastIndex, index) : out;\n}\nfunction getNextElement(template, isSSR) {\n  hydration = globalThis._$HYDRATION;\n  const hydrate = hydration.context;\n  let node, key;\n  if (!hydrate || !hydrate.registry || !((key = getHydrationKey()) && hydrate.registry[key] && (node = hydrate.registry[key].shift()))) {\n    const el = template.cloneNode(true);\n    if (isSSR && hydrate) el.setAttribute(\"_hk\", getHydrationKey());\n    return el;\n  }\n  if (hydration && hydration.completed) hydration.completed.add(node);\n  return node;\n}\nfunction getNextMarker(start) {\n  let end = start,\n      count = 0,\n      current = [];\n  if (hydration && hydration.context && hydration.context.registry) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"#\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (hydration.events) {\n    const {\n      completed,\n      events\n    } = hydration;\n    while (events.length) {\n      const [el, e] = events[0];\n      if (!completed.has(el)) return;\n      eventHandler(e);\n      events.shift();\n    }\n  }\n}\nfunction getHydrationKey() {\n  return globalThis._$HYDRATION.context.id;\n}\nfunction generateHydrationScript({\n  eventNames = [\"click\", \"input\", \"blur\"],\n  streaming,\n  resolved\n} = {}) {\n  let s = `(()=>{_$HYDRATION={events:[],completed:new WeakSet};const t=e=>e&&e.hasAttribute&&(e.hasAttribute(\"_hk\")&&e||t(e.host&&e.host instanceof Node?e.host:e.parentNode)),e=e=>{let o=e.composedPath&&e.composedPath()[0]||e.target,s=t(o);s&&!_$HYDRATION.completed.has(s)&&_$HYDRATION.events.push([s,e])};[\"${eventNames.join('\",\"')}\"].forEach(t=>document.addEventListener(t,e))})();`;\n  if (streaming) {\n    s += `(()=>{const e=_$HYDRATION,r={};let o=0;e.resolveResource=((e,o)=>{const t=r[e];if(!t)return r[e]=o;delete r[e],t(o)}),e.loadResource=(()=>{const e=++o,t=r[e];if(!t){let o,t=new Promise(e=>o=e);return r[e]=o,t}return delete r[e],Promise.resolve(t)})})();`;\n  }\n  if (resolved) s += `_$HYDRATION.resources = JSON.parse('${JSON.stringify(_$HYDRATION.resources || {})}');`;\n  return s;\n}\nfunction eventHandler(e) {\n  const key = `__${e.type}`;\n  let node = e.composedPath && e.composedPath()[0] || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node;\n    }\n  });\n  while (node !== null) {\n    const handler = node[key];\n    if (handler) {\n      const data = node[`${key}Data`];\n      data ? handler(data, e) : handler(e);\n      if (e.cancelBubble) return;\n    }\n    node = node.host && node.host instanceof Node ? node.host : node.parentNode;\n  }\n}\nfunction spreadExpression(node, props, prevProps = {}, isSVG, skipChildren) {\n  if (!skipChildren && \"children\" in props) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps));\n  return prevProps;\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n        multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (hydration && hydration.context && hydration.context.registry) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => current = insertExpression(parent, value(), current, marker));\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    if (normalizeIncomingArray(array, value, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (hydration && hydration.context && hydration.context.registry && current.length) return current;\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else {\n      if (Array.isArray(current)) {\n        if (current.length === 0) {\n          appendNodes(parent, array, marker);\n        } else reconcileArrays(parent, current, array);\n      } else if (current == null || current === \"\") {\n        appendNodes(parent, array);\n      } else {\n        reconcileArrays(parent, multi && current || [parent.firstChild], array);\n      }\n    }\n    current = array;\n  } else if (value instanceof Node) {\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n        t;\n    if (item instanceof Node) {\n      normalized.push(item);\n    } else if (item == null || item === true || item === false) ; else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item) || dynamic;\n    } else if ((t = typeof item) === \"string\") {\n      normalized.push(document.createTextNode(item));\n    } else if (t === \"function\") {\n      if (unwrap) {\n        const idx = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(idx) ? idx : [idx]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else normalized.push(document.createTextNode(item.toString()));\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && parent.removeChild(el);\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction toSSRAttribute(key, isSVG) {\n  if (isSVG) {\n    const attr = SVGAttributes[key];\n    if (attr) {\n      if (attr.alias) key = attr.alias;\n    } else key = key.replace(/([A-Z])/g, g => `-${g[0].toLowerCase()}`);\n  } else {\n    const attr = SVGAttributes[key];\n    if (attr && attr.alias) key = attr.alias;\n    key = key.toLowerCase();\n  }\n  return key;\n}\n\nfunction renderToString(code, options = {}) {\n  options = {\n    timeoutMs: 30000,\n    ...options\n  };\n  const hydration = globalThis._$HYDRATION || (globalThis._$HYDRATION = {});\n  hydration.context = {\n    id: \"0\",\n    count: 0\n  };\n  hydration.resources = {};\n  hydration.asyncSSR = true;\n  return createRoot(() => {\n    const rendered = code();\n    if (typeof rendered === \"object\" && \"then\" in rendered) {\n      const timeout = new Promise((_, reject) => setTimeout(() => reject(\"renderToString timed out\"), options.timeoutMs));\n      return Promise.race([rendered, timeout]).then(resolveSSRNode);\n    }\n    return resolveSSRNode(rendered);\n  });\n}\nfunction renderDOMToString(code, options = {}) {\n  options = {\n    timeoutMs: 30000,\n    ...options\n  };\n  const hydration = globalThis._$HYDRATION || (globalThis._$HYDRATION = {});\n  hydration.context = {\n    id: \"0\",\n    count: 0\n  };\n  hydration.resources = {};\n  hydration.asyncSSR = true;\n  const container = document.createElement(\"div\");\n  document.body.appendChild(container);\n  return createRoot(d1 => {\n    const rendered = code();\n    function resolve(rendered) {\n      createRoot(d2 => (insert(container, rendered), d1(), d2()));\n      const html = container.innerHTML;\n      document.body.removeChild(container);\n      return html;\n    }\n    if (typeof rendered === \"object\" && \"then\" in rendered) {\n      const timeout = new Promise((_, reject) => setTimeout(() => reject(\"renderToString timed out\"), options.timeoutMs));\n      return Promise.race([rendered, timeout]).then(resolve);\n    }\n    return resolve(rendered);\n  });\n}\nfunction ssr(t, ...nodes) {\n  if (!nodes.length) return {\n    t\n  };\n  for (let i = 0; i < nodes.length; i++) {\n    const n = nodes[i];\n    if (typeof n === \"function\") nodes[i] = memo(() => resolveSSRNode(n()));\n  }\n  return {\n    t: () => {\n      let result = \"\";\n      for (let i = 0; i < t.length; i++) {\n        result += t[i];\n        const node = nodes[i];\n        if (node !== undefined) result += resolveSSRNode(node);\n      }\n      return result;\n    }\n  };\n}\nfunction resolveSSRNode(node) {\n  if (Array.isArray(node)) return node.map(resolveSSRNode).join(\"\");\n  const t = typeof node;\n  if (node && t === \"object\") return resolveSSRNode(node.t);\n  if (t === \"function\") return resolveSSRNode(node());\n  return t === \"string\" ? node : JSON.stringify(node);\n}\n\nfunction Portal(props) {\n  if (globalThis._$HYDRATION && globalThis._$HYDRATION.asyncSSR) return;\n  const {\n    useShadow\n  } = props,\n        marker = document.createTextNode(\"\"),\n        mount = props.mount || document.body;\n  if (mount instanceof HTMLHeadElement) {\n    insert(mount, () => props.children, null);\n  } else {\n    const container = document.createElement(\"div\"),\n          renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n      mode: \"open\"\n    }) : container;\n    Object.defineProperty(container, \"host\", {\n      get() {\n        return marker.parentNode;\n      }\n    });\n    insert(renderRoot, () => props.children);\n    mount.appendChild(container);\n    props.ref && props.ref(container);\n    onCleanup(() => mount.removeChild(container));\n  }\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  return createMemo(() => {\n    const comp = p.component,\n          t = typeof comp;\n    if (comp) {\n      if (t === \"function\") return untrack(() => comp(others));else if (t === \"string\") {\n        const el = document.createElement(comp);\n        spread(el, others);\n        return el;\n      }\n    }\n  });\n}\n\nexport { Dynamic, Portal, assign, classList, clearDelegatedEvents, delegateEvents, dynamicProperty, escape, generateHydrationScript, getHydrationKey, getNextElement, getNextMarker, hydrate, insert, memo, render, renderDOMToString, renderToString, runHydrationEvents, setAttribute, setAttributeNS, spread, ssr, ssrClassList, ssrSpread, ssrStyle, style, template };\n","import { createContext, useContext, createMemo } from 'solid-js';\nimport { RouterContextValue } from './types';\nimport { State as RouteState } from 'router5';\nimport { RouteLike } from 'components/Link';\n\nconst Context = createContext<RouterContextValue>();\n\nexport default Context;\n\nexport function useRoute(): () => RouteState {\n  return useContext(Context).getRoute;\n}\n\nexport function useRouteName(): () => readonly string[] {\n  return useContext(Context).getRouteName;\n}\n\nexport function useRouteNameRaw(): () => string {\n  return useContext(Context).getRouteNameRaw;\n}\n\nfunction shallowStringyEq<\n  A extends Record<string, any>,\n  B extends Record<string, any>\n>(a: A, b: B): boolean {\n  if (a === b) return true;\n  const keys = Object.keys(a);\n  for (const key of keys) if (!(key in b)) return false;\n  for (const key of keys) if (String(a[key]) !== String(b[key])) return false;\n  return keys.length === Object.keys(b).length;\n}\n\nexport function useIsActive<Link extends RouteLike>(\n  link: Link,\n  params?: Record<string, any>,\n  isEqual: <A extends Record<string, any>, B extends Record<string, any>>(a: A, b: B) => boolean = shallowStringyEq,\n): () => boolean {\n  const getRouteName = useRouteName();\n  const getIsActiveByName = createMemo(() => isActive(getRouteName(), link));\n  if (params === undefined) return getIsActiveByName;\n  const getRoute = useRoute();\n  const getRouteParams = createMemo(() => getRoute().params);\n  return createMemo(() => {\n    const routeParams = getRouteParams();\n    return getIsActiveByName() && isEqual(routeParams, params);\n  });\n}\n\n/**\n * Find whether 'link' is an ancestor of, or equal to, 'here'\n *\n * Maybe useful for creating your own `Link` component.\n */\nexport function isActive<Link extends RouteLike>(here: readonly string[], link: Link) {\n  if (here.length === 0) { return false; }\n  if (typeof link === 'string') { return here[0] === link; }\n  // if link has more segments than here then it definitely cannot be an\n  // ancestor of here\n  if (link.length > here.length) return false;\n  for (let i = 0; i < link.length; i ++) {\n    if (link[i] !== here[i]) return false;\n  }\n  return true;\n}\n","import { SharedRouterValue, RoutesLike } from \"../types\";\nimport { useIsActive } from \"../context\";\nimport { createMemo, splitProps } from \"solid-js\";\n\nexport enum LinkNav {\n  Back = \"back\",\n  Forward = \"forward\",\n}\n\n/** Props for making a `Link` component.\n *\n * @remarks\n *\n * Only some of the props are reactive; the rest are static at the time of\n * creating the link. The reactive props available are:\n *\n * - `to`\n * - `params`\n * - `disabled`\n * - `onClick`\n * - `innerProps`\n * - `disabledProps`\n */\nexport type LinkProps<Route> = {\n  disabled?: boolean;\n  nav?: boolean;\n  navIgnoreParams?: boolean;\n  onClick?: (\n    ev: MouseEvent & {\n      target: HTMLAnchorElement;\n      currentTarget: HTMLAnchorElement;\n    }\n  ) => void;\n} & (\n  | {\n      type: LinkNav.Back | LinkNav.Forward;\n      to?: undefined;\n      params?: undefined;\n    }\n  | {\n      type?: undefined;\n      to: Route;\n      params?: Record<string, any>;\n    }\n) &\n  Omit<JSX.IntrinsicElements[\"a\" | \"button\"], \"onClick\" | \"href\" | \"type\">;\n\nexport interface LinkConfig {\n  navActiveClassName: string;\n}\n\nexport type RouteLike = string | string[];\n\nexport function renderRouteLike(route: RouteLike) {\n  if (typeof route === \"string\") return route;\n  return route.join(\".\");\n}\n\nexport const defaultLinkConfig: LinkConfig = {\n  navActiveClassName: \"is-active\",\n};\n\nexport default function createLink<\n  Deps,\n  Routes extends RoutesLike<Deps>,\n  RouteName extends RouteNameOf<Routes> & RouteLike\n>(\n  self: SharedRouterValue<Deps, Routes>,\n  config: Partial<LinkConfig> = defaultLinkConfig\n): (props: LinkProps<RouteName>) => JSX.Element {\n  const { router5 } = self;\n\n  const { navActiveClassName = defaultLinkConfig.navActiveClassName } = config;\n\n  return (props: LinkProps<RouteName>): JSX.Element => {\n    const [linkProps, innerProps] = splitProps(props, [\n      \"type\",\n      \"onClick\",\n      \"classList\",\n      \"to\",\n      \"params\",\n      \"nav\",\n      \"navIgnoreParams\",\n      \"disabled\",\n    ]);\n\n    const isActive =\n      linkProps.to !== undefined\n        ? useIsActive(\n            linkProps.to,\n            linkProps.navIgnoreParams ? undefined : linkProps.params\n          )\n        : alwaysInactive;\n\n    const getClassList = createMemo(() => {\n      const classList = linkProps.classList ?? {};\n      if (linkProps.type === undefined && linkProps.nav) {\n        classList[navActiveClassName] = isActive();\n        return classList;\n      }\n      return classList;\n    });\n\n    const getHref: () => string | undefined = createMemo(() => {\n      if (linkProps.type === undefined) {\n        try {\n          return router5.buildPath(\n            renderRouteLike(linkProps.to as RouteName),\n            linkProps.params\n          );\n        } catch (err) {\n          console.warn(\"<Link> buildPath failed:\", err);\n        }\n      }\n      return undefined;\n    });\n\n    return () =>\n      linkProps.disabled ? (\n        <button\n          {...(innerProps as JSX.IntrinsicElements[\"button\"])}\n          disabled\n          classList={getClassList()}\n        />\n      ) : (\n        <a\n          {...(innerProps as JSX.IntrinsicElements[\"a\"])}\n          classList={getClassList()}\n          href={getHref()}\n          onClick={(ev) => {\n            ev.preventDefault();\n            switch (props.type) {\n              case undefined:\n                router5.navigate(\n                  renderRouteLike(linkProps.to as RouteLike),\n                  linkProps.params ?? {}\n                );\n                if (typeof linkProps.onClick === \"function\")\n                  linkProps.onClick(ev);\n                break;\n              case LinkNav.Back:\n                window.history.back();\n                break;\n              case LinkNav.Back:\n                window.history.back();\n                break;\n            }\n            ev.target.blur();\n          }}\n        />\n      );\n  };\n}\n\nconst alwaysInactive = () => false;\n\nexport type FlattenRouteName<A> = A extends [infer X]\n  ? X\n  : A extends [infer X, ...infer XS]\n  ? X extends string\n    ? XS extends string[]\n      ? `${X}.${FlattenRouteName<XS>}`\n      : never\n    : never\n  : A extends string\n  ? A\n  : \"\";\n\nexport type RouteNameOf<A> = FlattenRouteName<RouteArrayOf<A>>;\n\nexport type ToRouteArray<A> = A extends string\n  ? A extends `${infer X}.${infer XS}`\n    ? [X, ...ToRouteArray<XS>]\n    : [A]\n  : [];\n\nexport type RouteArrayOf<A> = A extends readonly (infer U)[]\n  ? U extends { name: infer Name; children: infer Children }\n    ? Children extends {}\n      ? ToRouteArray<Name> | [...ToRouteArray<Name>, ...RouteArrayOf<Children>]\n      : ToRouteArray<Name>\n    : U extends { name: infer Name }\n    ? ToRouteArray<Name>\n    : []\n  : [];\n\nexport type UnOne<A> = A extends [infer U] ? U : A;\n","import { createContext, useContext, Match, Show, createMemo } from \"solid-js\";\nimport { useRouteNameRaw } from \"../context\";\n\nconst MatchContext = createContext<string>(\"\");\n\nexport type MatchRouteProps = PathProps & { children: JSX.Element };\n\nexport interface ExactPathProps {\n  path: string;\n  prefix?: undefined;\n}\n\nexport interface PrefixPathProps {\n  prefix: string;\n  path?: undefined;\n}\n\n/**\n * ```ts\n * type PathProps = { path: string } | { prefix: string };\n * ```\n *\n * If [[ExactPathProps.path]] is given, then the match is exact, which means\n * that the current route name must be equal to `context.path + path` where\n * `context.path` means the current path created by other match components above\n * this one.\n *\n * If [[PrefixPathProps.prefix]] is given, then the match only requires that the\n * current route start with `context.path + prefix`.\n *\n */\nexport type PathProps = ExactPathProps | PrefixPathProps;\n\nfunction doesMatch(\n  ctx: string,\n  here: string,\n  props: PathProps\n): [string, boolean] {\n  const suffix = props.path !== undefined ? props.path : props.prefix;\n  const exact = props.path !== undefined;\n  const target = ctx !== \"\" ? `${ctx}.${suffix}` : suffix;\n  return [target, exact ? here === target : here.startsWith(target)];\n}\n\n/**\n * Not reactive on the routes being used\n *\n * Prefer this over [[Switch]] + [[MatchRoute]]\n */\nexport function SwitchRoutes(props: {\n  children: MatchRouteProps[];\n  fallback?: JSX.Element;\n}): JSX.Element {\n  const ctx = useContext(MatchContext);\n  const route = useRouteNameRaw();\n  const getIndex = createMemo<undefined | [number, string]>(\n    () => {\n      const here = route();\n      const children = props.children;\n      for (let i = 0; i < children.length; i++) {\n        const [target, when] = doesMatch(ctx, here, children[i]);\n        if (when) return [i, target];\n      }\n      return undefined;\n    },\n    undefined,\n    (a, b) => {\n      const same =\n        a === b || (a !== undefined && b !== undefined && a[0] === b[0]);\n      return same;\n    }\n  );\n  return createMemo(() => {\n    const ix = getIndex();\n    if (ix !== undefined) {\n      const [i, target] = ix;\n      return (\n        <MatchContext.Provider value={target}>\n          {props.children[i].children}\n        </MatchContext.Provider>\n      );\n    }\n    return props.fallback;\n  });\n}\n\nexport type ShowRouteProps = MatchRouteProps & { fallback?: JSX.Element };\n\n/**\n * Create a [[Show]] node against a given route.\n */\nexport function ShowRoute(props: ShowRouteProps): JSX.Element {\n  const getMatch = createGetMatch(props);\n  return () => {\n    const [target, when] = getMatch();\n    return (\n      <Show when={when} fallback={props.fallback}>\n        <MatchContext.Provider value={target}>\n          {props.children}\n        </MatchContext.Provider>\n      </Show>\n    );\n  };\n}\n\n/**\n * Create a [[Match]] node against a given route.\n */\nexport function MatchRoute(props: MatchRouteProps): JSX.Element {\n  const getMatch = createGetMatch(props);\n  return (\n    <Match when={getMatch()[1]}>\n      <MatchContext.Provider value={getMatch()[0]}>\n        {props.children}\n      </MatchContext.Provider>\n    </Match>\n  );\n}\n\nfunction createGetMatch(props: PathProps): () => [string, boolean] {\n  const route = useRouteNameRaw();\n  const ctx = useContext(MatchContext);\n  return createMemo<[string, boolean]>(\n    () => doesMatch(ctx, route(), props),\n    undefined,\n    (a, b) => a && a[1] === b[1]\n  );\n}\n","import { UnionToIntersection } from \"ts-essentials\";\nimport {\n  createComponent,\n  createComputed,\n  createMemo,\n  createState,\n  untrack,\n} from \"solid-js\";\nimport { useRouteName } from \"../context\";\nimport { MatchRouteProps, SwitchRoutes } from \"./MatchRoute\";\nimport { RouteLike, ToRouteArray } from \"./Link\";\n\n/**\n * Given a tree of routes and render instructions for each route, return an\n * element that selects the correct renderer for the current route.\n *\n * Also supports using routes to choose how to provide props to a single\n * renderer.\n */\nexport default function RouteStateMachine<\n  T extends RenderTreeLike,\n  A extends RouteLike\n>(tree: T, _assumed?: A): JSX.Element {\n  const getRouteName = useRouteName();\n\n  function traverseHydrate<Props>(\n    path0: string[],\n    node0: GetPropsLike<Props>,\n    Render: (props: Props) => JSX.Element,\n    defaultProps: undefined | Props\n  ): JSX.Element {\n    const noProps = defaultProps ?? ({} as Props);\n    const [state, setState] = createState(noProps);\n\n    const getPathSuffix = createMemo<string[]>(\n      () => getRouteName().slice(path0.length),\n      [],\n      (a, b) => {\n        if (a === b) return true;\n        if (a.length !== b.length) return false;\n        for (let i = 0; i < a.length; i++) {\n          const x = a[i];\n          const y = b[i];\n          if (x !== y) return false;\n        }\n        return true;\n      }\n    );\n\n    function populate(\n      path: string[],\n      node: GetPropsLike<Props>,\n      next: Partial<Props>,\n      counter: { updated: number }\n    ) {\n      for (const key in node) {\n        const gp = (node as GetProps<Props>)[key as keyof Props];\n        if (typeof gp === \"function\") {\n          const value = gp();\n          if (value === (state as Props)[key as keyof Props]) continue;\n          next[key as keyof Props] = value;\n          counter.updated++;\n          continue;\n        }\n        if (gp !== undefined) {\n          if (path[0] === key) {\n            populate(path.slice(1), gp as any, next, counter);\n          }\n        }\n      }\n    }\n\n    createComputed(() => {\n      const suffix = getPathSuffix();\n      untrack(() => {\n        const next: Partial<Props> = { ...(state as Props) };\n        const counter = { updated: 0 };\n        populate(suffix, node0, next, counter);\n        if (counter.updated > 0) {\n          setState(next);\n        }\n      });\n    });\n\n    return createComponent(Render, state as Props);\n  }\n\n  function traverse(\n    path: string[],\n    node: RenderTreeOf<RouteTreeLike>\n  ): JSX.Element {\n    if (typeof node === \"function\") {\n      return node(function <Props>(owned: OwnedOps<RouteTreeLike, Props>) {\n        const { props, render, defaultProps } = owned;\n        return () => traverseHydrate(path, props, render, defaultProps);\n      });\n    }\n\n    const children: MatchRouteProps[] = [];\n    const { render: RenderHere = passthru, fallback, ...routes } = node;\n    for (const key in routes) {\n      const next = [...path, key];\n      const child = routes[key]!;\n      children.push({\n        prefix: key,\n        children: traverse(next, child),\n      });\n    }\n\n    return () => (\n      <RenderHere>\n        <SwitchRoutes fallback={fallback} children={children} />\n      </RenderHere>\n    );\n  }\n\n  return untrack(() => traverse([], tree as RenderTreeOf<RouteTreeLike>));\n}\n\n/**\n * Tells `solid-typefu-router5` how to render a node if the path leading to\n * it matches the current route name.\n */\nexport interface RenderNode {\n  /** Default: [[passthru]] */\n  render?: (props: { children?: JSX.Element }) => JSX.Element;\n  /** Fallback children to use if none are available to give to [[render]]. Default: nothing */\n  fallback?: JSX.Element;\n}\n\nexport interface OwnedOps<Tree, Props> {\n  /**\n   * @remarks If this has a concrete type for its props then TypeScript will be\n   * able to infer the structure of [[props]].\n   */\n  render: (props: Props) => JSX.Element;\n\n  /**\n   * Default prop values for when no matches are found. Props that are optional\n   * should be typed as such within [[Props]] itself.\n   */\n  defaultProps?: Props;\n\n  /**\n   * A tree of route paths and prop getters. A prop getter is a function of type\n   * `() => PropValue`. The key of the getter determines what prop it gets, and\n   * the type of that prop.\n   *\n   * The tree can go as deep as [[Tree]] will allow for, with each non-function\n   * key corresponding to a path segment in a route.\n   */\n  props: OwnedBy<Tree, Props>;\n}\n\n/** Turn an object into the same object, but all its properties are optional and\n * made into functions returning their value */\nexport type GetProps<Props> = { [K in keyof Props]?: () => Props[K] };\n\n/** Existential wrapper around [[OwnedOps]] that hides the inner [[Tree]] and\n * [[Props]] types */\nexport type Owned<Tree> = <R>(\n  cont: <Props>(self: OwnedOps<Tree, Props>) => R\n) => R;\n\n/**\n * Helper function. Use this as a [[render]] function to just render the\n * children only.\n */\nexport function passthru<T>(props: { children: T }): T {\n  return props.children;\n}\n\n/** A tree of route path segments. Has the same structure as a\n * [[RenderTreeLike]], but the spine of the tree is fixed to use the given\n * [[Tree]] */\nexport type RenderTreeOf<Tree> =\n  | Owned<Tree>\n  | (RenderNode &\n      UnionToIntersection<\n        Tree extends readonly (infer Node)[]\n          ? Node extends { name: infer Name; children?: infer Children }\n            ? Name extends string | number | symbol\n              ? Children extends {}\n                ? { [K in Name]?: RenderTreeOf<Children> }\n                : { [K in Name]?: Owned<Children> | RenderNode }\n              : never\n            : never\n          : never\n      >);\n\nexport type OwnedBy<Tree, Props> = GetPropsWith<\n  GetProps<Props>,\n  UnionToIntersection<\n    Tree extends readonly (infer Node)[]\n      ? Node extends { name: infer Name; children?: infer Children }\n        ? Name extends string | number | symbol\n          ? Children extends {}\n            ? {\n                [K in Name]?: GetPropsWith<\n                  GetProps<Props>,\n                  OwnedBy<Children, Props>\n                >;\n              }\n            : { [K in Name]?: GetProps<Props> }\n          : never\n        : never\n      : never\n  >\n>;\n\n/**\n * Allows for conflicts between prop names and route names. At runtime what is a\n * prop or not is simply determined by whether it's a function or not.\n */\nexport type GetPropsWith<Props, Tree> = {\n  [K in keyof Props & keyof Tree]: Tree[K] | Props[K];\n} &\n  Omit<{ [K in keyof Props]: Props[K] }, keyof Tree> &\n  Omit<{ [K in keyof Tree]: Tree[K] }, keyof Props>;\n\n// monomorphic (in tree spine) helper types\n\nexport type GetPropsLike<Props> = {\n  [k: string]: GetPropsLike<Props>;\n} & GetProps<Props>;\nexport type RouteNodeLike = { name: string; children?: RouteTreeLike };\nexport type RouteTreeLike = RouteNodeLike[];\nexport type RenderTreeLike =\n  | OwnedLike\n  | (RenderNode & { [k: string]: RenderTreeLike });\nexport type OwnedLike = <R>(cont: <Props>(self: OwnedOpsLike<Props>) => R) => R;\nexport interface OwnedOpsLike<Props> {\n  render: (props: Props) => JSX.Element;\n  defaultProps?: Props;\n  props: GetPropsLike<Props>;\n}\n\nexport type DescendDef<Path, Tree> = Path extends [infer P1, ...infer PS]\n  ? Tree extends readonly (infer Node)[]\n    ? Node extends { name: infer Name; children?: infer Children }\n      ? Name extends P1\n        ? Defer<DescendDef<PS, Children>>\n        : never\n      : never\n    : never\n  : Tree;\n\ntype One<T> = T extends any[] ? T : [T];\nexport type Descend<P, T> = Undefer<DescendDef<One<ToRouteArray<P>>, T>>;\n\n// Same trick as in https://github.com/microsoft/TypeScript/pull/21613\ninterface Defer<X> {\n  ____defer: Undefer<X>;\n}\ntype Undefer<X> = X extends { ____defer: infer U } ? U : X;\n","import createSolidRouter, { useRoute } from \"solid-typefu-router5\";\nimport browserPluginFactory from \"router5-plugin-browser\";\nimport { render } from \"solid-js/dom\";\nimport createRouter from \"router5\";\nimport { createMemo, For } from \"solid-js\";\n\nconst routes = [\n  {\n    name: \"foo\",\n    path: \"/foo\",\n    children: [\n      {\n        name: \"child1\",\n        path: \"/child1/:id1\",\n        children: [{ name: \"child2\", path: \"/child2/:id2\" }],\n      },\n    ],\n  },\n  {\n    name: \"bar\",\n    path: \"/bar/:id\",\n  },\n  {\n    name: \"baz\",\n    path: \"/baz/:id\",\n  },\n  { name: \"bar.asdf\", path: \"/bar/asdf\" },\n] as const;\n\nconst { Link, Router, Provider: RouterProvider } = createSolidRouter(routes, {\n  createRouter5: (routes) => {\n    const router = createRouter(routes, { allowNotFound: true });\n    router.usePlugin(browserPluginFactory({ useHash: false }));\n    return router;\n  },\n});\n\nconst Wrapper = (props: { children?: JSX.Element }) => (\n  <>\n    <div style={{ background: \"lightgrey\", padding: \"0.5rem\" }}>\n      <h3>Navbar</h3>\n      <ul>\n        <li>\n          <Link nav to=\"foo\">\n            foo\n          </Link>\n        </li>\n        <li>\n          <Link nav to=\"bar\" params={{ id: 1 }}>\n            bar1\n          </Link>\n        </li>\n        <li>\n          <Link nav to=\"bar\" params={{ id: 2 }}>\n            bar2\n          </Link>\n        </li>\n        <li>\n          <Link nav to=\"baz\" params={{ id: \"asdfasdf\" }}>\n            baz asdfasdf\n          </Link>\n        </li>\n      </ul>\n    </div>\n    <div style={{ height: \"1rem\" }} />\n    <div style={{ display: \"flex\", \"flex-direction\": \"row\" }}>\n      <div\n        style={{ background: \"lightblue\", \"flex-grow\": 1, padding: \"0.5rem\" }}\n      >\n        {props.children}\n      </div>\n      <div style={{ width: \"1rem\" }} />\n      <div\n        style={{ width: \"20em\", background: \"lightpink\", padding: \"0.5rem\" }}\n      >\n        <code>\n          <pre>{JSON.stringify(useRoute()(), null, 2)}</pre>\n        </code>\n      </div>\n    </div>\n  </>\n);\n\nconst Foo = (props: { children?: JSX.Element }) => (\n  <div>\n    <h1>foo</h1>\n    <Link nav to=\"foo.child1\" params={{ id1: 1 }}>\n      foo.child1\n    </Link>\n    {props.children}\n  </div>\n);\n\nconst Child2List = () => {\n  const route = useRoute();\n  // in reality usePromise(() => api.foo.child1.getChild2s(route().params.id))\n  const availId2s = createMemo<number[]>(() => {\n    const here = route();\n    if (typeof here.params.id1 !== \"number\") {\n      console.warn(\"id1 was undefined\");\n    }\n    return [1, 2, 3];\n  });\n  return (\n    <>\n      <h3>List of foo.child1.child2 links</h3>\n      <ul>\n        <For each={availId2s()}>\n          {(id2) => (\n            <li>\n              <Link\n                to=\"foo.child1.child2\"\n                params={{ id1: route().params.id1, id2 }}\n              >\n                foo.child1.child2\n              </Link>\n            </li>\n          )}\n        </For>\n      </ul>\n    </>\n  );\n};\n\nfunction Baz(props: { id: string }) {\n  return <code>id = {props.id}</code>;\n}\n\nconst App = () => {\n  const route = useRoute();\n  return (\n    <>\n      <Router assume=\"foo\">\n        {{\n          render: (p) => <>child1 {p.children}</>,\n          fallback: () => \"... no foo.child1!\",\n          child1: { render: () => \"child1\" },\n        }}\n      </Router>\n      <Router>\n        {{\n          render: Wrapper,\n          bar: {\n            render: () => \"bar goes here\",\n            asdf: { render: () => \"bar.asdf!\" },\n          },\n          baz: (owned) =>\n            owned({\n              render: Baz,\n              props: {\n                id: () => route().params.id,\n              },\n            }),\n          foo: {\n            render: Foo,\n            child1: {\n              render: (p) => <div>{p.children}</div>,\n              fallback: Child2List,\n              child2: {\n                render: () => (\n                  <>\n                    <h3>foo.child1.child2</h3>\n                    hello world!\n                  </>\n                ),\n              },\n            },\n          },\n        }}\n      </Router>\n    </>\n  );\n};\n\nrender(\n  () => (\n    <>\n      <style>\n        {`\n        html, body { font-family: 'Sedgwick Ave' }\n        .is-active { border: 2px solid red; box-shadow: 0 0 30px blue }\n        `}\n      </style>\n      <RouterProvider>\n        <App />\n      </RouterProvider>\n    </>\n  ),\n  document.getElementById(\"app\") as any\n);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export type arrayFormat = 'none' | 'brackets' | 'index'\nexport type booleanFormat = 'none' | 'string' | 'unicode' | 'empty-true'\nexport type nullFormat = 'default' | 'string' | 'hidden'\n\nexport interface IOptions {\n  arrayFormat?: arrayFormat\n  booleanFormat?: booleanFormat\n  nullFormat?: nullFormat\n}\n\nexport interface IFinalOptions {\n  arrayFormat: arrayFormat\n  booleanFormat: booleanFormat\n  nullFormat: nullFormat\n}\n\nexport const makeOptions = (opts: IOptions = {}): IFinalOptions => ({\n  arrayFormat: opts.arrayFormat || 'none',\n  booleanFormat: opts.booleanFormat || 'none',\n  nullFormat: opts.nullFormat || 'default'\n})\n\nconst encodeValue = (value: any): string => encodeURIComponent(value)\n\nconst decodeValue = (value: string): string => decodeURIComponent(value)\n\nconst encodeBoolean = (\n  name: string,\n  value: boolean,\n  opts: IFinalOptions\n): string => {\n  if (opts.booleanFormat === 'empty-true' && value) {\n    return name\n  }\n\n  let encodedValue\n\n  if (opts.booleanFormat === 'unicode') {\n    encodedValue = value ? '' : ''\n  } else {\n    encodedValue = value.toString()\n  }\n\n  return `${name}=${encodedValue}`\n}\n\nconst encodeNull = (name: string, opts: IFinalOptions): string => {\n  if (opts.nullFormat === 'hidden') {\n    return ''\n  }\n\n  if (opts.nullFormat === 'string') {\n    return `${name}=null`\n  }\n\n  return name\n}\n\ntype nameEncoder = (val: string, index: number) => string\n\nconst getNameEncoder = (opts: IFinalOptions): nameEncoder => {\n  if (opts.arrayFormat === 'index') {\n    return (name: string, index: number): string => `${name}[${index}]`\n  }\n\n  if (opts.arrayFormat === 'brackets') {\n    return (name: string): string => `${name}[]`\n  }\n\n  return (name: string): string => name\n}\n\nexport const encodeArray = (\n  name: string,\n  arr: any[],\n  opts: IFinalOptions\n): string => {\n  const encodeName = getNameEncoder(opts)\n\n  return arr\n    .map((val, index) => `${encodeName(name, index)}=${encodeValue(val)}`)\n    .join('&')\n}\n\nexport const encode = (\n  name: string,\n  value: any,\n  opts: IFinalOptions\n): string => {\n  if (value === null) {\n    return encodeNull(name, opts)\n  }\n\n  if (typeof value === 'boolean') {\n    return encodeBoolean(name, value, opts)\n  }\n\n  if (Array.isArray(value)) {\n    return encodeArray(name, value, opts)\n  }\n\n  return `${name}=${encodeValue(value)}`\n}\n\nexport const decode = (\n  value: any,\n  opts: IFinalOptions\n): boolean | string | null => {\n  if (value === undefined) {\n    return opts.booleanFormat === 'empty-true' ? true : null\n  }\n\n  if (opts.booleanFormat === 'string') {\n    if (value === 'true') {\n      return true\n    }\n    if (value === 'false') {\n      return false\n    }\n  }\n\n  if (opts.booleanFormat === 'unicode') {\n    if (decodeValue(value) === '') {\n      return true\n    }\n    if (decodeValue(value) === '') {\n      return false\n    }\n  }\n\n  if (opts.nullFormat === 'string') {\n    if (value === 'null') {\n      return null\n    }\n  }\n\n  return decodeValue(value)\n}\n","export const getSearch = (path: string): string => {\n  const pos = path.indexOf('?')\n\n  if (pos === -1) {\n    return path\n  }\n\n  return path.slice(pos + 1)\n}\n\nexport const isSerialisable = (val: any): boolean => val !== undefined\n\nexport interface IParsedName {\n  hasBrackets: boolean\n  name: string\n}\n\nexport const parseName = (name: string): IParsedName => {\n  const bracketPosition = name.indexOf('[')\n  const hasBrackets = bracketPosition !== -1\n\n  return {\n    hasBrackets,\n    name: hasBrackets ? name.slice(0, bracketPosition) : name\n  }\n}\n","import { decode, encode, IOptions, makeOptions } from './encode'\nimport { getSearch, isSerialisable, parseName } from './utils'\n\nexport { IOptions }\n\nexport type SearchParams = Record<\n  string,\n  string | boolean | null | Array<string | boolean | null> | undefined\n>\n\n/**\n * Parse a querystring and return an object of parameters\n */\nexport const parse = <T extends Record<string, any> = SearchParams>(\n  path: string,\n  opts?: IOptions\n): T => {\n  const options = makeOptions(opts)\n\n  return getSearch(path)\n    .split('&')\n    .reduce<Record<string, any>>((params, param) => {\n      const [rawName, value] = param.split('=')\n      const { hasBrackets, name } = parseName(rawName)\n      const currentValue = params[name]\n      const decodedValue = decode(value, options)\n\n      if (currentValue === undefined) {\n        params[name] = hasBrackets ? [decodedValue] : decodedValue\n      } else {\n        params[name] = (Array.isArray(currentValue)\n          ? currentValue\n          : [currentValue]\n        ).concat(decodedValue)\n      }\n\n      return params\n    }, {}) as T\n}\n\n/**\n * Build a querystring from an object of parameters\n */\nexport const build = <T extends Record<string, any> = SearchParams>(\n  params: T,\n  opts?: IOptions\n): string => {\n  const options = makeOptions(opts)\n\n  return Object.keys(params)\n    .filter(paramName => isSerialisable(params[paramName]))\n    .map(paramName => encode(paramName, params[paramName], options))\n    .filter(Boolean)\n    .join('&')\n}\n\nexport interface IOmitResponse {\n  querystring: string\n  removedParams: object\n}\n\n/**\n * Remove a list of parameters from a querystring\n */\nexport const omit = (\n  path: string,\n  paramsToOmit: string[],\n  opts?: IOptions\n): IOmitResponse => {\n  const options = makeOptions(opts)\n  const searchPart = getSearch(path)\n  if (searchPart === '') {\n    return {\n      querystring: '',\n      removedParams: {}\n    }\n  }\n\n  const [kept, removed] = path.split('&').reduce<[string[], string[]]>(\n    ([left, right]: [string[], string[]], chunk: string) => {\n      const rawName = chunk.split('=')[0]\n      const { name } = parseName(rawName)\n\n      return paramsToOmit.indexOf(name) === -1\n        ? [left.concat(chunk), right]\n        : [left, right.concat(chunk)]\n    },\n    [[], []]\n  )\n\n  return {\n    querystring: kept.join('&'),\n    removedParams: parse(removed.join('&'), options)\n  }\n}\n\nexport interface IKeepResponse {\n  querystring: string\n  keptParams: object\n}\n\n/**\n * Remove a list of parameters from a querystring\n */\nexport const keep = (\n  path: string,\n  paramsToKeep: string[],\n  opts?: IOptions\n): IKeepResponse => {\n  const options = makeOptions(opts)\n  const searchPart = getSearch(path)\n  if (searchPart === '') {\n    return {\n      keptParams: {},\n      querystring: ''\n    }\n  }\n\n  const kept = path.split('&').reduce<string[]>((acc, chunk: string) => {\n    const rawName = chunk.split('=')[0]\n    const { name } = parseName(rawName)\n\n    if (paramsToKeep.includes(name)) {\n      acc.push(chunk)\n    }\n\n    return acc\n  }, [])\n\n  return {\n    keptParams: parse(kept.join('&'), options),\n    querystring: kept.join('&')\n  }\n}\n","/**\n * We encode using encodeURIComponent but we want to\n * preserver certain characters which are commonly used\n * (sub delimiters and ':')\n * \n * https://www.ietf.org/rfc/rfc3986.txt\n * \n * reserved    = gen-delims / sub-delims\n * \n * gen-delims  = \":\" / \"/\" / \"?\" / \"#\" / \"[\" / \"]\" / \"@\"\n * \n * sub-delims  = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n              / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n */\n\nconst excludeSubDelimiters = /[^!$'()*+,;|:]/g\n\nexport type URLParamsEncodingType =\n  | 'default'\n  | 'uri'\n  | 'uriComponent'\n  | 'none'\n  | 'legacy'\n\nexport const encodeURIComponentExcludingSubDelims = (segment: string): string =>\n  segment.replace(excludeSubDelimiters, match => encodeURIComponent(match))\n\nconst encodingMethods: Record<\n  URLParamsEncodingType,\n  (param: string) => string\n> = {\n  default: encodeURIComponentExcludingSubDelims,\n  uri: encodeURI,\n  uriComponent: encodeURIComponent,\n  none: val => val,\n  legacy: encodeURI\n}\n\nconst decodingMethods: Record<\n  URLParamsEncodingType,\n  (param: string) => string\n> = {\n  default: decodeURIComponent,\n  uri: decodeURI,\n  uriComponent: decodeURIComponent,\n  none: val => val,\n  legacy: decodeURIComponent\n}\n\nexport const encodeParam = (\n  param: string | number | boolean,\n  encoding: URLParamsEncodingType,\n  isSpatParam: boolean\n): string => {\n  const encoder =\n    encodingMethods[encoding] || encodeURIComponentExcludingSubDelims\n\n  if (isSpatParam) {\n    return String(param)\n      .split('/')\n      .map(encoder)\n      .join('/')\n  }\n\n  return encoder(String(param))\n}\n\nexport const decodeParam = (\n  param: string,\n  encoding: URLParamsEncodingType\n): string => (decodingMethods[encoding] || decodeURIComponent)(param)\n","export const defaultOrConstrained = (match: string): string =>\n  '(' +\n  (match ? match.replace(/(^<|>$)/g, '') : \"[a-zA-Z0-9-_.~%':|=+\\\\*@$]+\") +\n  ')'\n\nexport type RegExpFactory = (match: any) => RegExp\n\nexport interface IRule {\n  /* The name of the rule */\n  name: string\n  /* The regular expression used to find a token in a path definition */\n  pattern: RegExp\n  /* The derived regular expression to match a path */\n  regex?: RegExp | RegExpFactory\n}\n\nconst rules: IRule[] = [\n  {\n    name: 'url-parameter',\n    pattern: /^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\n    regex: (match: RegExpMatchArray) =>\n      new RegExp(defaultOrConstrained(match[2]))\n  },\n  {\n    name: 'url-parameter-splat',\n    pattern: /^\\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,\n    regex: /([^?]*)/\n  },\n  {\n    name: 'url-parameter-matrix',\n    pattern: /^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\n    regex: (match: RegExpMatchArray) =>\n      new RegExp(';' + match[1] + '=' + defaultOrConstrained(match[2]))\n  },\n  {\n    name: 'query-parameter',\n    pattern: /^(?:\\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/\n  },\n  {\n    name: 'delimiter',\n    pattern: /^(\\/|\\?)/,\n    regex: (match: RegExpMatchArray) => new RegExp('\\\\' + match[0])\n  },\n  {\n    name: 'sub-delimiter',\n    pattern: /^(!|&|-|_|\\.|;)/,\n    regex: (match: RegExpMatchArray) => new RegExp(match[0])\n  },\n  {\n    name: 'fragment',\n    pattern: /^([0-9a-zA-Z]+)/,\n    regex: (match: RegExpMatchArray) => new RegExp(match[0])\n  }\n]\n\nexport default rules\n","import rules from './rules'\n\nexport interface Token {\n  type: string\n  match: string\n  val: any\n  otherVal: any\n  regex?: RegExp\n}\n\nconst tokenise = (str: string, tokens: Token[] = []): Token[] => {\n  // Look for a matching rule\n  const matched = rules.some(rule => {\n    const match = str.match(rule.pattern)\n    if (!match) {\n      return false\n    }\n\n    tokens.push({\n      type: rule.name,\n      match: match[0],\n      val: match.slice(1, 2),\n      otherVal: match.slice(2),\n      regex: rule.regex instanceof Function ? rule.regex(match) : rule.regex\n    })\n\n    if (match[0].length < str.length) {\n      tokens = tokenise(str.substr(match[0].length), tokens)\n    }\n    return true\n  })\n\n  // If no rules matched, throw an error (possible malformed path)\n  if (!matched) {\n    throw new Error(`Could not parse path '${str}'`)\n  }\n\n  return tokens\n}\n\nexport default tokenise\n","import {\n  build as buildQueryParams,\n  IOptions,\n  parse as parseQueryParams\n} from 'search-params'\n\nimport { URLParamsEncodingType, decodeParam, encodeParam } from './encoding'\nimport { defaultOrConstrained } from './rules'\nimport tokenise, { Token } from './tokeniser'\n\nexport { URLParamsEncodingType }\n\nconst exists = (val: any) => val !== undefined && val !== null\n\nconst optTrailingSlash = (source: string, strictTrailingSlash: boolean) => {\n  if (strictTrailingSlash) {\n    return source\n  }\n\n  if (source === '\\\\/') {\n    return source\n  }\n\n  return source.replace(/\\\\\\/$/, '') + '(?:\\\\/)?'\n}\n\nconst upToDelimiter = (source: string, delimiter?: boolean) => {\n  if (!delimiter) {\n    return source\n  }\n\n  return /(\\/)$/.test(source) ? source : source + '(\\\\/|\\\\?|\\\\.|;|$)'\n}\n\nconst appendQueryParam = (\n  params: Record<string, any>,\n  param: string,\n  val = ''\n) => {\n  const existingVal = params[param]\n\n  if (existingVal === undefined) {\n    params[param] = val\n  } else {\n    params[param] = Array.isArray(existingVal)\n      ? existingVal.concat(val)\n      : [existingVal, val]\n  }\n\n  return params\n}\n\nexport interface PathOptions {\n  /**\n   * Query parameters buiding and matching options, see\n   * https://github.com/troch/search-params#options\n   */\n  queryParams?: IOptions\n  /**\n   * Specifies the method used to encode URL parameters:\n   *   - `'default': `encodeURIComponent` and `decodeURIComponent`\n   *      are used but some characters to encode and decode URL parameters,\n   *      but some characters are preserved when encoding\n   *      (sub-delimiters: `+`, `:`, `'`, `!`, `,`, `;`, `'*'`).\n   *   - `'uriComponent'`: use `encodeURIComponent` and `decodeURIComponent`\n   *      for encoding and decoding URL parameters.\n   *   - `'uri'`: use `encodeURI` and `decodeURI for encoding amd decoding\n   *      URL parameters.\n   *   - `'none'`: no encoding or decoding is performed\n   *   - `'legacy'`: the approach for version 5.x and below (not recoomended)\n   */\n  urlParamsEncoding?: URLParamsEncodingType\n}\n\nexport interface InternalPathOptions {\n  queryParams?: IOptions\n  urlParamsEncoding: URLParamsEncodingType\n}\n\nconst defaultOptions: InternalPathOptions = {\n  urlParamsEncoding: 'default'\n}\n\nexport interface PathPartialTestOptions extends PathOptions {\n  caseSensitive?: boolean\n  delimited?: boolean\n}\n\nexport interface PathTestOptions extends PathOptions {\n  caseSensitive?: boolean\n  strictTrailingSlash?: boolean\n}\n\nexport interface PathBuildOptions extends PathOptions {\n  ignoreConstraints?: boolean\n  ignoreSearch?: boolean\n}\n\nexport type TestMatch<\n  T extends Record<string, any> = Record<string, any>\n> = T | null\n\nexport class Path<T extends Record<string, any> = Record<string, any>> {\n  public static createPath<T extends Record<string, any> = Record<string, any>>(\n    path: string,\n    options?: PathOptions\n  ) {\n    return new Path<T>(path, options)\n  }\n\n  public path: string\n  public tokens: Token[]\n  public hasUrlParams: boolean\n  public hasSpatParam: boolean\n  public hasMatrixParams: boolean\n  public hasQueryParams: boolean\n  public options: InternalPathOptions\n  public spatParams: string[]\n  public urlParams: string[]\n  public queryParams: string[]\n  public params: string[]\n  public source: string\n\n  constructor(path: string, options?: PathOptions) {\n    if (!path) {\n      throw new Error('Missing path in Path constructor')\n    }\n    this.path = path\n    this.options = {\n      ...defaultOptions,\n      ...options\n    }\n    this.tokens = tokenise(path)\n\n    this.hasUrlParams =\n      this.tokens.filter(t => /^url-parameter/.test(t.type)).length > 0\n    this.hasSpatParam =\n      this.tokens.filter(t => /splat$/.test(t.type)).length > 0\n    this.hasMatrixParams =\n      this.tokens.filter(t => /matrix$/.test(t.type)).length > 0\n    this.hasQueryParams =\n      this.tokens.filter(t => /^query-parameter/.test(t.type)).length > 0\n    // Extract named parameters from tokens\n    this.spatParams = this.getParams('url-parameter-splat')\n    this.urlParams = this.getParams(/^url-parameter/)\n    // Query params\n    this.queryParams = this.getParams('query-parameter')\n    // All params\n    this.params = this.urlParams.concat(this.queryParams)\n    // Check if hasQueryParams\n    // Regular expressions for url part only (full and partial match)\n    this.source = this.tokens\n      .filter(t => t.regex !== undefined)\n      .map(t => t.regex!.source)\n      .join('')\n  }\n\n  public isQueryParam(name: string): boolean {\n    return this.queryParams.indexOf(name) !== -1\n  }\n\n  public isSpatParam(name: string): boolean {\n    return this.spatParams.indexOf(name) !== -1\n  }\n\n  public test(path: string, opts?: PathTestOptions): TestMatch<T> {\n    const options = {\n      caseSensitive: false,\n      strictTrailingSlash: false,\n      ...this.options,\n      ...opts\n    } as const\n    // trailingSlash: falsy => non optional, truthy => optional\n    const source = optTrailingSlash(this.source, options.strictTrailingSlash)\n    // Check if exact match\n    const match = this.urlTest(\n      path,\n      source + (this.hasQueryParams ? '(\\\\?.*$|$)' : '$'),\n      options.caseSensitive,\n      options.urlParamsEncoding\n    )\n    // If no match, or no query params, no need to go further\n    if (!match || !this.hasQueryParams) {\n      return match\n    }\n    // Extract query params\n    const queryParams = parseQueryParams(path, options.queryParams)\n    const unexpectedQueryParams = Object.keys(queryParams).filter(\n      p => !this.isQueryParam(p)\n    )\n\n    if (unexpectedQueryParams.length === 0) {\n      // Extend url match\n      Object.keys(queryParams).forEach(\n        // @ts-ignore\n        p => (match[p] = (queryParams as any)[p])\n      )\n\n      return match\n    }\n\n    return null\n  }\n\n  public partialTest(\n    path: string,\n    opts?: PathPartialTestOptions\n  ): TestMatch<T> {\n    const options = {\n      caseSensitive: false,\n      delimited: true,\n      ...this.options,\n      ...opts\n    } as const\n    // Check if partial match (start of given path matches regex)\n    // trailingSlash: falsy => non optional, truthy => optional\n    const source = upToDelimiter(this.source, options.delimited)\n    const match = this.urlTest(\n      path,\n      source,\n      options.caseSensitive,\n      options.urlParamsEncoding\n    )\n\n    if (!match) {\n      return match\n    }\n\n    if (!this.hasQueryParams) {\n      return match\n    }\n\n    const queryParams = parseQueryParams(path, options.queryParams)\n\n    Object.keys(queryParams)\n      .filter(p => this.isQueryParam(p))\n      .forEach(p => appendQueryParam(match, p, (queryParams as any)[p]))\n\n    return match\n  }\n\n  public build(params: T = {} as T, opts?: PathBuildOptions): string {\n    const options = {\n      ignoreConstraints: false,\n      ignoreSearch: false,\n      queryParams: {},\n      ...this.options,\n      ...opts\n    } as const\n    const encodedUrlParams = Object.keys(params)\n      .filter(p => !this.isQueryParam(p))\n      .reduce<Record<string, any>>((acc, key) => {\n        if (!exists(params[key])) {\n          return acc\n        }\n\n        const val = params[key]\n        const isSpatParam = this.isSpatParam(key)\n\n        if (typeof val === 'boolean') {\n          acc[key] = val\n        } else if (Array.isArray(val)) {\n          acc[key] = val.map(v =>\n            encodeParam(v, options.urlParamsEncoding, isSpatParam)\n          )\n        } else {\n          acc[key] = encodeParam(val, options.urlParamsEncoding, isSpatParam)\n        }\n\n        return acc\n      }, {})\n\n    // Check all params are provided (not search parameters which are optional)\n    if (this.urlParams.some(p => !exists(params[p]))) {\n      const missingParameters = this.urlParams.filter(p => !exists(params[p]))\n      throw new Error(\n        \"Cannot build path: '\" +\n          this.path +\n          \"' requires missing parameters { \" +\n          missingParameters.join(', ') +\n          ' }'\n      )\n    }\n\n    // Check constraints\n    if (!options.ignoreConstraints) {\n      const constraintsPassed = this.tokens\n        .filter(t => /^url-parameter/.test(t.type) && !/-splat$/.test(t.type))\n        .every(t =>\n          new RegExp('^' + defaultOrConstrained(t.otherVal[0]) + '$').test(\n            encodedUrlParams[t.val]\n          )\n        )\n\n      if (!constraintsPassed) {\n        throw new Error(\n          `Some parameters of '${this.path}' are of invalid format`\n        )\n      }\n    }\n\n    const base = this.tokens\n      .filter(t => /^query-parameter/.test(t.type) === false)\n      .map(t => {\n        if (t.type === 'url-parameter-matrix') {\n          return `;${t.val}=${encodedUrlParams[t.val[0]]}`\n        }\n\n        return /^url-parameter/.test(t.type)\n          ? encodedUrlParams[t.val[0]]\n          : t.match\n      })\n      .join('')\n\n    if (options.ignoreSearch) {\n      return base\n    }\n\n    const searchParams = this.queryParams\n      .filter(p => Object.keys(params).indexOf(p) !== -1)\n      .reduce<Record<string, any>>((sparams, paramName) => {\n        sparams[paramName] = params[paramName]\n        return sparams\n      }, {})\n    const searchPart = buildQueryParams(searchParams, options.queryParams)\n\n    return searchPart ? base + '?' + searchPart : base\n  }\n\n  private getParams(type: string | RegExp): string[] {\n    const predicate =\n      type instanceof RegExp\n        ? (t: Token) => type.test(t.type)\n        : (t: Token) => t.type === type\n\n    return this.tokens.filter(predicate).map(t => t.val[0])\n  }\n\n  private urlTest(\n    path: string,\n    source: string,\n    caseSensitive: boolean,\n    urlParamsEncoding: URLParamsEncodingType\n  ): TestMatch<T> {\n    const regex = new RegExp('^' + source, caseSensitive ? '' : 'i')\n    const match = path.match(regex)\n    if (!match) {\n      return null\n    } else if (!this.urlParams.length) {\n      return {} as T\n    }\n    // Reduce named params to key-value pairs\n    return match\n      .slice(1, this.urlParams.length + 1)\n      .reduce<Record<string, any>>((params, m, i) => {\n        params[this.urlParams[i]] = decodeParam(m, urlParamsEncoding)\n        return params\n      }, {}) as T\n  }\n}\n\nexport default Path\n","import { build } from 'search-params'\nimport {\n  BuildOptions,\n  MatchResponse,\n  RouteNode,\n  RouteNodeState,\n  RouteNodeStateMeta\n} from './RouteNode'\n\nexport const getMetaFromSegments = (\n  segments: RouteNode[]\n): RouteNodeStateMeta => {\n  let accName = ''\n\n  return segments.reduce<RouteNodeStateMeta>((meta, segment) => {\n    const urlParams =\n      segment.parser?.urlParams.reduce<Record<string, any>>((params, p) => {\n        params[p] = 'url'\n        return params\n      }, {}) ?? {}\n\n    const allParams =\n      segment.parser?.queryParams.reduce<Record<string, any>>((params, p) => {\n        params[p] = 'query'\n        return params\n      }, urlParams) ?? {}\n\n    if (segment.name !== undefined) {\n      accName = accName ? accName + '.' + segment.name : segment.name\n      meta[accName] = allParams\n    }\n    return meta\n  }, {})\n}\n\nexport const buildStateFromMatch = (\n  match: MatchResponse\n): RouteNodeState | null => {\n  if (!match || !match.segments || !match.segments.length) {\n    return null\n  }\n\n  const name = match.segments\n    .map(segment => segment.name)\n    .filter(name => name)\n    .join('.')\n  const params = match.params\n\n  return {\n    name,\n    params,\n    meta: getMetaFromSegments(match.segments)\n  }\n}\n\nexport const buildPathFromSegments = (\n  segments: RouteNode[],\n  params: Record<string, any> = {},\n  options: BuildOptions = {}\n) => {\n  const { queryParamsMode = 'default', trailingSlashMode = 'default' } = options\n  const searchParams: string[] = []\n  const nonSearchParams: string[] = []\n\n  for (const segment of segments) {\n    const { parser } = segment\n\n    if (parser) {\n      searchParams.push(...parser.queryParams)\n      nonSearchParams.push(...parser.urlParams)\n      nonSearchParams.push(...parser.spatParams)\n    }\n  }\n\n  if (queryParamsMode === 'loose') {\n    const extraParams = Object.keys(params).reduce<string[]>(\n      (acc, p) =>\n        searchParams.indexOf(p) === -1 && nonSearchParams.indexOf(p) === -1\n          ? acc.concat(p)\n          : acc,\n      []\n    )\n    searchParams.push(...extraParams)\n  }\n\n  const searchParamsObject = searchParams.reduce<Record<string, any>>(\n    (acc, paramName) => {\n      if (Object.keys(params).indexOf(paramName) !== -1) {\n        acc[paramName] = params[paramName]\n      }\n\n      return acc\n    },\n    {}\n  )\n\n  const searchPart = build(searchParamsObject, options.queryParams)\n\n  const path = segments\n    .reduce<string>((path, segment) => {\n      const segmentPath =\n        segment.parser?.build(params, {\n          ignoreSearch: true,\n          queryParams: options.queryParams,\n          urlParamsEncoding: options.urlParamsEncoding\n        }) ?? ''\n\n      return segment.absolute ? segmentPath : path + segmentPath\n    }, '')\n    // remove repeated slashes\n    .replace(/\\/\\/{1,}/g, '/')\n\n  let finalPath = path\n\n  if (trailingSlashMode === 'always') {\n    finalPath = /\\/$/.test(path) ? path : `${path}/`\n  } else if (trailingSlashMode === 'never' && path !== '/') {\n    finalPath = /\\/$/.test(path) ? path.slice(0, -1) : path\n  }\n\n  return finalPath + (searchPart ? '?' + searchPart : '')\n}\n\nexport const getPathFromSegments = (segments: RouteNode[]): string | null =>\n  segments ? segments.map(segment => segment.path).join('') : null\n","import { omit, parse } from 'search-params'\nimport { MatchOptions, MatchResponse, RouteNode } from './RouteNode'\nimport { TestMatch } from 'path-parser'\n\nconst getPath = (path: string): string => path.split('?')[0]\n\nconst getSearch = (path: string): string => path.split('?')[1] || ''\n\nconst matchChildren = (\n  nodes: RouteNode[],\n  pathSegment: string,\n  currentMatch: MatchResponse,\n  options: MatchOptions = {},\n  consumedBefore?: string\n): MatchResponse | null => {\n  const {\n    queryParamsMode = 'default',\n    strictTrailingSlash = false,\n    strongMatching = true,\n    caseSensitive = false\n  } = options\n  const isRoot = nodes.length === 1 && nodes[0].name === ''\n  // for (child of node.children) {\n  for (const child of nodes) {\n    // Partially match path\n    let match: TestMatch | null = null\n    let remainingPath\n    let segment = pathSegment\n\n    if (consumedBefore === '/' && child.path === '/') {\n      // when we encounter repeating slashes we add the slash\n      // back to the URL to make it de facto pathless\n      segment = '/' + pathSegment\n    }\n\n    if (!child.children.length) {\n      match = child.parser!.test(segment, {\n        caseSensitive,\n        strictTrailingSlash,\n        queryParams: options.queryParams,\n        urlParamsEncoding: options.urlParamsEncoding\n      })\n    }\n\n    if (!match) {\n      match = child.parser!.partialTest(segment, {\n        delimited: strongMatching,\n        caseSensitive,\n        queryParams: options.queryParams,\n        urlParamsEncoding: options.urlParamsEncoding\n      })\n    }\n\n    if (match) {\n      // Remove consumed segment from path\n      let consumedPath = child.parser!.build(match, {\n        ignoreSearch: true,\n        urlParamsEncoding: options.urlParamsEncoding\n      })\n\n      if (!strictTrailingSlash && !child.children.length) {\n        consumedPath = consumedPath.replace(/\\/$/, '')\n      }\n\n      // Can't create a regexp from the path because it might contain a\n      // regexp character.\n      if (segment.toLowerCase().indexOf(consumedPath.toLowerCase()) === 0) {\n        remainingPath = segment.slice(consumedPath.length)\n      } else {\n        remainingPath = segment\n      }\n\n      if (!strictTrailingSlash && !child.children.length) {\n        remainingPath = remainingPath.replace(/^\\/\\?/, '?')\n      }\n\n      const { querystring } = omit(\n        getSearch(segment.replace(consumedPath, '')),\n        child.parser!.queryParams,\n        options.queryParams\n      )\n      remainingPath =\n        getPath(remainingPath) + (querystring ? `?${querystring}` : '')\n      if (\n        !strictTrailingSlash &&\n        !isRoot &&\n        remainingPath === '/' &&\n        !/\\/$/.test(consumedPath)\n      ) {\n        remainingPath = ''\n      }\n\n      currentMatch.segments.push(child)\n      Object.keys(match).forEach(\n        param => (currentMatch.params[param] = match![param])\n      )\n\n      if (!isRoot && !remainingPath.length) {\n        // fully matched\n        return currentMatch\n      }\n      if (\n        !isRoot &&\n        queryParamsMode !== 'strict' &&\n        remainingPath.indexOf('?') === 0\n      ) {\n        // unmatched queryParams in non strict mode\n        const remainingQueryParams = parse(\n          remainingPath.slice(1),\n          options.queryParams\n        ) as any\n\n        Object.keys(remainingQueryParams).forEach(\n          name => (currentMatch.params[name] = remainingQueryParams[name])\n        )\n        return currentMatch\n      }\n      // Continue matching on non absolute children\n      const children = child.getNonAbsoluteChildren()\n      // If no children to match against but unmatched path left\n      if (!children.length) {\n        return null\n      }\n      // Else: remaining path and children\n      return matchChildren(\n        children,\n        remainingPath,\n        currentMatch,\n        options,\n        consumedPath\n      )\n    }\n  }\n\n  return null\n}\n\nexport default matchChildren\n","import { RouteNode } from './RouteNode'\n\nexport default function sortChildren(children: RouteNode[]) {\n  const originalChildren = children.slice(0)\n\n  return children.sort(sortPredicate(originalChildren))\n}\n\nconst sortPredicate = (originalChildren: RouteNode[]) => (\n  left: RouteNode,\n  right: RouteNode\n): number => {\n  const leftPath = left.path\n    .replace(/<.*?>/g, '')\n    .split('?')[0]\n    .replace(/(.+)\\/$/, '$1')\n  const rightPath = right.path\n    .replace(/<.*?>/g, '')\n    .split('?')[0]\n    .replace(/(.+)\\/$/, '$1')\n\n  // '/' last\n  if (leftPath === '/') {\n    return 1\n  }\n  if (rightPath === '/') {\n    return -1\n  }\n  // Spat params last\n  if (left.parser?.hasSpatParam) {\n    return 1\n  }\n  if (right.parser?.hasSpatParam) {\n    return -1\n  }\n  // No spat, number of segments (less segments last)\n  const leftSegments = (leftPath.match(/\\//g) || []).length\n  const rightSegments = (rightPath.match(/\\//g) || []).length\n  if (leftSegments < rightSegments) {\n    return 1\n  }\n  if (leftSegments > rightSegments) {\n    return -1\n  }\n  // Same number of segments, number of URL params ascending\n  const leftParamsCount = left.parser?.urlParams.length ?? 0\n  const rightParamsCount = right.parser?.urlParams.length ?? 0\n  if (leftParamsCount < rightParamsCount) {\n    return -1\n  }\n  if (leftParamsCount > rightParamsCount) {\n    return 1\n  }\n  // Same number of segments and params, last segment length descending\n  const leftParamLength = (leftPath.split('/').slice(-1)[0] || '').length\n  const rightParamLength = (rightPath.split('/').slice(-1)[0] || '').length\n  if (leftParamLength < rightParamLength) {\n    return 1\n  }\n  if (leftParamLength > rightParamLength) {\n    return -1\n  }\n  // Same last segment length, preserve definition order. Note that we\n  // cannot just return 0, as sort is not guaranteed to be a stable sort.\n  return originalChildren.indexOf(left) - originalChildren.indexOf(right)\n}\n","import { Path, URLParamsEncodingType } from 'path-parser'\nimport { IOptions as QueryParamsOptions } from 'search-params'\n\nimport {\n  buildPathFromSegments,\n  buildStateFromMatch,\n  getMetaFromSegments,\n  getPathFromSegments\n} from './helpers'\nimport matchChildren from './matchChildren'\nimport sortChildren from './sortChildren'\n\nexport interface RouteDefinition {\n  name: string\n  path: string\n  [key: string]: any\n}\nexport type Route = RouteNode | RouteDefinition\nexport type Callback = (...args: any[]) => void\nexport type TrailingSlashMode = 'default' | 'never' | 'always'\nexport type QueryParamsMode = 'default' | 'strict' | 'loose'\n\nexport interface BuildOptions {\n  trailingSlashMode?: TrailingSlashMode\n  queryParamsMode?: QueryParamsMode\n  queryParams?: QueryParamsOptions\n  urlParamsEncoding?: URLParamsEncodingType\n}\n\nexport interface MatchOptions {\n  caseSensitive?: boolean\n  trailingSlashMode?: TrailingSlashMode\n  queryParamsMode?: QueryParamsMode\n  queryParams?: QueryParamsOptions\n  strictTrailingSlash?: boolean\n  strongMatching?: boolean\n  urlParamsEncoding?: URLParamsEncodingType\n}\n\nexport { QueryParamsOptions }\n\nexport interface MatchResponse {\n  segments: RouteNode[]\n  params: Record<string, any>\n}\n\nexport interface RouteNodeStateMeta {\n  [routeName: string]: {\n    [routeParams: string]: 'query' | 'url'\n  }\n}\n\nexport interface RouteNodeState {\n  name: string\n  params: Record<string, any>\n  meta: RouteNodeStateMeta\n}\n\nexport interface RouteNodeOptions {\n  finalSort?: boolean\n  onAdd?: Callback\n  parent?: RouteNode\n  sort?: boolean\n}\n\nexport class RouteNode {\n  public name: string\n  public absolute: boolean\n  public path: string\n  public parser: Path | null\n  public children: RouteNode[]\n  public parent?: RouteNode\n\n  constructor(\n    name: string = '',\n    path: string = '',\n    childRoutes: Route[] = [],\n    options: RouteNodeOptions = {}\n  ) {\n    this.name = name\n    this.absolute = /^~/.test(path)\n    this.path = this.absolute ? path.slice(1) : path\n\n    this.parser = this.path ? new Path(this.path) : null\n    this.children = []\n    this.parent = options.parent\n\n    this.checkParents()\n\n    this.add(\n      childRoutes,\n      options.onAdd,\n      options.finalSort ? false : options.sort !== false\n    )\n\n    if (options.finalSort) {\n      this.sortDescendants()\n    }\n\n    return this\n  }\n\n  public getParentSegments(segments: RouteNode[] = []): RouteNode[] {\n    return this.parent && this.parent.parser\n      ? this.parent.getParentSegments(segments.concat(this.parent))\n      : segments.reverse()\n  }\n\n  public setParent(parent: RouteNode) {\n    this.parent = parent\n    this.checkParents()\n  }\n\n  public setPath(path: string = '') {\n    this.path = path\n    this.parser = path ? new Path(path) : null\n  }\n\n  public add(\n    route: Route | Route[],\n    cb?: Callback,\n    sort: boolean = true\n  ): this {\n    if (route === undefined || route === null) {\n      return this\n    }\n\n    if (route instanceof Array) {\n      route.forEach(r => this.add(r, cb, sort))\n      return this\n    }\n\n    if (!(route instanceof RouteNode) && !(route instanceof Object)) {\n      throw new Error(\n        'RouteNode.add() expects routes to be an Object or an instance of RouteNode.'\n      )\n    } else if (route instanceof RouteNode) {\n      route.setParent(this)\n      this.addRouteNode(route, sort)\n    } else {\n      if (!route.name || !route.path) {\n        throw new Error(\n          'RouteNode.add() expects routes to have a name and a path defined.'\n        )\n      }\n\n      const routeNode = new RouteNode(route.name, route.path, route.children, {\n        finalSort: false,\n        onAdd: cb,\n        parent: this,\n        sort\n      })\n      const fullName = routeNode\n        .getParentSegments([routeNode])\n        .map(_ => _.name)\n        .join('.')\n      if (cb) {\n        cb({\n          ...route,\n          name: fullName\n        })\n      }\n      this.addRouteNode(routeNode, sort)\n    }\n\n    return this\n  }\n\n  public addNode(name: string, path: string) {\n    this.add(new RouteNode(name, path))\n    return this\n  }\n\n  public getPath(routeName: string): string | null {\n    const segmentsByName = this.getSegmentsByName(routeName)\n\n    return segmentsByName ? getPathFromSegments(segmentsByName) : null\n  }\n\n  public getNonAbsoluteChildren(): RouteNode[] {\n    return this.children.filter(child => !child.absolute)\n  }\n\n  public sortChildren() {\n    if (this.children.length) {\n      sortChildren(this.children)\n    }\n  }\n\n  public sortDescendants() {\n    this.sortChildren()\n    this.children.forEach(child => child.sortDescendants())\n  }\n\n  public buildPath(\n    routeName: string,\n    params: Record<string, any> = {},\n    options: BuildOptions = {}\n  ): string {\n    const segments = this.getSegmentsByName(routeName)\n\n    if (!segments) {\n      throw new Error(`[route-node][buildPath] '{routeName}' is not defined`)\n    }\n\n    return buildPathFromSegments(segments, params, options)\n  }\n\n  public buildState(\n    name: string,\n    params: Record<string, any> = {}\n  ): RouteNodeState | null {\n    const segments = this.getSegmentsByName(name)\n\n    if (!segments || !segments.length) {\n      return null\n    }\n\n    return {\n      name,\n      params,\n      meta: getMetaFromSegments(segments)\n    }\n  }\n\n  public matchPath(\n    path: string,\n    options: MatchOptions = {}\n  ): RouteNodeState | null {\n    if (path === '' && !options.strictTrailingSlash) {\n      path = '/'\n    }\n\n    const match = this.getSegmentsMatchingPath(path, options)\n\n    if (!match) {\n      return null\n    }\n\n    const matchedSegments = match.segments\n\n    if (matchedSegments[0].absolute) {\n      const firstSegmentParams = matchedSegments[0].getParentSegments()\n\n      matchedSegments.reverse()\n      matchedSegments.push(...firstSegmentParams)\n      matchedSegments.reverse()\n    }\n\n    const lastSegment = matchedSegments[matchedSegments.length - 1]\n    const lastSegmentSlashChild = lastSegment.findSlashChild()\n\n    if (lastSegmentSlashChild) {\n      matchedSegments.push(lastSegmentSlashChild)\n    }\n\n    return buildStateFromMatch(match)\n  }\n\n  private addRouteNode(route: RouteNode, sort: boolean = true): this {\n    const names = route.name.split('.')\n\n    if (names.length === 1) {\n      // Check duplicated routes\n      if (this.children.map(child => child.name).indexOf(route.name) !== -1) {\n        throw new Error(\n          `Alias \"${route.name}\" is already defined in route node`\n        )\n      }\n\n      // Check duplicated paths\n      if (this.children.map(child => child.path).indexOf(route.path) !== -1) {\n        throw new Error(`Path \"${route.path}\" is already defined in route node`)\n      }\n\n      this.children.push(route)\n\n      if (sort) {\n        this.sortChildren()\n      }\n    } else {\n      // Locate parent node\n      const segments = this.getSegmentsByName(names.slice(0, -1).join('.'))\n      if (segments) {\n        route.name = names[names.length - 1]\n        segments[segments.length - 1].add(route)\n      } else {\n        throw new Error(\n          `Could not add route named '${route.name}', parent is missing.`\n        )\n      }\n    }\n\n    return this\n  }\n\n  private checkParents() {\n    if (this.absolute && this.hasParentsParams()) {\n      throw new Error(\n        '[RouteNode] A RouteNode with an abolute path cannot have parents with route parameters'\n      )\n    }\n  }\n\n  private hasParentsParams(): boolean {\n    if (this.parent && this.parent.parser) {\n      const parser = this.parent.parser\n      const hasParams =\n        parser.hasUrlParams ||\n        parser.hasSpatParam ||\n        parser.hasMatrixParams ||\n        parser.hasQueryParams\n\n      return hasParams || this.parent.hasParentsParams()\n    }\n\n    return false\n  }\n\n  private findAbsoluteChildren(): RouteNode[] {\n    return this.children.reduce<RouteNode[]>(\n      (absoluteChildren, child) =>\n        absoluteChildren\n          .concat(child.absolute ? child : [])\n          .concat(child.findAbsoluteChildren()),\n      []\n    )\n  }\n\n  private findSlashChild(): RouteNode | undefined {\n    const slashChildren = this.getNonAbsoluteChildren().filter(\n      child => child.parser && /^\\/(\\?|$)/.test(child.parser.path)\n    )\n\n    return slashChildren[0]\n  }\n\n  private getSegmentsByName(routeName: string): RouteNode[] | null {\n    const findSegmentByName = (name: string, routes: RouteNode[]) => {\n      const filteredRoutes = routes.filter(r => r.name === name)\n      return filteredRoutes.length ? filteredRoutes[0] : undefined\n    }\n    const segments: RouteNode[] = []\n    let routes = this.parser ? [this] : this.children\n    const names = (this.parser ? [''] : []).concat(routeName.split('.'))\n\n    const matched = names.every(name => {\n      const segment = findSegmentByName(name, routes)\n      if (segment) {\n        routes = segment.children\n        segments.push(segment)\n        return true\n      }\n      return false\n    })\n\n    return matched ? segments : null\n  }\n\n  private getSegmentsMatchingPath(\n    path: string,\n    options: MatchOptions\n  ): MatchResponse | null {\n    const topLevelNodes = this.parser ? [this] : this.children\n    const startingNodes = topLevelNodes.reduce<RouteNode[]>(\n      (nodes, node) => nodes.concat(node, node.findAbsoluteChildren()),\n      []\n    )\n\n    const currentMatch = {\n      segments: [],\n      params: {}\n    }\n\n    const finalMatch = matchChildren(startingNodes, path, currentMatch, options)\n\n    if (\n      finalMatch &&\n      finalMatch.segments.length === 1 &&\n      finalMatch.segments[0].name === ''\n    ) {\n      return null\n    }\n\n    return finalMatch\n  }\n}\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","var nameToIDs = function (name) {\r\n    return name\r\n        .split('.')\r\n        .reduce(function (ids, name) {\r\n        return ids.concat(ids.length ? ids[ids.length - 1] + '.' + name : name);\r\n    }, []);\r\n};\r\nvar exists = function (val) { return val !== undefined && val !== null; };\r\nvar hasMetaParams = function (state) { return state && state.meta && state.meta.params; };\r\nvar extractSegmentParams = function (name, state) {\r\n    if (!hasMetaParams(state) || !exists(state.meta.params[name]))\r\n        return {};\r\n    return Object.keys(state.meta.params[name]).reduce(function (params, p) {\r\n        params[p] = state.params[p];\r\n        return params;\r\n    }, {});\r\n};\r\nfunction transitionPath(toState, fromState) {\r\n    var toStateOptions = (toState.meta && toState.meta && toState.meta.options) || {};\r\n    var fromStateIds = fromState ? nameToIDs(fromState.name) : [];\r\n    var toStateIds = nameToIDs(toState.name);\r\n    var maxI = Math.min(fromStateIds.length, toStateIds.length);\r\n    function pointOfDifference() {\r\n        var i;\r\n        var _loop_1 = function () {\r\n            var left = fromStateIds[i];\r\n            var right = toStateIds[i];\r\n            if (left !== right)\r\n                return { value: i };\r\n            var leftParams = extractSegmentParams(left, toState);\r\n            var rightParams = extractSegmentParams(right, fromState);\r\n            if (Object.keys(leftParams).length !==\r\n                Object.keys(rightParams).length)\r\n                return { value: i };\r\n            if (Object.keys(leftParams).length === 0)\r\n                return \"continue\";\r\n            var different = Object.keys(leftParams).some(function (p) { return rightParams[p] !== leftParams[p]; });\r\n            if (different) {\r\n                return { value: i };\r\n            }\r\n        };\r\n        for (i = 0; i < maxI; i += 1) {\r\n            var state_1 = _loop_1();\r\n            if (typeof state_1 === \"object\")\r\n                return state_1.value;\r\n        }\r\n        return i;\r\n    }\r\n    var i;\r\n    if (!fromState || toStateOptions.reload) {\r\n        i = 0;\r\n    }\r\n    else if (!hasMetaParams(fromState) && !hasMetaParams(toState)) {\r\n        i = 0;\r\n    }\r\n    else {\r\n        i = pointOfDifference();\r\n    }\r\n    var toDeactivate = fromStateIds.slice(i).reverse();\r\n    var toActivate = toStateIds.slice(i);\r\n    var intersection = fromState && i > 0 ? fromStateIds[i - 1] : '';\r\n    return {\r\n        intersection: intersection,\r\n        toDeactivate: toDeactivate,\r\n        toActivate: toActivate\r\n    };\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nfunction shouldUpdateNode(nodeName) {\r\n    return function (toState, fromSate) {\r\n        var _a = transitionPath(toState, fromSate), intersection = _a.intersection, toActivate = _a.toActivate, toDeactivateReversed = _a.toDeactivate;\r\n        var toDeactivate = __spreadArrays(toDeactivateReversed).reverse();\r\n        if (toState.meta.options && toState.meta.options.reload) {\r\n            return true;\r\n        }\r\n        if (nodeName === intersection) {\r\n            return true;\r\n        }\r\n        if (toActivate.indexOf(nodeName) === -1) {\r\n            return false;\r\n        }\r\n        var matching = true;\r\n        for (var i = 0; i < toActivate.length; i += 1) {\r\n            var activatedSegment = toActivate[i];\r\n            var sameLevelDeactivatedSegment = toDeactivate[i];\r\n            matching = activatedSegment === sameLevelDeactivatedSegment;\r\n            if (matching && activatedSegment === nodeName) {\r\n                return true;\r\n            }\r\n            if (!matching) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n}\n\nexport default transitionPath;\nexport { nameToIDs, shouldUpdateNode };\n","import { RouteNode } from 'route-node';\nexport { RouteNode } from 'route-node';\nimport $$observable from 'symbol-observable';\nimport transitionPath, { nameToIDs } from 'router5-transition-path';\nexport { default as transitionPath } from 'router5-transition-path';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultOptions = {\r\n    trailingSlashMode: 'default',\r\n    queryParamsMode: 'default',\r\n    strictTrailingSlash: false,\r\n    autoCleanUp: true,\r\n    allowNotFound: false,\r\n    strongMatching: true,\r\n    rewritePathOnMatch: true,\r\n    caseSensitive: false,\r\n    urlParamsEncoding: 'default'\r\n};\r\nfunction withOptions(options) {\r\n    return function (router) {\r\n        var routerOptions = __assign(__assign({}, defaultOptions), options);\r\n        router.getOptions = function () { return routerOptions; };\r\n        router.setOption = function (option, value) {\r\n            routerOptions[option] = value;\r\n            return router;\r\n        };\r\n        return router;\r\n    };\r\n}\n\nvar errorCodes = {\r\n    ROUTER_NOT_STARTED: 'NOT_STARTED',\r\n    NO_START_PATH_OR_STATE: 'NO_START_PATH_OR_STATE',\r\n    ROUTER_ALREADY_STARTED: 'ALREADY_STARTED',\r\n    ROUTE_NOT_FOUND: 'ROUTE_NOT_FOUND',\r\n    SAME_STATES: 'SAME_STATES',\r\n    CANNOT_DEACTIVATE: 'CANNOT_DEACTIVATE',\r\n    CANNOT_ACTIVATE: 'CANNOT_ACTIVATE',\r\n    TRANSITION_ERR: 'TRANSITION_ERR',\r\n    TRANSITION_CANCELLED: 'CANCELLED'\r\n};\r\nvar constants = {\r\n    UNKNOWN_ROUTE: '@@router5/UNKNOWN_ROUTE',\r\n    ROUTER_START: '$start',\r\n    ROUTER_STOP: '$stop',\r\n    TRANSITION_START: '$$start',\r\n    TRANSITION_CANCEL: '$$cancel',\r\n    TRANSITION_SUCCESS: '$$success',\r\n    TRANSITION_ERROR: '$$error'\r\n};\n\nfunction withRoutes(routes) {\r\n    return function (router) {\r\n        router.forward = function (fromRoute, toRoute) {\r\n            router.config.forwardMap[fromRoute] = toRoute;\r\n            return router;\r\n        };\r\n        var rootNode = routes instanceof RouteNode\r\n            ? routes\r\n            : new RouteNode('', '', routes, { onAdd: onRouteAdded });\r\n        function onRouteAdded(route) {\r\n            if (route.canActivate)\r\n                router.canActivate(route.name, route.canActivate);\r\n            if (route.forwardTo)\r\n                router.forward(route.name, route.forwardTo);\r\n            if (route.decodeParams)\r\n                router.config.decoders[route.name] = route.decodeParams;\r\n            if (route.encodeParams)\r\n                router.config.encoders[route.name] = route.encodeParams;\r\n            if (route.defaultParams)\r\n                router.config.defaultParams[route.name] = route.defaultParams;\r\n        }\r\n        router.rootNode = rootNode;\r\n        router.add = function (routes, finalSort) {\r\n            rootNode.add(routes, onRouteAdded, !finalSort);\r\n            if (finalSort) {\r\n                rootNode.sortDescendants();\r\n            }\r\n            return router;\r\n        };\r\n        router.addNode = function (name, path, canActivateHandler) {\r\n            rootNode.addNode(name, path);\r\n            if (canActivateHandler)\r\n                router.canActivate(name, canActivateHandler);\r\n            return router;\r\n        };\r\n        router.isActive = function (name, params, strictEquality, ignoreQueryParams) {\r\n            if (params === void 0) { params = {}; }\r\n            if (strictEquality === void 0) { strictEquality = false; }\r\n            if (ignoreQueryParams === void 0) { ignoreQueryParams = true; }\r\n            var activeState = router.getState();\r\n            if (!activeState)\r\n                return false;\r\n            if (strictEquality || activeState.name === name) {\r\n                return router.areStatesEqual(router.makeState(name, params), activeState, ignoreQueryParams);\r\n            }\r\n            return router.areStatesDescendants(router.makeState(name, params), activeState);\r\n        };\r\n        router.buildPath = function (route, params) {\r\n            if (route === constants.UNKNOWN_ROUTE) {\r\n                return params.path;\r\n            }\r\n            var paramsWithDefault = __assign(__assign({}, router.config.defaultParams[route]), params);\r\n            var _a = router.getOptions(), trailingSlashMode = _a.trailingSlashMode, queryParamsMode = _a.queryParamsMode, queryParams = _a.queryParams;\r\n            var encodedParams = router.config.encoders[route]\r\n                ? router.config.encoders[route](paramsWithDefault)\r\n                : paramsWithDefault;\r\n            return router.rootNode.buildPath(route, encodedParams, {\r\n                trailingSlashMode: trailingSlashMode,\r\n                queryParamsMode: queryParamsMode,\r\n                queryParams: queryParams,\r\n                urlParamsEncoding: router.getOptions().urlParamsEncoding\r\n            });\r\n        };\r\n        router.matchPath = function (path, source) {\r\n            var options = router.getOptions();\r\n            var match = router.rootNode.matchPath(path, options);\r\n            if (match) {\r\n                var name_1 = match.name, params = match.params, meta = match.meta;\r\n                var decodedParams = router.config.decoders[name_1]\r\n                    ? router.config.decoders[name_1](params)\r\n                    : params;\r\n                var _a = router.forwardState(name_1, decodedParams), routeName = _a.name, routeParams = _a.params;\r\n                var builtPath = options.rewritePathOnMatch === false\r\n                    ? path\r\n                    : router.buildPath(routeName, routeParams);\r\n                return router.makeState(routeName, routeParams, builtPath, {\r\n                    params: meta,\r\n                    source: source\r\n                });\r\n            }\r\n            return null;\r\n        };\r\n        router.setRootPath = function (rootPath) {\r\n            router.rootNode.setPath(rootPath);\r\n        };\r\n        return router;\r\n    };\r\n}\n\nfunction withDependencies(dependencies) {\r\n    return function (router) {\r\n        var routerDependencies = dependencies;\r\n        router.setDependency = function (dependencyName, dependency) {\r\n            routerDependencies[dependencyName] = dependency;\r\n            return router;\r\n        };\r\n        router.setDependencies = function (deps) {\r\n            Object.keys(deps).forEach(function (name) {\r\n                return router.setDependency(name, deps[name]);\r\n            });\r\n            return router;\r\n        };\r\n        router.getDependencies = function () { return routerDependencies; };\r\n        router.getInjectables = function () { return [router, router.getDependencies()]; };\r\n        router.executeFactory = function (factoryFunction) {\r\n            return factoryFunction.apply(void 0, router.getInjectables());\r\n        };\r\n        return router;\r\n    };\r\n}\n\nfunction withState(router) {\r\n    var stateId = 0;\r\n    var routerState = null;\r\n    router.getState = function () { return routerState; };\r\n    router.setState = function (state) {\r\n        routerState = state;\r\n    };\r\n    router.makeState = function (name, params, path, meta, forceId) { return ({\r\n        name: name,\r\n        params: __assign(__assign({}, router.config.defaultParams[name]), params),\r\n        path: path,\r\n        meta: meta\r\n            ? __assign(__assign({}, meta), { id: forceId === undefined ? ++stateId : forceId }) : undefined\r\n    }); };\r\n    router.makeNotFoundState = function (path, options) {\r\n        return router.makeState(constants.UNKNOWN_ROUTE, { path: path }, path, {\r\n            options: options\r\n        });\r\n    };\r\n    router.areStatesEqual = function (state1, state2, ignoreQueryParams) {\r\n        if (ignoreQueryParams === void 0) { ignoreQueryParams = true; }\r\n        if (state1.name !== state2.name)\r\n            return false;\r\n        var getUrlParams = function (name) {\r\n            return router.rootNode\r\n                //@ts-ignore\r\n                .getSegmentsByName(name)\r\n                .map(function (segment) { return segment.parser['urlParams']; })\r\n                .reduce(function (params, p) { return params.concat(p); }, []);\r\n        };\r\n        var state1Params = ignoreQueryParams\r\n            ? getUrlParams(state1.name)\r\n            : Object.keys(state1.params);\r\n        var state2Params = ignoreQueryParams\r\n            ? getUrlParams(state2.name)\r\n            : Object.keys(state2.params);\r\n        return (state1Params.length === state2Params.length &&\r\n            state1Params.every(function (p) { return state1.params[p] === state2.params[p]; }));\r\n    };\r\n    router.areStatesDescendants = function (parentState, childState) {\r\n        var regex = new RegExp('^' + parentState.name + '\\\\.(.*)$');\r\n        if (!regex.test(childState.name))\r\n            return false;\r\n        // If child state name extends parent state name, and all parent state params\r\n        // are in child state params.\r\n        return Object.keys(parentState.params).every(function (p) { return parentState.params[p] === childState.params[p]; });\r\n    };\r\n    router.forwardState = function (routeName, routeParams) {\r\n        var name = router.config.forwardMap[routeName] || routeName;\r\n        var params = __assign(__assign(__assign({}, router.config.defaultParams[routeName]), router.config.defaultParams[name]), routeParams);\r\n        return {\r\n            name: name,\r\n            params: params\r\n        };\r\n    };\r\n    router.buildState = function (routeName, routeParams) {\r\n        var _a = router.forwardState(routeName, routeParams), name = _a.name, params = _a.params;\r\n        return router.rootNode.buildState(name, params);\r\n    };\r\n    return router;\r\n}\n\nvar eventsMap = {\r\n    onStart: constants.ROUTER_START,\r\n    onStop: constants.ROUTER_STOP,\r\n    onTransitionSuccess: constants.TRANSITION_SUCCESS,\r\n    onTransitionStart: constants.TRANSITION_START,\r\n    onTransitionError: constants.TRANSITION_ERROR,\r\n    onTransitionCancel: constants.TRANSITION_CANCEL\r\n};\r\nfunction withPlugins(router) {\r\n    var routerPlugins = [];\r\n    router.getPlugins = function () { return routerPlugins; };\r\n    router.usePlugin = function () {\r\n        var plugins = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            plugins[_i] = arguments[_i];\r\n        }\r\n        var removePluginFns = plugins.map(function (plugin) {\r\n            routerPlugins.push(plugin);\r\n            return startPlugin(plugin);\r\n        });\r\n        return function () {\r\n            routerPlugins = routerPlugins.filter(function (plugin) { return plugins.indexOf(plugin) === -1; });\r\n            removePluginFns.forEach(function (removePlugin) { return removePlugin(); });\r\n        };\r\n    };\r\n    function startPlugin(plugin) {\r\n        var appliedPlugin = router.executeFactory(plugin);\r\n        var removeEventListeners = Object.keys(eventsMap)\r\n            .map(function (methodName) {\r\n            if (appliedPlugin[methodName]) {\r\n                return router.addEventListener(eventsMap[methodName], appliedPlugin[methodName]);\r\n            }\r\n        })\r\n            .filter(Boolean);\r\n        return function () {\r\n            removeEventListeners.forEach(function (removeListener) { return removeListener(); });\r\n            if (appliedPlugin.teardown) {\r\n                appliedPlugin.teardown();\r\n            }\r\n        };\r\n    }\r\n    return router;\r\n}\n\nfunction withMiddleware(router) {\r\n    var middlewareFactories = [];\r\n    var middlewareFunctions = [];\r\n    router.useMiddleware = function () {\r\n        var middlewares = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            middlewares[_i] = arguments[_i];\r\n        }\r\n        var removePluginFns = middlewares.map(function (middleware) {\r\n            var middlewareFunction = router.executeFactory(middleware);\r\n            middlewareFactories.push(middleware);\r\n            middlewareFunctions.push(middlewareFunction);\r\n            return function () {\r\n                middlewareFactories = middlewareFactories.filter(function (m) { return m !== middleware; });\r\n                middlewareFunctions = middlewareFunctions.filter(function (m) { return m !== middlewareFunction; });\r\n            };\r\n        });\r\n        return function () { return removePluginFns.forEach(function (fn) { return fn(); }); };\r\n    };\r\n    router.clearMiddleware = function () {\r\n        middlewareFactories = [];\r\n        middlewareFunctions = [];\r\n        return router;\r\n    };\r\n    router.getMiddlewareFactories = function () { return middlewareFactories; };\r\n    router.getMiddlewareFunctions = function () { return middlewareFunctions; };\r\n    return router;\r\n}\n\nfunction withObservability(router) {\r\n    var callbacks = {};\r\n    router.invokeEventListeners = function (eventName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        (callbacks[eventName] || []).forEach(function (cb) { return cb.apply(void 0, args); });\r\n    };\r\n    router.removeEventListener = function (eventName, cb) {\r\n        callbacks[eventName] = callbacks[eventName].filter(function (_cb) { return _cb !== cb; });\r\n    };\r\n    router.addEventListener = function (eventName, cb) {\r\n        callbacks[eventName] = (callbacks[eventName] || []).concat(cb);\r\n        return function () { return router.removeEventListener(eventName, cb); };\r\n    };\r\n    function subscribe(listener) {\r\n        var isObject = typeof listener === 'object';\r\n        var finalListener = isObject ? listener.next.bind(listener) : listener;\r\n        var unsubscribeHandler = router.addEventListener(constants.TRANSITION_SUCCESS, function (toState, fromState) {\r\n            finalListener({\r\n                route: toState,\r\n                previousRoute: fromState\r\n            });\r\n        });\r\n        return isObject\r\n            ? { unsubscribe: unsubscribeHandler }\r\n            : unsubscribeHandler;\r\n    }\r\n    function observable() {\r\n        var _a;\r\n        return _a = {\r\n                subscribe: function (observer) {\r\n                    if (typeof observer !== 'object' || observer === null) {\r\n                        throw new TypeError('Expected the observer to be an object.');\r\n                    }\r\n                    return subscribe(observer);\r\n                }\r\n            },\r\n            _a[$$observable] = function () {\r\n                return this;\r\n            },\r\n            _a;\r\n    }\r\n    router.subscribe = subscribe;\r\n    //@ts-ignore\r\n    router[$$observable] = observable;\r\n    //@ts-ignore\r\n    router['@@observable'] = observable;\r\n    return router;\r\n}\n\nfunction resolve(functions, _a, callback) {\r\n    var isCancelled = _a.isCancelled, toState = _a.toState, fromState = _a.fromState, _b = _a.errorKey, errorKey = _b === void 0 ? undefined : _b;\r\n    var remainingFunctions = Array.isArray(functions)\r\n        ? functions\r\n        : Object.keys(functions);\r\n    var isState = function (obj) {\r\n        return typeof obj === 'object' &&\r\n            obj.name !== undefined &&\r\n            obj.params !== undefined &&\r\n            obj.path !== undefined;\r\n    };\r\n    var hasStateChanged = function (toState, fromState) {\r\n        return fromState.name !== toState.name ||\r\n            fromState.params !== toState.params ||\r\n            fromState.path !== toState.path;\r\n    };\r\n    var mergeStates = function (toState, fromState) { return (__assign(__assign(__assign({}, fromState), toState), { meta: __assign(__assign({}, fromState.meta), toState.meta) })); };\r\n    var processFn = function (stepFn, errBase, state, _done) {\r\n        var done = function (err, newState) {\r\n            if (err) {\r\n                _done(err);\r\n            }\r\n            else if (newState && newState !== state && isState(newState)) {\r\n                if (hasStateChanged(newState, state)) {\r\n                    console.error('[router5][transition] Warning: state values (name, params, path) were changed during transition process.');\r\n                }\r\n                _done(null, mergeStates(newState, state));\r\n            }\r\n            else {\r\n                _done(null, state);\r\n            }\r\n        };\r\n        var res = stepFn.call(null, state, fromState, done);\r\n        if (isCancelled()) {\r\n            done(null);\r\n        }\r\n        else if (typeof res === 'boolean') {\r\n            done(res ? null : errBase);\r\n        }\r\n        else if (isState(res)) {\r\n            done(null, res);\r\n        }\r\n        else if (res && typeof res.then === 'function') {\r\n            res.then(function (resVal) {\r\n                if (resVal instanceof Error)\r\n                    done({ error: resVal }, null);\r\n                else\r\n                    done(null, resVal);\r\n            }, function (err) {\r\n                if (err instanceof Error) {\r\n                    console.error(err.stack || err);\r\n                    done(__assign(__assign({}, errBase), { promiseError: err }), null);\r\n                }\r\n                else {\r\n                    done(typeof err === 'object'\r\n                        ? __assign(__assign({}, errBase), err) : errBase, null);\r\n                }\r\n            });\r\n        }\r\n        // else: wait for done to be called\r\n    };\r\n    var next = function (err, state) {\r\n        var _a;\r\n        if (isCancelled()) {\r\n            callback();\r\n        }\r\n        else if (err) {\r\n            callback(err);\r\n        }\r\n        else {\r\n            if (!remainingFunctions.length) {\r\n                callback(null, state);\r\n            }\r\n            else {\r\n                var isMapped = typeof remainingFunctions[0] === 'string';\r\n                var errBase = errorKey && isMapped\r\n                    ? (_a = {}, _a[errorKey] = remainingFunctions[0], _a) : {};\r\n                var stepFn = isMapped\r\n                    ? functions[remainingFunctions[0]]\r\n                    : remainingFunctions[0];\r\n                remainingFunctions = remainingFunctions.slice(1);\r\n                processFn(stepFn, errBase, state, next);\r\n            }\r\n        }\r\n    };\r\n    next(null, toState);\r\n}\n\nfunction transition(router, toState, fromState, opts, callback) {\r\n    var cancelled = false;\r\n    var completed = false;\r\n    var options = router.getOptions();\r\n    var _a = router.getLifecycleFunctions(), canDeactivateFunctions = _a[0], canActivateFunctions = _a[1];\r\n    var middlewareFunctions = router.getMiddlewareFunctions();\r\n    var isCancelled = function () { return cancelled; };\r\n    var cancel = function () {\r\n        if (!cancelled && !completed) {\r\n            cancelled = true;\r\n            callback({ code: errorCodes.TRANSITION_CANCELLED }, null);\r\n        }\r\n    };\r\n    var done = function (err, state) {\r\n        completed = true;\r\n        if (isCancelled()) {\r\n            return;\r\n        }\r\n        if (!err && options.autoCleanUp) {\r\n            var activeSegments_1 = nameToIDs(toState.name);\r\n            Object.keys(canDeactivateFunctions).forEach(function (name) {\r\n                if (activeSegments_1.indexOf(name) === -1)\r\n                    router.clearCanDeactivate(name);\r\n            });\r\n        }\r\n        callback(err, state || toState);\r\n    };\r\n    var makeError = function (base, err) { return (__assign(__assign({}, base), (err instanceof Object ? err : { error: err }))); };\r\n    var isUnknownRoute = toState.name === constants.UNKNOWN_ROUTE;\r\n    var asyncBase = { isCancelled: isCancelled, toState: toState, fromState: fromState };\r\n    var _b = transitionPath(toState, fromState), toDeactivate = _b.toDeactivate, toActivate = _b.toActivate;\r\n    var canDeactivate = !fromState || opts.forceDeactivate\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            var canDeactivateFunctionMap = toDeactivate\r\n                .filter(function (name) { return canDeactivateFunctions[name]; })\r\n                .reduce(function (fnMap, name) {\r\n                var _a;\r\n                return (__assign(__assign({}, fnMap), (_a = {}, _a[name] = canDeactivateFunctions[name], _a)));\r\n            }, {});\r\n            resolve(canDeactivateFunctionMap, __assign(__assign({}, asyncBase), { errorKey: 'segment' }), function (err) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.CANNOT_DEACTIVATE }, err)\r\n                    : null);\r\n            });\r\n        };\r\n    var canActivate = isUnknownRoute\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            var canActivateFunctionMap = toActivate\r\n                .filter(function (name) { return canActivateFunctions[name]; })\r\n                .reduce(function (fnMap, name) {\r\n                var _a;\r\n                return (__assign(__assign({}, fnMap), (_a = {}, _a[name] = canActivateFunctions[name], _a)));\r\n            }, {});\r\n            resolve(canActivateFunctionMap, __assign(__assign({}, asyncBase), { errorKey: 'segment' }), function (err) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.CANNOT_ACTIVATE }, err)\r\n                    : null);\r\n            });\r\n        };\r\n    var middleware = !middlewareFunctions.length\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            return resolve(middlewareFunctions, __assign({}, asyncBase), function (err, state) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.TRANSITION_ERR }, err)\r\n                    : null, state || toState);\r\n            });\r\n        };\r\n    var pipeline = []\r\n        .concat(canDeactivate)\r\n        .concat(canActivate)\r\n        .concat(middleware);\r\n    resolve(pipeline, asyncBase, done);\r\n    return cancel;\r\n}\n\nvar noop = function () { };\r\nfunction withNavigation(router) {\r\n    var cancelCurrentTransition;\r\n    router.navigate = navigate;\r\n    router.navigate = navigate;\r\n    router.navigateToDefault = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var opts = typeof args[0] === 'object' ? args[0] : {};\r\n        var done = args.length === 2\r\n            ? args[1]\r\n            : typeof args[0] === 'function'\r\n                ? args[0]\r\n                : noop;\r\n        var options = router.getOptions();\r\n        if (options.defaultRoute) {\r\n            return navigate(options.defaultRoute, options.defaultParams, opts, done);\r\n        }\r\n        return function () { };\r\n    };\r\n    router.cancel = function () {\r\n        if (cancelCurrentTransition) {\r\n            cancelCurrentTransition('navigate');\r\n            cancelCurrentTransition = null;\r\n        }\r\n        return router;\r\n    };\r\n    function navigate() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var name = args[0];\r\n        var lastArg = args[args.length - 1];\r\n        var done = typeof lastArg === 'function' ? lastArg : noop;\r\n        var params = typeof args[1] === 'object' ? args[1] : {};\r\n        var opts = typeof args[2] === 'object' ? args[2] : {};\r\n        if (!router.isStarted()) {\r\n            done({ code: errorCodes.ROUTER_NOT_STARTED });\r\n            return;\r\n        }\r\n        var route = router.buildState(name, params);\r\n        if (!route) {\r\n            var err = { code: errorCodes.ROUTE_NOT_FOUND };\r\n            done(err);\r\n            router.invokeEventListeners(constants.TRANSITION_ERROR, null, router.getState(), err);\r\n            return;\r\n        }\r\n        var toState = router.makeState(route.name, route.params, router.buildPath(route.name, route.params), { params: route.meta, options: opts });\r\n        var sameStates = router.getState()\r\n            ? router.areStatesEqual(router.getState(), toState, false)\r\n            : false;\r\n        // Do not proceed further if states are the same and no reload\r\n        // (no deactivation and no callbacks)\r\n        if (sameStates && !opts.reload && !opts.force) {\r\n            var err = { code: errorCodes.SAME_STATES };\r\n            done(err);\r\n            router.invokeEventListeners(constants.TRANSITION_ERROR, toState, router.getState(), err);\r\n            return;\r\n        }\r\n        var fromState = router.getState();\r\n        if (opts.skipTransition) {\r\n            done(null, toState);\r\n            return noop;\r\n        }\r\n        // Transition\r\n        return router.transitionToState(toState, fromState, opts, function (err, state) {\r\n            if (err) {\r\n                if (err.redirect) {\r\n                    var _a = err.redirect, name_1 = _a.name, params_1 = _a.params;\r\n                    navigate(name_1, params_1, __assign(__assign({}, opts), { force: true, redirected: true }), done);\r\n                }\r\n                else {\r\n                    done(err);\r\n                }\r\n            }\r\n            else {\r\n                router.invokeEventListeners(constants.TRANSITION_SUCCESS, state, fromState, opts);\r\n                done(null, state);\r\n            }\r\n        });\r\n    }\r\n    router.transitionToState = function (toState, fromState, options, done) {\r\n        if (options === void 0) { options = {}; }\r\n        if (done === void 0) { done = noop; }\r\n        router.cancel();\r\n        router.invokeEventListeners(constants.TRANSITION_START, toState, fromState);\r\n        cancelCurrentTransition = transition(router, toState, fromState, options, function (err, state) {\r\n            cancelCurrentTransition = null;\r\n            state = state || toState;\r\n            if (err) {\r\n                if (err.code === errorCodes.TRANSITION_CANCELLED) {\r\n                    router.invokeEventListeners(constants.TRANSITION_CANCEL, toState, fromState);\r\n                }\r\n                else {\r\n                    router.invokeEventListeners(constants.TRANSITION_ERROR, toState, fromState, err);\r\n                }\r\n                done(err);\r\n            }\r\n            else {\r\n                router.setState(state);\r\n                done(null, state);\r\n            }\r\n        });\r\n        return cancelCurrentTransition;\r\n    };\r\n    return router;\r\n}\n\nvar noop$1 = function () { };\r\nfunction withRouterLifecycle(router) {\r\n    var started = false;\r\n    router.isStarted = function () { return started; };\r\n    //@ts-ignore\r\n    router.start = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var options = router.getOptions();\r\n        var lastArg = args[args.length - 1];\r\n        var done = typeof lastArg === 'function' ? lastArg : noop$1;\r\n        var startPathOrState = typeof args[0] !== 'function' ? args[0] : undefined;\r\n        if (started) {\r\n            done({ code: errorCodes.ROUTER_ALREADY_STARTED });\r\n            return router;\r\n        }\r\n        var startPath, startState;\r\n        started = true;\r\n        router.invokeEventListeners(constants.ROUTER_START);\r\n        // callback\r\n        var cb = function (err, state, invokeErrCb) {\r\n            if (invokeErrCb === void 0) { invokeErrCb = true; }\r\n            if (!err)\r\n                router.invokeEventListeners(constants.TRANSITION_SUCCESS, state, null, { replace: true });\r\n            if (err && invokeErrCb)\r\n                router.invokeEventListeners(constants.TRANSITION_ERROR, state, null, err);\r\n            done(err, state);\r\n        };\r\n        if (startPathOrState === undefined && !options.defaultRoute) {\r\n            return cb({ code: errorCodes.NO_START_PATH_OR_STATE });\r\n        }\r\n        if (typeof startPathOrState === 'string') {\r\n            startPath = startPathOrState;\r\n        }\r\n        else if (typeof startPathOrState === 'object') {\r\n            startState = startPathOrState;\r\n        }\r\n        if (!startState) {\r\n            // If no supplied start state, get start state\r\n            startState =\r\n                startPath === undefined ? null : router.matchPath(startPath);\r\n            // Navigate to default function\r\n            var navigateToDefault_1 = function () {\r\n                return router.navigateToDefault({ replace: true }, done);\r\n            };\r\n            var redirect_1 = function (route) {\r\n                return router.navigate(route.name, route.params, { replace: true, reload: true, redirected: true }, done);\r\n            };\r\n            var transitionToState = function (state) {\r\n                router.transitionToState(state, router.getState(), {}, function (err, state) {\r\n                    if (!err)\r\n                        cb(null, state);\r\n                    else if (err.redirect)\r\n                        redirect_1(err.redirect);\r\n                    else if (options.defaultRoute)\r\n                        navigateToDefault_1();\r\n                    else\r\n                        cb(err, null, false);\r\n                });\r\n            };\r\n            // If matched start path\r\n            if (startState) {\r\n                transitionToState(startState);\r\n            }\r\n            else if (options.defaultRoute) {\r\n                // If default, navigate to default\r\n                navigateToDefault_1();\r\n            }\r\n            else if (options.allowNotFound) {\r\n                transitionToState(router.makeNotFoundState(startPath, { replace: true }));\r\n            }\r\n            else {\r\n                // No start match, no default => do nothing\r\n                cb({ code: errorCodes.ROUTE_NOT_FOUND, path: startPath }, null);\r\n            }\r\n        }\r\n        else {\r\n            // Initialise router with provided start state\r\n            router.setState(startState);\r\n            cb(null, startState);\r\n        }\r\n        return router;\r\n    };\r\n    router.stop = function () {\r\n        if (started) {\r\n            router.setState(null);\r\n            started = false;\r\n            router.invokeEventListeners(constants.ROUTER_STOP);\r\n        }\r\n        return router;\r\n    };\r\n    return router;\r\n}\n\nvar toFunction = function (val) { return (typeof val === 'function' ? val : function () { return function () { return val; }; }); };\r\nfunction withRouteLifecycle(router) {\r\n    var canDeactivateFactories = {};\r\n    var canActivateFactories = {};\r\n    var canDeactivateFunctions = {};\r\n    var canActivateFunctions = {};\r\n    router.getLifecycleFactories = function () {\r\n        return [canDeactivateFactories, canActivateFactories];\r\n    };\r\n    router.getLifecycleFunctions = function () {\r\n        return [canDeactivateFunctions, canActivateFunctions];\r\n    };\r\n    router.canDeactivate = function (name, canDeactivateHandler) {\r\n        var factory = toFunction(canDeactivateHandler);\r\n        canDeactivateFactories[name] = factory;\r\n        canDeactivateFunctions[name] = router.executeFactory(factory);\r\n        return router;\r\n    };\r\n    router.clearCanDeactivate = function (name) {\r\n        canDeactivateFactories[name] = undefined;\r\n        canDeactivateFunctions[name] = undefined;\r\n        return router;\r\n    };\r\n    router.canActivate = function (name, canActivateHandler) {\r\n        var factory = toFunction(canActivateHandler);\r\n        canActivateFactories[name] = factory;\r\n        canActivateFunctions[name] = router.executeFactory(factory);\r\n        return router;\r\n    };\r\n    return router;\r\n}\n\nvar pipe = function () {\r\n    var fns = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        fns[_i] = arguments[_i];\r\n    }\r\n    return function (arg) {\r\n        return fns.reduce(function (prev, fn) { return fn(prev); }, arg);\r\n    };\r\n};\r\nvar createRouter = function (routes, options, dependencies) {\r\n    if (routes === void 0) { routes = []; }\r\n    if (options === void 0) { options = {}; }\r\n    if (dependencies === void 0) { dependencies = {}; }\r\n    var config = {\r\n        decoders: {},\r\n        encoders: {},\r\n        defaultParams: {},\r\n        forwardMap: {}\r\n    };\r\n    return pipe(withOptions(options), withDependencies(dependencies), withObservability, withState, withRouterLifecycle, withRouteLifecycle, withNavigation, withPlugins, withMiddleware, withRoutes(routes))({ config: config });\r\n};\n\nfunction cloneRouter(router, dependencies) {\r\n    var clonedRouter = createRouter(router.rootNode, router.getOptions(), dependencies);\r\n    clonedRouter.useMiddleware.apply(clonedRouter, router.getMiddlewareFactories());\r\n    clonedRouter.usePlugin.apply(clonedRouter, router.getPlugins());\r\n    clonedRouter.config = router.config;\r\n    var _a = router.getLifecycleFactories(), canDeactivateFactories = _a[0], canActivateFactories = _a[1];\r\n    Object.keys(canDeactivateFactories).forEach(function (name) {\r\n        return clonedRouter.canDeactivate(name, canDeactivateFactories[name]);\r\n    });\r\n    Object.keys(canActivateFactories).forEach(function (name) {\r\n        return clonedRouter.canActivate(name, canActivateFactories[name]);\r\n    });\r\n    return clonedRouter;\r\n}\n\nexport default createRouter;\nexport { cloneRouter, constants, createRouter, errorCodes };\n","import { errorCodes, constants } from 'router5';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nvar value = function (arg) { return function () { return arg; }; };\r\nvar noop = function () { };\r\nvar isBrowser = typeof window !== 'undefined' && window.history;\r\nvar getBase = function () { return window.location.pathname; };\r\nvar supportsPopStateOnHashChange = function () {\r\n    return window.navigator.userAgent.indexOf('Trident') === -1;\r\n};\r\nvar pushState = function (state, title, path) {\r\n    return window.history.pushState(state, title, path);\r\n};\r\nvar replaceState = function (state, title, path) {\r\n    return window.history.replaceState(state, title, path);\r\n};\r\nvar addPopstateListener = function (fn, opts) {\r\n    var shouldAddHashChangeListener = opts.useHash && !supportsPopStateOnHashChange();\r\n    window.addEventListener('popstate', fn);\r\n    if (shouldAddHashChangeListener) {\r\n        window.addEventListener('hashchange', fn);\r\n    }\r\n    return function () {\r\n        window.removeEventListener('popstate', fn);\r\n        if (shouldAddHashChangeListener) {\r\n            window.removeEventListener('hashchange', fn);\r\n        }\r\n    };\r\n};\r\nvar getLocation = function (opts) {\r\n    var path = opts.useHash\r\n        ? window.location.hash.replace(new RegExp('^#' + opts.hashPrefix), '')\r\n        : window.location.pathname.replace(new RegExp('^' + opts.base), '');\r\n    // Fix issue with browsers that don't URL encode characters (Edge)\r\n    var correctedPath = safelyEncodePath(path);\r\n    return (correctedPath || '/') + window.location.search;\r\n};\r\nvar safelyEncodePath = function (path) {\r\n    try {\r\n        return encodeURI(decodeURI(path));\r\n    }\r\n    catch (_) {\r\n        return path;\r\n    }\r\n};\r\nvar getState = function () { return window.history.state; };\r\nvar getHash = function () { return window.location.hash; };\r\nvar browser = {};\r\nif (isBrowser) {\r\n    browser = {\r\n        getBase: getBase,\r\n        pushState: pushState,\r\n        replaceState: replaceState,\r\n        addPopstateListener: addPopstateListener,\r\n        getLocation: getLocation,\r\n        getState: getState,\r\n        getHash: getHash\r\n    };\r\n}\r\nelse {\r\n    browser = {\r\n        getBase: value(''),\r\n        pushState: noop,\r\n        replaceState: noop,\r\n        addPopstateListener: noop,\r\n        getLocation: value(''),\r\n        getState: value(null),\r\n        getHash: value('')\r\n    };\r\n}\r\nvar safeBrowser = browser;\n\nvar defaultOptions = {\r\n    forceDeactivate: true,\r\n    useHash: false,\r\n    hashPrefix: '',\r\n    base: '',\r\n    mergeState: false,\r\n    preserveHash: true\r\n};\r\nvar source = 'popstate';\r\nfunction browserPluginFactory(opts, browser) {\r\n    if (browser === void 0) { browser = safeBrowser; }\r\n    var options = __assign(__assign({}, defaultOptions), opts);\r\n    var transitionOptions = {\r\n        forceDeactivate: options.forceDeactivate,\r\n        source: source\r\n    };\r\n    var removePopStateListener;\r\n    return function browserPlugin(router) {\r\n        var routerOptions = router.getOptions();\r\n        var routerStart = router.start;\r\n        router.buildUrl = function (route, params) {\r\n            var base = options.base || '';\r\n            var prefix = options.useHash ? \"#\" + options.hashPrefix : '';\r\n            var path = router.buildPath(route, params);\r\n            return base + prefix + path;\r\n        };\r\n        var urlToPath = function (url) {\r\n            var match = url.match(/^(?:http|https):\\/\\/(?:[0-9a-z_\\-.:]+?)(?=\\/)(.*)$/);\r\n            var path = match ? match[1] : url;\r\n            var pathParts = path.match(/^(.+?)(#.+?)?(\\?.+)?$/);\r\n            if (!pathParts)\r\n                throw new Error(\"[router5] Could not parse url \" + url);\r\n            var pathname = pathParts[1];\r\n            var hash = pathParts[2] || '';\r\n            var search = pathParts[3] || '';\r\n            return ((options.useHash\r\n                ? hash.replace(new RegExp('^#' + options.hashPrefix), '')\r\n                : options.base\r\n                    ? pathname.replace(new RegExp('^' + options.base), '')\r\n                    : pathname) + search);\r\n        };\r\n        router.matchUrl = function (url) { return router.matchPath(urlToPath(url)); };\r\n        router.start = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            if (args.length === 0 || typeof args[0] === 'function') {\r\n                routerStart.apply(void 0, __spreadArrays([browser.getLocation(options)], args));\r\n            }\r\n            else {\r\n                routerStart.apply(void 0, args);\r\n            }\r\n            return router;\r\n        };\r\n        router.replaceHistoryState = function (name, params, title) {\r\n            if (params === void 0) { params = {}; }\r\n            if (title === void 0) { title = ''; }\r\n            var route = router.buildState(name, params);\r\n            var state = router.makeState(route.name, route.params, router.buildPath(route.name, route.params), { params: route.meta });\r\n            var url = router.buildUrl(name, params);\r\n            router.lastKnownState = state;\r\n            browser.replaceState(state, title, url);\r\n        };\r\n        function updateBrowserState(state, url, replace) {\r\n            var trimmedState = state\r\n                ? {\r\n                    meta: state.meta,\r\n                    name: state.name,\r\n                    params: state.params,\r\n                    path: state.path\r\n                }\r\n                : state;\r\n            var finalState = options.mergeState === true\r\n                ? __assign(__assign({}, browser.getState()), trimmedState) : trimmedState;\r\n            if (replace)\r\n                browser.replaceState(finalState, '', url);\r\n            else\r\n                browser.pushState(finalState, '', url);\r\n        }\r\n        function onPopState(evt) {\r\n            var routerState = router.getState();\r\n            // Do nothing if no state or if last know state is poped state (it should never happen)\r\n            var newState = !evt.state || !evt.state.name;\r\n            var state = newState\r\n                ? router.matchPath(browser.getLocation(options), source)\r\n                : router.makeState(evt.state.name, evt.state.params, evt.state.path, __assign(__assign({}, evt.state.meta), { source: source }), evt.state.meta.id);\r\n            var defaultRoute = routerOptions.defaultRoute, defaultParams = routerOptions.defaultParams;\r\n            if (!state) {\r\n                // If current state is already the default route, we will have a double entry\r\n                // Navigating back and forth will emit SAME_STATES error\r\n                defaultRoute &&\r\n                    router.navigateToDefault(__assign(__assign({}, transitionOptions), { reload: true, replace: true }));\r\n                return;\r\n            }\r\n            if (routerState &&\r\n                router.areStatesEqual(state, routerState, false)) {\r\n                return;\r\n            }\r\n            router.transitionToState(state, routerState, transitionOptions, function (err, toState) {\r\n                if (err) {\r\n                    if (err.redirect) {\r\n                        var _a = err.redirect, name_1 = _a.name, params = _a.params;\r\n                        router.navigate(name_1, params, __assign(__assign({}, transitionOptions), { replace: true, force: true, redirected: true }));\r\n                    }\r\n                    else if (err.code === errorCodes.CANNOT_DEACTIVATE) {\r\n                        var url = router.buildUrl(routerState.name, routerState.params);\r\n                        if (!newState) {\r\n                            // Keep history state unchanged but use current URL\r\n                            updateBrowserState(state, url, true);\r\n                        }\r\n                        // else do nothing or history will be messed up\r\n                        // TODO: history.back()?\r\n                    }\r\n                    else {\r\n                        // Force navigation to default state\r\n                        defaultRoute &&\r\n                            router.navigate(defaultRoute, defaultParams, __assign(__assign({}, transitionOptions), { reload: true, replace: true }));\r\n                    }\r\n                }\r\n                else {\r\n                    router.invokeEventListeners(constants.TRANSITION_SUCCESS, toState, routerState, { replace: true });\r\n                }\r\n            });\r\n        }\r\n        function onStart() {\r\n            if (options.useHash && !options.base) {\r\n                // Guess base\r\n                options.base = browser.getBase();\r\n            }\r\n            removePopStateListener = browser.addPopstateListener(onPopState, options);\r\n        }\r\n        function teardown() {\r\n            if (removePopStateListener) {\r\n                removePopStateListener();\r\n                removePopStateListener = undefined;\r\n            }\r\n        }\r\n        function onTransitionSuccess(toState, fromState, opts) {\r\n            var historyState = browser.getState();\r\n            var hasState = historyState &&\r\n                historyState.meta &&\r\n                historyState.name &&\r\n                historyState.params;\r\n            var statesAreEqual = fromState && router.areStatesEqual(fromState, toState, false);\r\n            var replace = opts.replace || !hasState || statesAreEqual;\r\n            var url = router.buildUrl(toState.name, toState.params);\r\n            if (fromState === null &&\r\n                options.useHash === false &&\r\n                options.preserveHash === true) {\r\n                url += browser.getHash();\r\n            }\r\n            updateBrowserState(toState, url, replace);\r\n        }\r\n        return {\r\n            onStart: onStart,\r\n            onStop: teardown,\r\n            teardown: teardown,\r\n            onTransitionSuccess: onTransitionSuccess,\r\n            onPopState: onPopState\r\n        };\r\n    };\r\n}\n\nexport default browserPluginFactory;\n","import createSolidRouter, { useRoute } from \"solid-typefu-router5\";\nimport browserPluginFactory from \"router5-plugin-browser\";\nimport { render } from \"solid-js/dom\";\nimport createRouter from \"router5\";\nimport { createMemo, For } from \"solid-js\";\n\nconst routes = [\n  {\n    name: \"foo\",\n    path: \"/foo\",\n    children: [\n      {\n        name: \"child1\",\n        path: \"/child1/:id1\",\n        children: [{ name: \"child2\", path: \"/child2/:id2\" }],\n      },\n    ],\n  },\n  {\n    name: \"bar\",\n    path: \"/bar/:id\",\n  },\n  {\n    name: \"baz\",\n    path: \"/baz/:id\",\n  },\n  { name: \"bar.asdf\", path: \"/bar/asdf\" },\n] as const;\n\nconst { Link, Router, Provider: RouterProvider } = createSolidRouter(routes, {\n  createRouter5: (routes) => {\n    const router = createRouter(routes, { allowNotFound: true });\n    router.usePlugin(browserPluginFactory({ useHash: false }));\n    return router;\n  },\n});\n\nconst Wrapper = (props: { children?: JSX.Element }) => (\n  <>\n    <div style={{ background: \"lightgrey\", padding: \"0.5rem\" }}>\n      <h3>Navbar</h3>\n      <ul>\n        <li>\n          <Link nav to=\"foo\">\n            foo\n          </Link>\n        </li>\n        <li>\n          <Link nav to=\"bar\" params={{ id: 1 }}>\n            bar1\n          </Link>\n        </li>\n        <li>\n          <Link nav to=\"bar\" params={{ id: 2 }}>\n            bar2\n          </Link>\n        </li>\n        <li>\n          <Link nav to=\"baz\" params={{ id: \"asdfasdf\" }}>\n            baz asdfasdf\n          </Link>\n        </li>\n      </ul>\n    </div>\n    <div style={{ height: \"1rem\" }} />\n    <div style={{ display: \"flex\", \"flex-direction\": \"row\" }}>\n      <div\n        style={{ background: \"lightblue\", \"flex-grow\": 1, padding: \"0.5rem\" }}\n      >\n        {props.children}\n      </div>\n      <div style={{ width: \"1rem\" }} />\n      <div\n        style={{ width: \"20em\", background: \"lightpink\", padding: \"0.5rem\" }}\n      >\n        <code>\n          <pre>{JSON.stringify(useRoute()(), null, 2)}</pre>\n        </code>\n      </div>\n    </div>\n  </>\n);\n\nconst Foo = (props: { children?: JSX.Element }) => (\n  <div>\n    <h1>foo</h1>\n    <Link nav to=\"foo.child1\" params={{ id1: 1 }}>\n      foo.child1\n    </Link>\n    {props.children}\n  </div>\n);\n\nconst Child2List = () => {\n  const route = useRoute();\n  // in reality usePromise(() => api.foo.child1.getChild2s(route().params.id))\n  const availId2s = createMemo<number[]>(() => {\n    const here = route();\n    if (typeof here.params.id1 !== \"number\") {\n      console.warn(\"id1 was undefined\");\n    }\n    return [1, 2, 3];\n  });\n  return (\n    <>\n      <h3>List of foo.child1.child2 links</h3>\n      <ul>\n        <For each={availId2s()}>\n          {(id2) => (\n            <li>\n              <Link\n                to=\"foo.child1.child2\"\n                params={{ id1: route().params.id1, id2 }}\n              >\n                foo.child1.child2\n              </Link>\n            </li>\n          )}\n        </For>\n      </ul>\n    </>\n  );\n};\n\nfunction Baz(props: { id: string }) {\n  return <code>id = {props.id}</code>;\n}\n\nconst App = () => {\n  const route = useRoute();\n  return (\n    <>\n      <Router assume=\"foo\">\n        {{\n          render: (p) => <>child1 {p.children}</>,\n          fallback: () => \"... no foo.child1!\",\n          child1: { render: () => \"child1\" },\n        }}\n      </Router>\n      <Router>\n        {{\n          render: Wrapper,\n          bar: {\n            render: () => \"bar goes here\",\n            asdf: { render: () => \"bar.asdf!\" },\n          },\n          baz: (owned) =>\n            owned({\n              render: Baz,\n              props: {\n                id: () => route().params.id,\n              },\n            }),\n          foo: {\n            render: Foo,\n            child1: {\n              render: (p) => <div>{p.children}</div>,\n              fallback: Child2List,\n              child2: {\n                render: () => (\n                  <>\n                    <h3>foo.child1.child2</h3>\n                    hello world!\n                  </>\n                ),\n              },\n            },\n          },\n        }}\n      </Router>\n    </>\n  );\n};\n\nrender(\n  () => (\n    <>\n      <style>\n        {`\n        html, body { font-family: 'Sedgwick Ave' }\n        .is-active { border: 2px solid red; box-shadow: 0 0 30px blue }\n        `}\n      </style>\n      <RouterProvider>\n        <App />\n      </RouterProvider>\n    </>\n  ),\n  document.getElementById(\"app\") as any\n);\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}