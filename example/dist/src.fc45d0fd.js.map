{"version":3,"sources":["node_modules/solid-js/dist/solid.js","node_modules/solid-js/web/dist/web.js","../src/context.ts","../src/components/Link.tsx","../src/components/MatchRoute.tsx","../src/components/RouteTree.tsx","../src/index.tsx","node_modules/tslib/tslib.es6.js","../src/encode.ts","../src/utils.ts","../src/index.ts","../src/encoding.ts","../src/rules.ts","../src/tokeniser.ts","../src/Path.ts","../src/helpers.ts","../src/matchChildren.ts","../src/sortChildren.ts","../src/RouteNode.ts","node_modules/symbol-observable/es/ponyfill.js","node_modules/symbol-observable/es/index.js","node_modules/router5-transition-path/dist/index.es.js","node_modules/router5/dist/index.es.js","node_modules/router5-plugin-browser/dist/index.es.js","src/index.tsx","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["taskIdCounter","isCallbackScheduled","isPerformingWork","taskQueue","currentTask","shouldYieldToHost","yieldInterval","deadline","maxYieldInterval","scheduleCallback","scheduledCallback","maxSigned31BitInt","setupScheduler","window","MessageChannel","channel","port","port2","postMessage","port1","onmessage","currentTime","performance","now","hasTimeRemaining","hasMoreWork","error","_callback","setTimeout","navigator","scheduling","isInputPending","enqueue","task","findIndex","m","n","length","k","cmp","expirationTime","splice","requestCallback","fn","options","startTime","timeout","newTask","id","flushWork","cancelCallback","initialTime","workLoop","callback","didUserCallbackTimeout","shift","equalFn","a","b","ERROR","runEffects","runQueue","NOTPENDING","STALE","PENDING","UNOWNED","owned","cleanups","context","owner","transPending","setTransPending","createSignal","Owner","Listener","Pending","Updates","Effects","Transition","ExecCount","createRoot","detachedOwner","listener","root","attached","result","runUpdates","cleanNode","value","areEqual","s","observers","observerSlots","pending","comparator","undefined","readSignal","bind","writeSignal","createComputed","updateComputation","createComputation","createRenderEffect","createEffect","globalThis","_$HYDRATION","asyncSSR","runUserEffects","c","SuspenseContext","lookup","suspense","user","push","resumeEffects","e","running","apply","createMemo","state","createDeferred","source","t","timeoutMs","deferred","setDeferred","node","createSelector","subs","Map","p","v","key","keys","get","pure","set","onCleanup","delete","batch","q","i","data","call","useTransition","sources","Set","effects","promises","disposed","untrack","on","args","pop","deps","isArray","prev","prevResult","onMount","onError","Symbol","getListener","getContextOwner","serializeGraph","createContext","defaultValue","Provider","createProvider","useContext","getSuspenseContext","createResource","init","loading","setLoading","contexts","h","err","pr","loadEnd","has","size","completeLoad","name","resources","decrement","clear","read","resolved","add","increment","load","hydrating","registry","loadResource","notStreamed","then","Object","defineProperty","updates","lookDownstream","sSlot","sourceSlots","tValue","isComp","o","markUpstream","Error","time","runComputation","nextValue","handleError","updatedAt","tOwned","runTop","top","inFallback","runningTransition","wait","forEach","len","queue","userLength","resume","index","obs","reset","fns","f","resolveChildren","children","Array","results","provider","props","$RAW","$NODE","$PROXY","$NAME","wrap","processProps","traps","Proxy","proxyTraps","desc","getOwnPropertyDescriptors","l","prop","og","isWrappable","obj","__proto__","prototype","unwrap","item","skipGetters","unwrapped","isFrozen","slice","assign","getDataNodes","target","nodes","proxyDescriptor","property","Reflect","getOwnPropertyDescriptor","writable","receiver","wrappable","hasOwnProperty","_","deleteProperty","setProperty","force","notify","mergeState","updatePath","current","path","traversed","part","partType","concat","from","to","by","createState","unwrappedState","wrappedState","setState","createResourceNode","r","createResourceState","loadingTraps","resourceTraps","loadState","resolver","proxyTraps$1","createMutable","applyState","parent","merge","previous","j","start","end","newEnd","newIndicesNext","keyVal","Math","min","temp","newIndices","targetKeys","previousKeys","reconcile","setterTraps","produce","FALLBACK","mapArray","list","mapFn","items","mapped","disposers","indexes","ctx","newItems","newLen","tempdisposers","tempIndexes","fallback","disposer","mapper","indexArray","signals","createComponent","Comp","assignProps","descriptors","defineProperties","splitProps","split","clone","map","lazy","nextHydrateContext","mod","default","setHydrateContext","hydration","count","For","each","Index","Show","childDesc","callFn","condition","when","Switch","conditions","evalConditions","keyed","Match","ErrorBoundary","errored","setErrored","fallbackDesc","SuspenseListContext","trackSuspense","awaitSuspense","active","trigger","Promise","resolve","res","SuspenseList","suspenseSetter","showContent","showFallback","listContext","setFallback","register","comp","showingContent","showingFallback","reveal","revealOrder","tail","visibleContent","visibleFallback","reverse","all","every","stop","next","Suspense","counter","store","queueMicrotask","rendered","booleans","Properties","ChildProperties","Aliases","className","htmlFor","NonComposedEvents","SVGElements","SVGNamespace","xlink","xml","memo","equal","dynamicProperty","src","enumerable","getHydrationKey","reconcileArrays","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","nextSibling","insertBefore","removeChild","sequence","replaceChild","eventRegistry","render","code","element","dispose","insert","firstChild","textContent","template","html","check","isSVG","document","createElement","innerHTML","content","delegateEvents","eventNames","addEventListener","eventHandler","clearDelegatedEvents","removeEventListener","setAttribute","removeAttribute","setAttributeNS","namespace","removeAttributeNS","classList","classKeys","classValue","classNames","nameLen","toggle","style","nodeStyle","cssText","removeProperty","spread","accessor","skipChildren","spreadExpression","marker","initial","insertExpression","prevProps","isCE","isProp","isChildProp","eventName","lc","toLowerCase","nodeName","includes","toPropertyName","ns","indexOf","hydrate","templates","querySelectorAll","reduce","getAttribute","childNodes","getNextElement","isSSR","el","cloneNode","completed","getNextMarker","nodeType","nodeValue","runHydrationEvents","events","replace","w","toUpperCase","type","composedPath","configurable","handler","cancelBubble","host","Node","unwrapArray","multi","toString","createTextNode","cleanChildren","array","normalizeIncomingArray","appendNodes","appendChild","console","warn","normalized","dynamic","idx","replacement","inserted","isParent","renderToString","renderToNodeStream","renderToWebStream","ssr","resolveSSRNode","ssrClassList","ssrStyle","ssrSpread","ssrBoolean","escape","generateHydrationScript","isServer","Portal","useShadow","mount","body","renderPortal","HTMLHeadElement","container","createElementNS","renderRoot","attachShadow","mode","ref","Dynamic","others","component","Context","useRoute","route","paramsEq","String","useIsActive","link","params","paramsIsEqual","getIsActiveByName","isActive","here","startsWith","Link","router","router5","config","linkProps","innerProps","navActiveClass","back","forward","navIgnoreParams","alwaysInactive","getHref","buildPath","getClassList","cls","onClick","ev","preventDefault","navigate","blur","display","disabled","MatchContext","doesMatch","suffix","prefix","exact","SwitchRoutes","getIndex","same","ix","ShowRoute","getMatch","createGetMatch","MatchRoute","RouteStateMachine","tree","_assumed","traverse","RenderHere","passthru","RenderFallback","nofallback","routes","child","createSolidRouter","unsubs","createRouter5","Router","assume","initialState","getState","nameArray","previousRoute","subscribe","rs","onStart","unsub","extendStatics","d","setPrototypeOf","__extends","__","constructor","create","__assign","arguments","__rest","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","adopt","reject","fulfilled","step","rejected","done","__generator","label","sent","trys","ops","y","g","verb","iterator","op","TypeError","__createBinding","k2","__exportStar","exports","__values","__read","ar","__spread","__spreadArrays","il","jl","__await","__asyncGenerator","asyncIterator","settle","fulfill","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","__esModule","__importDefault","__classPrivateFieldGet","privateMap","__classPrivateFieldSet","makeOptions","opts","arrayFormat","booleanFormat","nullFormat","encodeValue","encodeURIComponent","decodeValue","decodeURIComponent","encodeBoolean","encodedValue","encodeNull","getNameEncoder","encodeArray","arr","encodeName","val","join","encode","decode","getSearch","pos","isSerialisable","parseName","bracketPosition","hasBrackets","parse","param","_a","rawName","_b","currentValue","decodedValue","build","filter","paramName","Boolean","omit","paramsToOmit","searchPart","querystring","removedParams","kept","removed","keep","paramsToKeep","keptParams","acc","chunk","excludeSubDelimiters","encodeURIComponentExcludingSubDelims","segment","match","encodingMethods","uri","encodeURI","uriComponent","none","legacy","decodingMethods","decodeURI","encodeParam","encoding","isSpatParam","encoder","decodeParam","defaultOrConstrained","rules","pattern","regex","RegExp","tokenise","str","tokens","matched","some","rule","otherVal","Function","substr","exists","optTrailingSlash","strictTrailingSlash","upToDelimiter","delimiter","test","appendQueryParam","existingVal","defaultOptions","urlParamsEncoding","hasUrlParams","hasSpatParam","hasMatrixParams","hasQueryParams","spatParams","getParams","urlParams","queryParams","Path","caseSensitive","urlTest","parseQueryParams","unexpectedQueryParams","_this","isQueryParam","delimited","ignoreConstraints","ignoreSearch","encodedUrlParams","missingParameters","constraintsPassed","base","searchParams","sparams","buildQueryParams","predicate","getMetaFromSegments","segments","accName","meta","parser","allParams","buildStateFromMatch","buildPathFromSegments","queryParamsMode","trailingSlashMode","nonSearchParams","segments_1","_i","extraParams","searchParamsObject","segmentPath","absolute","finalPath","getPathFromSegments","getPath","matchChildren","pathSegment","currentMatch","consumedBefore","_c","strongMatching","_d","isRoot","remainingPath","partialTest","consumedPath","remainingQueryParams_1","getNonAbsoluteChildren","nodes_1","sortChildren","originalChildren","sort","sortPredicate","left","right","leftPath","rightPath","leftSegments","rightSegments","leftParamsCount","rightParamsCount","leftParamLength","rightParamLength","childRoutes","checkParents","onAdd","finalSort","sortDescendants","RouteNode","getParentSegments","cb","setParent","addRouteNode","routeNode","fullName","routeName","segmentsByName","getSegmentsByName","getSegmentsMatchingPath","matchedSegments","firstSegmentParams","lastSegment","lastSegmentSlashChild","findSlashChild","names","hasParentsParams","hasParams","absoluteChildren","findAbsoluteChildren","slashChildren","findSegmentByName","filteredRoutes","topLevelNodes","startingNodes","finalMatch","symbolObservablePonyfill","observable","self","global","module","nameToIDs","ids","hasMetaParams","extractSegmentParams","transitionPath","toState","fromState","toStateOptions","fromStateIds","toStateIds","maxI","pointOfDifference","_loop_1","leftParams","rightParams","different","state_1","reload","toDeactivate","toActivate","intersection","shouldUpdateNode","fromSate","toDeactivateReversed","matching","activatedSegment","sameLevelDeactivatedSegment","autoCleanUp","allowNotFound","rewritePathOnMatch","withOptions","routerOptions","getOptions","setOption","option","errorCodes","ROUTER_NOT_STARTED","NO_START_PATH_OR_STATE","ROUTER_ALREADY_STARTED","ROUTE_NOT_FOUND","SAME_STATES","CANNOT_DEACTIVATE","CANNOT_ACTIVATE","TRANSITION_ERR","TRANSITION_CANCELLED","constants","UNKNOWN_ROUTE","ROUTER_START","ROUTER_STOP","TRANSITION_START","TRANSITION_CANCEL","TRANSITION_SUCCESS","TRANSITION_ERROR","withRoutes","fromRoute","toRoute","forwardMap","rootNode","onRouteAdded","canActivate","forwardTo","decodeParams","decoders","encodeParams","encoders","defaultParams","addNode","canActivateHandler","strictEquality","ignoreQueryParams","activeState","areStatesEqual","makeState","areStatesDescendants","paramsWithDefault","encodedParams","matchPath","name_1","decodedParams","forwardState","routeParams","builtPath","setRootPath","rootPath","setPath","withDependencies","dependencies","routerDependencies","setDependency","dependencyName","dependency","setDependencies","getDependencies","getInjectables","executeFactory","factoryFunction","withState","stateId","routerState","forceId","makeNotFoundState","state1","state2","getUrlParams","state1Params","state2Params","parentState","childState","buildState","eventsMap","onStop","onTransitionSuccess","onTransitionStart","onTransitionError","onTransitionCancel","withPlugins","routerPlugins","getPlugins","usePlugin","plugins","removePluginFns","plugin","startPlugin","removePlugin","appliedPlugin","removeEventListeners","methodName","removeListener","teardown","withMiddleware","middlewareFactories","middlewareFunctions","useMiddleware","middlewares","middleware","middlewareFunction","clearMiddleware","getMiddlewareFactories","getMiddlewareFunctions","withObservability","callbacks","invokeEventListeners","_cb","isObject","finalListener","unsubscribeHandler","unsubscribe","observer","$$observable","functions","isCancelled","errorKey","remainingFunctions","isState","hasStateChanged","mergeStates","processFn","stepFn","errBase","_done","newState","resVal","stack","promiseError","isMapped","transition","cancelled","getLifecycleFunctions","canDeactivateFunctions","canActivateFunctions","cancel","activeSegments_1","clearCanDeactivate","makeError","isUnknownRoute","asyncBase","canDeactivate","forceDeactivate","canDeactivateFunctionMap","fnMap","canActivateFunctionMap","pipeline","noop","withNavigation","cancelCurrentTransition","navigateToDefault","defaultRoute","lastArg","isStarted","sameStates","skipTransition","transitionToState","redirect","params_1","redirected","noop$1","withRouterLifecycle","started","startPathOrState","startPath","startState","invokeErrCb","navigateToDefault_1","redirect_1","toFunction","withRouteLifecycle","canDeactivateFactories","canActivateFactories","getLifecycleFactories","canDeactivateHandler","factory","pipe","arg","createRouter","cloneRouter","clonedRouter","isBrowser","history","getBase","location","pathname","supportsPopStateOnHashChange","userAgent","pushState","title","replaceState","addPopstateListener","shouldAddHashChangeListener","useHash","getLocation","hash","hashPrefix","correctedPath","safelyEncodePath","search","getHash","browser","safeBrowser","preserveHash","browserPluginFactory","transitionOptions","removePopStateListener","browserPlugin","routerStart","buildUrl","urlToPath","url","pathParts","matchUrl","replaceHistoryState","lastKnownState","updateBrowserState","trimmedState","finalState","onPopState","evt","historyState","hasState","statesAreEqual","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","event","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","close","onclose","log","removeErrorOverlay","message","overlay","createErrorOverlay","getElementById","remove","stackTrace","innerText","getParents","modules","parents","dep","cached","cache"],"mappings":"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","file":"src.fc45d0fd.js","sourceRoot":"..","sourcesContent":["let taskIdCounter = 1,\n    isCallbackScheduled = false,\n    isPerformingWork = false,\n    taskQueue = [],\n    currentTask = null,\n    shouldYieldToHost = null,\n    yieldInterval = 5,\n    deadline = 0,\n    maxYieldInterval = 300,\n    scheduleCallback = null,\n    scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  if (window && window.MessageChannel) {\n    const channel = new MessageChannel(),\n          port = channel.port2;\n    scheduleCallback = () => port.postMessage(null);\n    channel.port1.onmessage = () => {\n      if (scheduledCallback !== null) {\n        const currentTime = performance.now();\n        deadline = currentTime + yieldInterval;\n        const hasTimeRemaining = true;\n        try {\n          const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n          if (!hasMoreWork) {\n            scheduledCallback = null;\n          } else port.postMessage(null);\n        } catch (error) {\n          port.postMessage(null);\n          throw error;\n        }\n      }\n    };\n  } else {\n    let _callback;\n    scheduleCallback = () => {\n      if (!_callback) {\n        _callback = scheduledCallback;\n        setTimeout(() => {\n          const currentTime = performance.now();\n          deadline = currentTime + yieldInterval;\n          const hasMoreWork = _callback(true, currentTime);\n          _callback = null;\n          if (hasMoreWork) scheduleCallback();\n        }, 0);\n      }\n    };\n  }\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      let k = n + m >> 1;\n      let cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n      timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst equalFn = (a, b) => a === b;\nlet ERROR = null;\nlet runEffects = runQueue;\nconst NOTPENDING = {};\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst [transPending, setTransPending] = createSignal(false, true);\nvar Owner = null;\nvar Listener = null;\nlet Pending = null;\nlet Updates = null;\nlet Effects = null;\nlet Transition = null;\nlet ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  detachedOwner && (Owner = detachedOwner);\n  const listener = Listener,\n        owner = Owner,\n        root = fn.length === 0 && !false ? UNOWNED : {\n    owned: null,\n    cleanups: null,\n    context: null,\n    owner,\n    attached: !!detachedOwner\n  };\n  Owner = root;\n  Listener = null;\n  let result;\n  try {\n    runUpdates(() => result = fn(() => cleanNode(root)), true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  return result;\n}\nfunction createSignal(value, areEqual, options) {\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    pending: NOTPENDING,\n    comparator: areEqual ? typeof areEqual === \"function\" ? areEqual : equalFn : undefined\n  };\n  return [readSignal.bind(s), writeSignal.bind(s)];\n}\nfunction createComputed(fn, value) {\n  updateComputation(createComputation(fn, value, true));\n}\nfunction createRenderEffect(fn, value) {\n  updateComputation(createComputation(fn, value, false));\n}\nfunction createEffect(fn, value) {\n  if (globalThis._$HYDRATION && globalThis._$HYDRATION.asyncSSR) return;\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false),\n        s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  c.user = true;\n  Effects && Effects.push(c);\n}\nfunction resumeEffects(e) {\n  Transition && (Transition.running = true);\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createMemo(fn, value, areEqual) {\n  const c = createComputation(fn, value, true);\n  c.pending = NOTPENDING;\n  c.observers = null;\n  c.observerSlots = null;\n  c.state = 0;\n  c.comparator = areEqual ? typeof areEqual === \"function\" ? areEqual : equalFn : undefined;\n  updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createDeferred(source, options) {\n  let t,\n      timeout = options ? options.timeoutMs : undefined;\n  const [deferred, setDeferred] = createSignal();\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  updateComputation(node);\n  setDeferred(node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn) {\n  let subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const key of subs.keys()) if (fn(key, v) || p && fn(key, p)) {\n      const c = subs.get(key);\n      c.state = STALE;\n      if (c.pure) Updates.push(c);else Effects.push(c);\n    }\n    return v;\n  }, undefined, true);\n  updateComputation(node);\n  return key => {\n    if (Listener) {\n      subs.set(key, Listener);\n      onCleanup(() => subs.delete(key));\n    }\n    return fn(key, node.value);\n  };\n}\nfunction batch(fn) {\n  if (Pending) return fn();\n  const q = Pending = [],\n        result = fn();\n  Pending = null;\n  runUpdates(() => {\n    for (let i = 0; i < q.length; i += 1) {\n      const data = q[i];\n      if (data.pending !== NOTPENDING) {\n        const pending = data.pending;\n        data.pending = NOTPENDING;\n        writeSignal.call(data, pending);\n      }\n    }\n  }, false);\n  return result;\n}\nfunction useTransition() {\n  return [transPending, fn => {\n    if (SuspenseContext) {\n      Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        running: true\n      });\n      Transition.running = true;\n    }\n    batch(fn);\n  }];\n}\nfunction untrack(fn) {\n  let result,\n      listener = Listener;\n  Listener = null;\n  result = fn();\n  Listener = listener;\n  return result;\n}\nfunction on(...args) {\n  const fn = args.pop();\n  let deps;\n  let isArray = true;\n  let prev;\n  if (args.length < 2) {\n    deps = args[0];\n    isArray = false;\n  } else deps = args;\n  return prevResult => {\n    let value;\n    if (isArray) {\n      value = [];\n      if (!prev) prev = [];\n      for (let i = 0; i < deps.length; i++) value.push(deps[i]());\n    } else value = deps();\n    const result = untrack(() => fn(value, prev, prevResult));\n    prev = value;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null) Owner.context = {\n    [ERROR]: [fn]\n  };else if (!Owner.context[ERROR]) Owner.context[ERROR] = [fn];else Owner.context[ERROR].push(fn);\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getContextOwner() {\n  return Owner;\n}\nfunction serializeGraph(owner) {\n  return {};\n}\nfunction createContext(defaultValue) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  return lookup(Owner, context.id) || context.defaultValue;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext({}));\n}\nfunction createResource(init, options = {}) {\n  const [s, set] = createSignal(init),\n        [loading, setLoading] = createSignal(false, true),\n        contexts = new Set(),\n        h = globalThis._$HYDRATION || {};\n  let err = null,\n      pr = null;\n  function loadEnd(p, v, e) {\n    if (pr === p) {\n      err = e;\n      pr = null;\n      if (Transition && Transition.promises.has(p)) {\n        Transition.promises.delete(p);\n        runUpdates(() => {\n          Transition.running = true;\n          if (!Transition.promises.size) {\n            Effects.push.apply(Effects, Transition.effects);\n            Transition.effects = [];\n          }\n          completeLoad(v);\n        }, false);\n      } else completeLoad(v);\n    }\n    return v;\n  }\n  function completeLoad(v) {\n    batch(() => {\n      set(v);\n      if (h.asyncSSR && options.name) h.resources[options.name] = v;\n      setLoading(false);\n      for (let c of contexts.keys()) c.decrement();\n      contexts.clear();\n    });\n  }\n  function read() {\n    const c = SuspenseContext && lookup(Owner, SuspenseContext.id),\n          v = s();\n    if (err) throw err;\n    if (Listener && !Listener.user && c) {\n      if (!Listener.pure) createComputed(() => {\n        s();\n        if (pr && c.resolved && Transition) Transition.promises.add(pr);\n      });\n      if (pr) {\n        if (Listener.pure && c.resolved && Transition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n          c.increment();\n          contexts.add(c);\n        }\n      }\n    }\n    return v;\n  }\n  function load(fn) {\n    err = null;\n    let p;\n    const hydrating = h.context && !!h.context.registry;\n    if (hydrating) {\n      if (h.loadResource && !options.notStreamed) {\n        fn = h.loadResource;\n      } else if (options.name && h.resources && options.name in h.resources) {\n        fn = () => {\n          const data = h.resources[options.name];\n          delete h.resources[options.name];\n          return data;\n        };\n      }\n    }\n    p = fn();\n    Transition && pr && Transition.promises.delete(pr);\n    if (typeof p !== \"object\" || !(\"then\" in p)) {\n      pr = null;\n      completeLoad(p);\n      return p;\n    }\n    pr = p;\n    batch(() => {\n      setLoading(true);\n      set(untrack(s));\n    });\n    return p.then(v => loadEnd(p, v), e => loadEnd(p, s(), e));\n  }\n  Object.defineProperty(read, \"loading\", {\n    get() {\n      return loading();\n    }\n  });\n  return [read, load];\n}\nfunction readSignal() {\n  if (this.state && this.sources) {\n    const updates = Updates;\n    Updates = null;\n    this.state === STALE ? updateComputation(this) : lookDownstream(this);\n    Updates = updates;\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (Transition && Transition.running && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(value, isComp) {\n  if (this.comparator) {\n    if (Transition && Transition.running && Transition.sources.has(this)) {\n      if (this.comparator(this.tValue, value)) return value;\n    } else if (this.comparator(this.value, value)) return value;\n  }\n  if (Pending) {\n    if (this.pending === NOTPENDING) Pending.push(this);\n    this.pending = value;\n    return value;\n  }\n  if (Transition) {\n    if (Transition.running || !isComp && Transition.sources.has(this)) {\n      Transition.sources.add(this);\n      this.tValue = value;\n    }\n    if (!Transition.running) this.value = value;\n  } else this.value = value;\n  if (this.observers && (!Updates || this.observers.length)) {\n    runUpdates(() => {\n      for (let i = 0; i < this.observers.length; i += 1) {\n        const o = this.observers[i];\n        if (Transition && Transition.running && Transition.disposed.has(o)) continue;\n        if (o.observers && o.state !== PENDING) markUpstream(o);\n        o.state = STALE;\n        if (o.pure) Updates.push(o);else Effects.push(o);\n      }\n      if (Updates.length > 10e5) {\n        Updates = [];\n        throw new Error(\"Potential Infinite Loop Detected.\");\n      }\n    }, false);\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n        listener = Listener,\n        time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    Transition.running = true;\n    runComputation(node, node.tValue, time);\n    Transition.running = false;\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.observers && node.observers.length) {\n      writeSignal.call(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure) {\n  const c = {\n    fn,\n    state: STALE,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: null,\n    pure\n  };\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  return c;\n}\nfunction runTop(node) {\n  let top = node.state === STALE && node,\n      pending;\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const runningTransition = Transition && Transition.running;\n  while ((node.fn || runningTransition && node.attached) && (node = node.owner)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (node.state === PENDING) pending = node;else if (node.state === STALE) {\n      top = node;\n      pending = undefined;\n    }\n  }\n  if (pending) {\n    const updates = Updates;\n    Updates = null;\n    lookDownstream(pending);\n    Updates = updates;\n    if (!top || top.state !== STALE) return;\n    if (runningTransition) {\n      node = top;\n      while ((node.fn || node.attached) && (node = node.owner)) {\n        if (Transition.disposed.has(node)) return;\n      }\n    }\n  }\n  top && updateComputation(top);\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    if (Updates) {\n      runQueue(Updates);\n      Updates = null;\n    }\n    if (wait) return;\n    if (Transition && Transition.running) {\n      Transition.running = false;\n      if (Transition.promises.size) {\n        Transition.effects.push.apply(Transition.effects, Effects);\n        Effects = null;\n        setTransPending(true);\n        return;\n      }\n      Transition.sources.forEach(v => {\n        v.value = v.tValue;\n        if (v.owned) {\n          for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n        }\n        if (v.tOwned) v.owned = v.tOwned;\n        delete v.tValue;\n        delete v.tOwned;\n      });\n      Transition = null;\n      setTransPending(false);\n    }\n    if (Effects.length) batch(() => {\n      runEffects(Effects);\n      Effects = null;\n    });else {\n      Effects = null;\n    }\n  }\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction runUserEffects(queue) {\n  let i,\n      userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  const resume = queue.length;\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n  for (i = resume; i < queue.length; i++) runTop(queue[i]);\n}\nfunction lookDownstream(node) {\n  node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      if (source.state === STALE) runTop(source);else if (source.state === PENDING) lookDownstream(source);\n    }\n  }\n}\nfunction markUpstream(node) {\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (!o.state) {\n      o.state = PENDING;\n      o.observers && markUpstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n            index = node.sourceSlots.pop(),\n            obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n              s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = 0; i < node.tOwned.length; i++) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = 0; i < node.owned.length; i++) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = 0; i < node.cleanups.length; i++) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  node.state = 0;\n  node.context = null;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.state = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction handleError(err) {\n  const fns = ERROR && lookup(Owner, ERROR);\n  if (!fns) throw err;\n  fns.forEach(f => f(err));\n}\nfunction lookup(owner, key) {\n  return owner && (owner.context && owner.context[key] || owner.owner && lookup(owner.owner, key));\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\") return createMemo(() => resolveChildren(children()));\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      let result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id) {\n  return function provider(props) {\n    return createMemo(() => {\n      Owner.context = {\n        [id]: props.value\n      };\n      return resolveChildren(props.children);\n    });\n  };\n}\n\nconst $RAW = Symbol(\"state-raw\"),\n      $NODE = Symbol(\"state-node\"),\n      $PROXY = Symbol(\"state-proxy\"),\n      $NAME = Symbol(\"state-name\");\nfunction wrap(value, name, processProps, traps) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: p = new Proxy(value, traps || proxyTraps)\n    });\n    if (processProps) {\n      let keys = Object.keys(value),\n          desc = Object.getOwnPropertyDescriptors(value);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const prop = keys[i];\n        if (desc[prop].get) {\n          const get = createMemo(desc[prop].get.bind(p));\n          Object.defineProperty(value, prop, {\n            get\n          });\n        }\n        if (desc[prop].set) {\n          const og = desc[prop].set,\n                set = v => batch(() => og.call(p, v));\n          Object.defineProperty(value, prop, {\n            set\n          });\n        }\n      }\n    }\n  }\n  return p;\n}\nfunction isWrappable(obj) {\n  return obj != null && typeof obj === \"object\" && (!obj.__proto__ || obj.__proto__ === Object.prototype || Array.isArray(obj));\n}\nfunction unwrap(item, skipGetters) {\n  let result, unwrapped, v, prop;\n  if (result = item != null && item[$RAW]) return result;\n  if (!isWrappable(item)) return item;\n  if (Array.isArray(item)) {\n    if (Object.isFrozen(item)) item = item.slice(0);\n    for (let i = 0, l = item.length; i < l; i++) {\n      v = item[i];\n      if ((unwrapped = unwrap(v, skipGetters)) !== v) item[i] = unwrapped;\n    }\n  } else {\n    if (Object.isFrozen(item)) item = Object.assign({}, item);\n    let keys = Object.keys(item),\n        desc = skipGetters && Object.getOwnPropertyDescriptors(item);\n    for (let i = 0, l = keys.length; i < l; i++) {\n      prop = keys[i];\n      if (skipGetters && desc[prop].get) continue;\n      v = item[prop];\n      if ((unwrapped = unwrap(v, skipGetters)) !== v) item[prop] = unwrapped;\n    }\n  }\n  return item;\n}\nfunction getDataNodes(target) {\n  let nodes = target[$NODE];\n  if (!nodes) Object.defineProperty(target, $NODE, {\n    value: nodes = {}\n  });\n  return nodes;\n}\nfunction proxyDescriptor(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (!desc || desc.get || property === $PROXY || property === $NODE || property === $NAME) return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[property];\n  return desc;\n}\nconst proxyTraps = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    const value = target[property];\n    if (property === $NODE || property === \"__proto__\") return value;\n    const wrappable = isWrappable(value);\n    if (Listener && (typeof value !== \"function\" || target.hasOwnProperty(property))) {\n      let nodes, node;\n      if (wrappable && (nodes = getDataNodes(value))) {\n        node = nodes._ || (nodes._ =  createSignal());\n        node[0]();\n      }\n      nodes = getDataNodes(target);\n      node = nodes[property] || (nodes[property] =  createSignal());\n      node[0]();\n    }\n    return wrappable ? wrap(value) : value;\n  },\n  set() {\n    return true;\n  },\n  deleteProperty() {\n    return true;\n  },\n  getOwnPropertyDescriptor: proxyDescriptor\n};\nfunction setProperty(state, property, value, force) {\n  if (!force && state[property] === value) return;\n  const notify = Array.isArray(state) || !(property in state);\n  if (value === undefined) {\n    delete state[property];\n  } else state[property] = value;\n  let nodes = getDataNodes(state),\n      node;\n  (node = nodes[property]) && node[1]();\n  notify && (node = nodes._) && node[1]();\n}\nfunction mergeState(state, value, force) {\n  const keys = Object.keys(value);\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    setProperty(state, key, value[key], force);\n  }\n}\nfunction updatePath(current, path, traversed = []) {\n  let part,\n      prev = current;\n  if (path.length > 1) {\n    part = path.shift();\n    const partType = typeof part,\n          isArray = Array.isArray(current);\n    if (Array.isArray(part)) {\n      for (let i = 0; i < part.length; i++) {\n        updatePath(current, [part[i]].concat(path), [part[i]].concat(traversed));\n      }\n      return;\n    } else if (isArray && partType === \"function\") {\n      for (let i = 0; i < current.length; i++) {\n        if (part(current[i], i)) updatePath(current, [i].concat(path), [i].concat(traversed));\n      }\n      return;\n    } else if (isArray && partType === \"object\") {\n      const {\n        from = 0,\n        to = current.length - 1,\n        by = 1\n      } = part;\n      for (let i = from; i <= to; i += by) {\n        updatePath(current, [i].concat(path), [i].concat(traversed));\n      }\n      return;\n    } else if (path.length > 1) {\n      updatePath(current[part], path, [part].concat(traversed));\n      return;\n    }\n    prev = current[part];\n    traversed = [part].concat(traversed);\n  }\n  let value = path[0];\n  if (typeof value === \"function\") {\n    value = value(prev, traversed);\n    if (value === prev) return;\n  }\n  if (part === undefined && value == undefined) return;\n  value = unwrap(value);\n  if (part === undefined || isWrappable(prev) && isWrappable(value) && !Array.isArray(value)) {\n    mergeState(prev, value);\n  } else setProperty(current, part, value);\n}\nfunction createState(state, options) {\n  const unwrappedState = unwrap(state || {}, true);\n  const wrappedState = wrap(unwrappedState, false , true);\n  function setState(...args) {\n    batch(() => updatePath(unwrappedState, args));\n  }\n  return [wrappedState, setState];\n}\n\nfunction createResourceNode(v, name) {\n  const node =  createSignal(),\n        [r, load] = createResource(v, {\n    name\n  });\n  return [() => (r(), node[0]()), node[1], load, () => r.loading];\n}\nfunction createResourceState(state, options = {}) {\n  const loadingTraps = {\n    get(nodes, property) {\n      const node = nodes[property] || (nodes[property] = createResourceNode(undefined, options.name && `${options.name}:${property}`));\n      return node[3]();\n    },\n    set() {\n      return true;\n    },\n    deleteProperty() {\n      return true;\n    }\n  };\n  const resourceTraps = {\n    get(target, property, receiver) {\n      if (property === $RAW) return target;\n      if (property === $PROXY) return receiver;\n      if (property === \"loading\") return new Proxy(getDataNodes(target), loadingTraps);\n      const value = target[property];\n      if (property === $NODE || property === \"__proto__\") return value;\n      const wrappable = isWrappable(value);\n      if (Listener && (typeof value !== \"function\" || target.hasOwnProperty(property))) {\n        let nodes, node;\n        if (wrappable && (nodes = getDataNodes(value))) {\n          node = nodes._ || (nodes._ =  createSignal());\n          node[0]();\n        }\n        nodes = getDataNodes(target);\n        node = nodes[property] || (nodes[property] = createResourceNode(value, `${options.name}:${property}`));\n        node[0]();\n      }\n      return wrappable ? wrap(value) : value;\n    },\n    set() {\n      return true;\n    },\n    deleteProperty() {\n      return true;\n    },\n    getOwnPropertyDescriptor: proxyDescriptor\n  };\n  const unwrappedState = unwrap(state || {}, true),\n        wrappedState = wrap(unwrappedState, false , true, resourceTraps);\n  function setState(...args) {\n    batch(() => updatePath(unwrappedState, args));\n  }\n  function loadState(v, r) {\n    const nodes = getDataNodes(unwrappedState),\n          keys = Object.keys(v);\n    for (let i = 0; i < keys.length; i++) {\n      const k = keys[i],\n            node = nodes[k] || (nodes[k] = createResourceNode(unwrappedState[k], `${options.name}:${k}`)),\n            resolver = v => (r ? setState(k, r(v)) : setProperty(unwrappedState, k, v), v),\n            p = node[2](v[k]);\n      typeof p === \"object\" && \"then\" in p ? p.then(resolver) : resolver(p);\n    }\n  }\n  return [wrappedState, loadState, setState];\n}\n\nconst proxyTraps$1 = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    const value = target[property];\n    if (property === $NODE || property === \"__proto__\") return value;\n    const wrappable = isWrappable(value);\n    if (Listener && (typeof value !== \"function\" || target.hasOwnProperty(property))) {\n      let nodes, node;\n      if (wrappable && (nodes = getDataNodes(value))) {\n        node = nodes._ || (nodes._ =  createSignal());\n        node[0]();\n      }\n      nodes = getDataNodes(target);\n      node = nodes[property] || (nodes[property] =  createSignal());\n      node[0]();\n    }\n    return wrappable ? wrap(value, false  , false, proxyTraps$1) : value;\n  },\n  set(target, property, value) {\n    setProperty(target, property, unwrap(value));\n    return true;\n  },\n  deleteProperty(target, property) {\n    setProperty(target, property, undefined);\n    return true;\n  },\n  getOwnPropertyDescriptor: proxyDescriptor\n};\nfunction createMutable(state, options) {\n  const unwrappedState = unwrap(state || {}, true);\n  const wrappedState = wrap(unwrappedState, false , true, proxyTraps$1);\n  return wrappedState;\n}\n\nfunction applyState(target, parent, property, merge, key) {\n  let previous = parent[property];\n  if (target === previous) return;\n  if (!isWrappable(target) || !isWrappable(previous) || key && target[key] !== previous[key]) {\n    target !== previous && setProperty(parent, property, target);\n    return;\n  }\n  if (Array.isArray(target)) {\n    if (target.length && previous.length && (!merge || key && target[0][key] != null)) {\n      let i, j, start, end, newEnd, item, newIndicesNext, keyVal;\n      for (start = 0, end = Math.min(previous.length, target.length); start < end && (previous[start] === target[start] || key && previous[start][key] === target[start][key]); start++) {\n        applyState(target[start], previous, start, merge, key);\n      }\n      const temp = new Array(target.length),\n            newIndices = new Map();\n      for (end = previous.length - 1, newEnd = target.length - 1; end >= start && newEnd >= start && (previous[end] === target[newEnd] || key && previous[end][key] === target[newEnd][key]); end--, newEnd--) {\n        temp[newEnd] = previous[end];\n      }\n      if (start > newEnd || start > end) {\n        for (j = start; j <= newEnd; j++) setProperty(previous, j, target[j]);\n        for (; j < target.length; j++) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        }\n        if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n        return;\n      }\n      newIndicesNext = new Array(newEnd + 1);\n      for (j = newEnd; j >= start; j--) {\n        item = target[j];\n        keyVal = key ? item[key] : item;\n        i = newIndices.get(keyVal);\n        newIndicesNext[j] = i === undefined ? -1 : i;\n        newIndices.set(keyVal, j);\n      }\n      for (i = start; i <= end; i++) {\n        item = previous[i];\n        keyVal = key ? item[key] : item;\n        j = newIndices.get(keyVal);\n        if (j !== undefined && j !== -1) {\n          temp[j] = previous[i];\n          j = newIndicesNext[j];\n          newIndices.set(keyVal, j);\n        }\n      }\n      for (j = start; j < target.length; j++) {\n        if (j in temp) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        } else setProperty(previous, j, target[j]);\n      }\n    } else {\n      for (let i = 0, len = target.length; i < len; i++) {\n        applyState(target[i], previous, i, merge, key);\n      }\n    }\n    if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n    return;\n  }\n  const targetKeys = Object.keys(target);\n  for (let i = 0, len = targetKeys.length; i < len; i++) {\n    applyState(target[targetKeys[i]], previous, targetKeys[i], merge, key);\n  }\n  const previousKeys = Object.keys(previous);\n  for (let i = 0, len = previousKeys.length; i < len; i++) {\n    if (target[previousKeys[i]] === undefined) setProperty(previous, previousKeys[i], undefined);\n  }\n}\nfunction reconcile(value, options = {}) {\n  const {\n    merge,\n    key = \"id\"\n  } = options,\n        v = unwrap(value);\n  return state => {\n    if (!isWrappable(state)) return v;\n    applyState(v, {\n      state\n    }, \"state\", merge, key);\n    return state;\n  };\n}\nconst setterTraps = {\n  get(target, property) {\n    if (property === $RAW) return target;\n    const value = target[property];\n    return isWrappable(value) ? new Proxy(value, setterTraps) : value;\n  },\n  set(target, property, value) {\n    setProperty(target, property, unwrap(value));\n    return true;\n  },\n  deleteProperty(target, property) {\n    setProperty(target, property, undefined);\n    return true;\n  }\n};\nfunction produce(fn) {\n  return state => {\n    if (isWrappable(state)) fn(new Proxy(state, setterTraps));\n    return state;\n  };\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n      mapped = [],\n      disposers = [],\n      len = 0,\n      indexes = mapFn.length > 1 ? [] : null,\n      ctx = Owner;\n  onCleanup(() => {\n    for (let i = 0, length = disposers.length; i < length; i++) disposers[i]();\n  });\n  return () => {\n    let newItems = list() || [],\n        i,\n        j;\n    return untrack(() => {\n      let newLen = newItems.length,\n          newIndices,\n          newIndicesNext,\n          temp,\n          tempdisposers,\n          tempIndexes,\n          start,\n          end,\n          newEnd,\n          item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          for (i = 0; i < len; i++) disposers[i]();\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          }, ctx);\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n          for (j = 0; j < newLen; j++) {\n            items[j] = newItems[j];\n            mapped[j] = createRoot(mapper, ctx);\n          }\n          len = newLen;\n        } else {\n          temp = new Array(newLen);\n          tempdisposers = new Array(newLen);\n          indexes && (tempIndexes = new Array(newLen));\n          for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n          for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n            temp[newEnd] = mapped[end];\n            tempdisposers[newEnd] = disposers[end];\n            indexes && (tempIndexes[newEnd] = indexes[end]);\n          }\n          newIndices = new Map();\n          newIndicesNext = new Array(newEnd + 1);\n          for (j = newEnd; j >= start; j--) {\n            item = newItems[j];\n            i = newIndices.get(item);\n            newIndicesNext[j] = i === undefined ? -1 : i;\n            newIndices.set(item, j);\n          }\n          for (i = start; i <= end; i++) {\n            item = items[i];\n            j = newIndices.get(item);\n            if (j !== undefined && j !== -1) {\n              temp[j] = mapped[i];\n              tempdisposers[j] = disposers[i];\n              indexes && (tempIndexes[j] = indexes[i]);\n              j = newIndicesNext[j];\n              newIndices.set(item, j);\n            } else disposers[i]();\n          }\n          for (j = start; j < newLen; j++) {\n            if (j in temp) {\n              mapped[j] = temp[j];\n              disposers[j] = tempdisposers[j];\n              if (indexes) {\n                indexes[j] = tempIndexes[j];\n                indexes[j](j);\n              }\n            } else mapped[j] = createRoot(mapper, ctx);\n          }\n          len = mapped.length = newLen;\n          items = newItems.slice(0);\n        }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j, true);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n      mapped = [],\n      disposers = [],\n      signals = [],\n      len = 0,\n      i,\n      ctx = Owner;\n  onCleanup(() => {\n    for (let i = 0, length = disposers.length; i < length; i++) disposers[i]();\n  });\n  return () => {\n    const newItems = list() || [];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          for (i = 0; i < len; i++) disposers[i]();\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          }, ctx);\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper, ctx);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = mapped.length = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nfunction createComponent(Comp, props) {\n  return untrack(() => Comp(props));\n}\nfunction assignProps(target, ...sources) {\n  for (let i = 0; i < sources.length; i++) {\n    const descriptors = Object.getOwnPropertyDescriptors(sources[i]);\n    Object.defineProperties(target, descriptors);\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  const descriptors = Object.getOwnPropertyDescriptors(props),\n        split = k => {\n    const clone = {};\n    for (let i = 0; i < k.length; i++) {\n      const key = k[i];\n      if (descriptors[key]) {\n        Object.defineProperty(clone, key, descriptors[key]);\n        delete descriptors[key];\n      }\n    }\n    return clone;\n  };\n  return keys.map(split).concat(split(Object.keys(descriptors)));\n}\nfunction lazy(fn) {\n  return props => {\n    const h = globalThis._$HYDRATION || {},\n          hydrating = h.context && h.context.registry,\n          ctx = nextHydrateContext(),\n          [s, l] = createResource(undefined, {\n      notStreamed: true\n    });\n    if (hydrating && h.resources) {\n      fn().then(mod => l(() => mod.default));\n    } else l(() => fn().then(mod => mod.default));\n    let Comp;\n    return createMemo(() => (Comp = s()) && untrack(() => {\n      if (!ctx) return Comp(props);\n      const c = h.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      !c && setHydrateContext();\n      return r;\n    }));\n  };\n}\nfunction setHydrateContext(context) {\n  globalThis._$HYDRATION.context = context;\n}\nfunction nextHydrateContext() {\n  const hydration = globalThis._$HYDRATION;\n  return hydration && hydration.context ? {\n    id: `${hydration.context.id}.${hydration.context.count++}`,\n    count: 0,\n    registry: hydration.context.registry\n  } : undefined;\n}\n\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback ? fallback : undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback ? fallback : undefined));\n}\nfunction Show(props) {\n  const childDesc = Object.getOwnPropertyDescriptor(props, \"children\").value,\n        callFn = typeof childDesc === \"function\" && childDesc.length,\n        condition = createMemo(callFn ? () => props.when : () => !!props.when, undefined, true);\n  return createMemo(() => {\n    const c = condition();\n    return c ? callFn ? untrack(() => props.children(c)) : props.children : props.fallback;\n  });\n}\nfunction Switch(props) {\n  let conditions = props.children;\n  Array.isArray(conditions) || (conditions = [conditions]);\n  const evalConditions = createMemo(() => {\n    for (let i = 0; i < conditions.length; i++) {\n      const c = conditions[i].when;\n      if (c) return [i, conditions[i].keyed ? c : !!c];\n    }\n    return [-1];\n  }, undefined, (a, b) => a && a[0] === b[0] && a[1] === b[1]);\n  return createMemo(() => {\n    const [index, when] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = conditions[index].children;\n    return typeof c === \"function\" && c.length ? untrack(() => c(when)) : c;\n  });\n}\nfunction Match(props) {\n  const childDesc = Object.getOwnPropertyDescriptor(props, \"children\").value;\n  props.keyed = typeof childDesc === \"function\" && !!childDesc.length;\n  return props;\n}\nfunction ErrorBoundary(props) {\n  const [errored, setErrored] = createSignal(),\n        fallbackDesc = Object.getOwnPropertyDescriptor(props, \"fallback\").value,\n        callFn = typeof fallbackDesc === \"function\" && !!fallbackDesc.length;\n  onError(setErrored);\n  let e;\n  return createMemo(() => (e = errored()) != null ? callFn ? untrack(() => props.fallback(e)) : props.fallback : props.children);\n}\n\nconst SuspenseListContext = createContext();\nlet trackSuspense = false;\nfunction awaitSuspense(fn) {\n  const SuspenseContext = getSuspenseContext();\n  if (!trackSuspense) {\n    let count = 0;\n    const [active, trigger] = createSignal(false);\n    SuspenseContext.active = active;\n    SuspenseContext.increment = () => count++ === 0 && trigger(true);\n    SuspenseContext.decrement = () => --count <= 0 && trigger(false);\n    trackSuspense = true;\n  }\n  return () => new Promise(resolve => {\n    const res = fn();\n    createRenderEffect(() => !SuspenseContext.active() && resolve(res));\n  });\n}\nfunction SuspenseList(props) {\n  let index = 0,\n      suspenseSetter,\n      showContent,\n      showFallback;\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) {\n    const [inFallback, setFallback] = createSignal(false, true);\n    suspenseSetter = setFallback;\n    [showContent, showFallback] = listContext.register(inFallback);\n  }\n  const registry = [],\n        comp = createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        const [showingContent, showContent] = createSignal(false, true),\n              [showingFallback, showFallback] = createSignal(false, true);\n        registry[index++] = {\n          inFallback,\n          showContent,\n          showFallback\n        };\n        return [showingContent, showingFallback];\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n  createComputed(() => {\n    const reveal = props.revealOrder,\n          tail = props.tail,\n          visibleContent = showContent ? showContent() : true,\n          visibleFallback = showFallback ? showFallback() : true,\n          reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = registry.every(i => !i.inFallback());\n      suspenseSetter && suspenseSetter(!all);\n      registry.forEach(i => {\n        i.showContent(all && visibleContent);\n        i.showFallback(visibleFallback);\n      });\n      return;\n    }\n    let stop = false;\n    for (let i = 0, len = registry.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n            s = registry[n].inFallback();\n      if (!stop && !s) {\n        registry[n].showContent(visibleContent);\n        registry[n].showFallback(visibleFallback);\n      } else {\n        const next = !stop;\n        if (next && suspenseSetter) suspenseSetter(true);\n        if (!tail || next && tail === \"collapsed\") {\n          registry[n].showFallback(visibleFallback);\n        } else registry[n].showFallback(false);\n        stop = true;\n        registry[n].showContent(next);\n      }\n    }\n    if (!stop && suspenseSetter) suspenseSetter(false);\n  });\n  return comp;\n}\nfunction Suspense(props) {\n  let counter = 0,\n      showContent,\n      showFallback;\n  const [inFallback, setFallback] = createSignal(false),\n        SuspenseContext = getSuspenseContext(),\n        store = {\n    increment: () => {\n      if (++counter === 1) {\n        setFallback(true);\n        trackSuspense && SuspenseContext.increment();\n      }\n    },\n    decrement: () => {\n      if (--counter === 0) {\n        setFallback(false);\n        trackSuspense && queueMicrotask(SuspenseContext.decrement);\n      }\n    },\n    inFallback,\n    effects: [],\n    resolved: false\n  };\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) [showContent, showFallback] = listContext.register(store.inFallback);\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      const rendered = untrack(() => props.children);\n      return () => {\n        const inFallback = store.inFallback(),\n              visibleContent = showContent ? showContent() : true,\n              visibleFallback = showFallback ? showFallback() : true;\n        if (!inFallback && visibleContent) {\n          store.resolved = true;\n          resumeEffects(store.effects);\n          return rendered;\n        }\n        if (!visibleFallback) return;\n        return props.fallback;\n      };\n    }\n  });\n}\n\nexport { $RAW, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, assignProps, awaitSuspense, batch, cancelCallback, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createMutable, createRenderEffect, createResource, createResourceState, createRoot, createSelector, createSignal, createState, equalFn, getContextOwner, getListener, indexArray, lazy, mapArray, on, onCleanup, onError, onMount, produce, reconcile, requestCallback, serializeGraph, splitProps, untrack, unwrap, useContext, useTransition };\n","import { createMemo, createRoot, createRenderEffect, onCleanup, splitProps, untrack, createSignal } from 'solid-js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, assignProps, createComponent, getContextOwner as currentContext, createRenderEffect as effect } from 'solid-js';\n\nconst booleans = [\"allowfullscreen\", \"allowpaymentrequest\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\", \"ismap\", \"itemscope\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\", \"selected\", \"truespeed\"];\nconst Properties = new Set([\"className\", \"indeterminate\", \"value\", ...booleans]);\nconst ChildProperties = new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nconst Aliases = {\n  className: \"class\",\n  htmlFor: \"for\"\n};\nconst NonComposedEvents = new Set([\"abort\", \"animationstart\", \"animationend\", \"animationiteration\", \"blur\", \"change\", \"copy\", \"cut\", \"error\", \"focus\", \"gotpointercapture\", \"load\", \"loadend\", \"loadstart\", \"lostpointercapture\", \"mouseenter\", \"mouseleave\", \"paste\", \"pointerenter\", \"pointerleave\", \"progress\", \"reset\", \"scroll\", \"select\", \"submit\", \"toggle\", \"transitionstart\", \"transitioncancel\", \"transitionend\", \"transitionrun\"]);\nconst SVGElements = new Set([\n\"altGlyph\", \"altGlyphDef\", \"altGlyphItem\", \"animate\", \"animateColor\", \"animateMotion\", \"animateTransform\", \"circle\", \"clipPath\", \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\", \"filter\", \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignObject\", \"g\", \"glyph\", \"glyphRef\", \"hkern\", \"image\", \"line\", \"linearGradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialGradient\", \"rect\",\n\"set\", \"stop\",\n\"svg\", \"switch\", \"symbol\", \"text\", \"textPath\",\n\"tref\", \"tspan\", \"use\", \"view\", \"vkern\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\n\nfunction memo(fn, equal) {\n  return createMemo(fn, undefined, equal);\n}\n\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction getHydrationKey() {\n  return globalThis._$HYDRATION.context.id;\n}\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n      aEnd = a.length,\n      bEnd = bLength,\n      aStart = 0,\n      bStart = 0,\n      after = a[aEnd - 1].nextSibling,\n      map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) parentNode.removeChild(a[aStart]);\n        aStart++;\n      }\n    } else if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n    } else if (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n              sequence = 1,\n              t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else parentNode.removeChild(a[aStart++]);\n    }\n  }\n}\n\nconst eventRegistry = new Set();\nlet hydration = null;\nfunction render(code, element, init) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    insert(element, code(), element.firstChild ? null : undefined, init);\n  });\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, check, isSVG) {\n  const t = document.createElement(\"template\");\n  t.innerHTML = html;\n  if (check && t.innerHTML.split(\"<\").length - 1 !== check) throw `Template html does not match input:\\n${t.innerHTML}\\n\\n${html}`;\n  let node = t.content.firstChild;\n  if (isSVG) node = node.firstChild;\n  return node;\n}\nfunction delegateEvents(eventNames) {\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!eventRegistry.has(name)) {\n      eventRegistry.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents() {\n  for (let name of eventRegistry.keys()) document.removeEventListener(name, eventHandler);\n  eventRegistry.clear();\n}\nfunction setAttribute(node, name, value) {\n  if (value === false || value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (value === false || value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction classList(node, value, prev) {\n  const classKeys = Object.keys(value);\n  for (let i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n          classValue = !!value[key],\n          classNames = key.split(/\\s+/);\n    if (!key || prev && prev[key] === classValue) continue;\n    for (let j = 0, nameLen = classNames.length; j < nameLen; j++) node.classList.toggle(classNames[j], classValue);\n  }\n  return value;\n}\nfunction style(node, value, prev) {\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  let v, s;\n  if (prev != null && typeof prev !== \"string\") {\n    for (s in value) {\n      v = value[s];\n      v !== prev[s] && nodeStyle.setProperty(s, v);\n    }\n    for (s in prev) {\n      value[s] == null && nodeStyle.removeProperty(s);\n    }\n  } else {\n    for (s in value) nodeStyle.setProperty(s, value[s]);\n  }\n  return value;\n}\nfunction spread(node, accessor, isSVG, skipChildren) {\n  if (typeof accessor === \"function\") {\n    createRenderEffect(current => spreadExpression(node, accessor(), current, isSVG, skipChildren));\n  } else spreadExpression(node, accessor, undefined, isSVG, skipChildren);\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}) {\n  let isCE, isProp, isChildProp;\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    if (value === prevProps[prop]) continue;\n    if (prop === \"style\") {\n      style(node, value, prevProps[prop]);\n    } else if (prop === \"class\" && !isSVG) {\n      node.className = value;\n    } else if (prop === \"classList\") {\n      classList(node, value, prevProps[prop]);\n    } else if (prop === \"ref\") {\n      value(node);\n    } else if (prop === \"on\") {\n      for (const eventName in value) node.addEventListener(eventName, value[eventName]);\n    } else if (prop === \"onCapture\") {\n      for (const eventName in value) node.addEventListener(eventName, value[eventName], true);\n    } else if (prop.slice(0, 2) === \"on\") {\n      const lc = prop.toLowerCase();\n      if (!NonComposedEvents.has(lc.slice(2))) {\n        const name = lc.slice(2);\n        if (Array.isArray(value)) {\n          node[`__${name}`] = value[0];\n          node[`__${name}Data`] = value[1];\n        } else node[`__${name}`] = value;\n        delegateEvents([name]);\n      } else node[lc] = value;\n    } else if ((isChildProp = ChildProperties.has(prop)) || !isSVG && (isProp = Properties.has(prop)) || (isCE = node.nodeName.includes(\"-\"))) {\n      if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;else node[prop] = value;\n    } else {\n      const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n      if (ns) setAttributeNS(node, ns, prop, value);else setAttribute(node, Aliases[prop] || prop, value);\n    }\n    prevProps[prop] = value;\n  }\n}\nfunction hydrate(code, element) {\n  hydration = globalThis._$HYDRATION || (globalThis._$HYDRATION = {});\n  hydration.context = {\n    id: \"0\",\n    count: 0,\n    registry: {}\n  };\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  Array.prototype.reduce.call(templates, (memo, node) => {\n    const id = node.getAttribute(\"data-hk\"),\n          list = memo[id] || (memo[id] = []);\n    list.push(node);\n    return memo;\n  }, hydration.context.registry);\n  const dispose = render(code, element, [...element.childNodes]);\n  delete hydration.context;\n  return dispose;\n}\nfunction getNextElement(template, isSSR) {\n  const hydrate = hydration && hydration.context;\n  let node, key;\n  if (!hydrate || !hydrate.registry || !((key = getHydrationKey()) && hydrate.registry[key] && (node = hydrate.registry[key].shift()))) {\n    const el = template.cloneNode(true);\n    if (isSSR && hydrate) el.setAttribute(\"data-hk\", getHydrationKey());\n    return el;\n  }\n  if (hydration && hydration.completed) hydration.completed.add(node);\n  return node;\n}\nfunction getNextMarker(start) {\n  let end = start,\n      count = 0,\n      current = [];\n  if (hydration && hydration.context && hydration.context.registry) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"#\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (hydration.events) {\n    const {\n      completed,\n      events\n    } = hydration;\n    while (events.length) {\n      const [el, e] = events[0];\n      if (!completed.has(el)) return;\n      eventHandler(e);\n      events.shift();\n    }\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction eventHandler(e) {\n  const key = `__${e.type}`;\n  let node = e.composedPath && e.composedPath()[0] || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node;\n    }\n  });\n  while (node !== null) {\n    const handler = node[key];\n    if (handler) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler(data, e) : handler(e);\n      if (e.cancelBubble) return;\n    }\n    node = node.host && node.host !== node && node.host instanceof Node ? node.host : node.parentNode;\n  }\n}\nfunction spreadExpression(node, props, prevProps = {}, isSVG, skipChildren) {\n  if (!skipChildren && \"children\" in props) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps));\n  return prevProps;\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n        multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (hydration && hydration.context && hydration.context.registry) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => current = insertExpression(parent, value(), current, marker));\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    if (normalizeIncomingArray(array, value, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (hydration && hydration.context && hydration.context.registry && current.length) return current;\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else {\n      if (Array.isArray(current)) {\n        if (current.length === 0) {\n          appendNodes(parent, array, marker);\n        } else reconcileArrays(parent, current, array);\n      } else if (current == null || current === \"\") {\n        appendNodes(parent, array);\n      } else {\n        reconcileArrays(parent, multi && current || [parent.firstChild], array);\n      }\n    }\n    current = array;\n  } else if (value instanceof Node) {\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n        t;\n    if (item instanceof Node) {\n      normalized.push(item);\n    } else if (item == null || item === true || item === false) ; else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item) || dynamic;\n    } else if ((t = typeof item) === \"string\") {\n      normalized.push(document.createTextNode(item));\n    } else if (t === \"function\") {\n      if (unwrap) {\n        const idx = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(idx) ? idx : [idx]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else normalized.push(document.createTextNode(item.toString()));\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && parent.removeChild(el);\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\n\nfunction renderToString(fn, options) {}\nfunction renderToNodeStream(fn) {}\nfunction renderToWebStream(fn) {}\nfunction ssr(template, ...nodes) {}\nfunction resolveSSRNode(node) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrSpread(accessor) {}\nfunction ssrBoolean(key, value) {}\nfunction escape(html) {}\nfunction generateHydrationScript(options) {}\n\nconst isServer = false;\nfunction Portal(props) {\n  const hydration = globalThis._$HYDRATION;\n  const {\n    useShadow\n  } = props,\n        marker = document.createTextNode(\"\"),\n        mount = props.mount || document.body;\n  function renderPortal() {\n    if (hydration && hydration.context && hydration.context.registry) {\n      const [s, set] = createSignal(false);\n      queueMicrotask(() => set(true));\n      return () => s() && props.children;\n    } else return () => props.children;\n  }\n  if (mount instanceof HTMLHeadElement) {\n    insert(mount, renderPortal(), null);\n  } else {\n    const container = props.isSVG ? document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\") : document.createElement(\"div\"),\n          renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n      mode: \"open\"\n    }) : container;\n    Object.defineProperty(container, \"host\", {\n      get() {\n        return marker.parentNode;\n      }\n    });\n    insert(renderRoot, renderPortal());\n    mount.appendChild(container);\n    props.ref && props.ref(container);\n    onCleanup(() => mount.removeChild(container));\n  }\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  return createMemo(() => {\n    const comp = p.component,\n          t = typeof comp;\n    if (comp) {\n      if (t === \"function\") return untrack(() => comp(others));else if (t === \"string\") {\n        const el = document.createElement(comp);\n        spread(el, others);\n        return el;\n      }\n    }\n  });\n}\n\nexport { Aliases, ChildProperties, Dynamic, NonComposedEvents, Portal, Properties, SVGElements, SVGNamespace, assign, classList, clearDelegatedEvents, delegateEvents, dynamicProperty, escape, generateHydrationScript, getNextElement, getNextMarker, hydrate, insert, isServer, memo, render, renderToNodeStream, renderToString, renderToWebStream, resolveSSRNode, runHydrationEvents, setAttribute, setAttributeNS, spread, ssr, ssrBoolean, ssrClassList, ssrSpread, ssrStyle, style, template };\n","import { createContext, useContext, createMemo } from \"solid-js\";\nimport { RouterContextValue, RouteLike } from \"./types\";\nimport { State as RouteState } from \"router5\";\n\nconst Context = createContext<RouterContextValue>();\n\nexport default Context;\n\nexport function useRoute(): () => RouteState {\n  const ctx = useContext(Context);\n  return () => ctx.state.route;\n}\n\nfunction paramsEq<\n  A extends undefined | Record<string, any>,\n  B extends undefined | Record<string, any>\n>(a: A, b: B): boolean {\n  if (a === b) return true;\n  if (a === undefined) return b === undefined;\n  if (b === undefined) return a === undefined;\n  const keys = Object.keys(a!);\n  for (const key of keys) if (!(key in b)) return false;\n  for (const key of keys) if (String(a[key]) !== String(b[key])) return false;\n  return keys.length === Object.keys(b!).length;\n}\n\nexport function useIsActive<Link extends RouteLike>(\n  link: Link,\n  params?: Record<string, any>,\n  paramsIsEqual: <A extends Record<string, any>, B extends Record<string, any>>(\n    a: A,\n    b: B\n  ) => boolean = paramsEq\n): () => boolean {\n  const state = useContext(Context).state;\n  const getIsActiveByName = createMemo(() => isActive(state.route.name, link));\n  return createMemo(() =>\n    getIsActiveByName() && params !== undefined\n      ? paramsIsEqual(state.route.params, params)\n      : true\n  );\n}\n\n/**\n * Find whether 'link' is an ancestor of, or equal to, 'here'\n *\n * Maybe useful for creating your own `Link` component.\n */\nexport function isActive<Link extends RouteLike>(here: string, link: Link) {\n  return link.startsWith(here);\n}\n","import { RouteMeta } from \"../types\";\nimport Context, { useIsActive } from \"../context\";\nimport { JSX, assignProps, createMemo, splitProps, useContext } from \"solid-js\";\nimport { RequiredKeys } from \"ts-essentials\";\n\n/** Props for making a `Link` component.\n *\n * @remarks\n *\n * Only some of the props are reactive; the rest are static at the time of\n * creating the link. The reactive props available are:\n *\n * - `to`\n * - `params`\n * - `disabled`\n * - `onClick`\n * - `innerProps`\n * - `disabledProps`\n */\nexport type LinkProps<Route extends RouteMeta> = {\n  nav?: boolean;\n  navActiveClass?: string;\n  navIgnoreParams?: boolean;\n  children?: JSX.Element;\n  onClick?: (\n    ev: MouseEvent & {\n      target: HTMLElement;\n      currentTarget: HTMLElement;\n    }\n  ) => void;\n  back?: () => void;\n  forward?: () => void;\n  display?: \"button\";\n  disabled?: boolean;\n} & (\n  | {\n      to: \"@@back\" | \"@@forward\";\n      params?: undefined;\n    }\n  | (Route extends { name: infer Name; params: infer Params }\n      ? RequiresParams<Params> extends true\n        ? { to: Name; params: Params }\n        : { to: Name; params?: Params | undefined }\n      : never)\n) &\n  Omit<JSX.IntrinsicElements[\"a\" | \"button\"], \"onClick\" | \"href\" | \"children\">;\n\ntype RequiresParams<Params> = keyof Params extends never\n  ? false\n  : RequiredKeys<Params> extends never\n  ? false\n  : true;\n\nexport interface LinkConfig {\n  navActiveClass: string;\n}\n\nexport default function Link<Route extends RouteMeta>(\n  props: LinkProps<Route>\n): JSX.Element {\n  const { router: router5, config } = useContext(Context);\n\n  let [linkProps, innerProps] = splitProps(props, [\n    \"type\",\n    \"onClick\",\n    \"classList\",\n    \"to\",\n    \"params\",\n    \"nav\",\n    \"navIgnoreParams\",\n    \"navActiveClass\",\n    \"disabled\",\n    \"back\",\n    \"forward\",\n    \"display\",\n  ]);\n\n  linkProps = assignProps(\n    {\n      navActiveClass: config.navActiveClass,\n      back: config.back,\n      forward: config.forward,\n    },\n    linkProps\n  ) as any;\n\n  const isActive =\n    typeof linkProps.to === \"string\"\n      ? useIsActive(\n          linkProps.to,\n          linkProps.navIgnoreParams ? undefined : linkProps.params\n        )\n      : alwaysInactive;\n\n  const getHref: () => string | undefined = createMemo(() => {\n    if (typeof linkProps.to === \"string\" && !linkProps.to.startsWith(\"@@\")) {\n      try {\n        return router5.buildPath(linkProps.to, linkProps.params);\n      } catch (err) {\n        console.warn(\"<Link> buildPath failed:\", err);\n      }\n    }\n    return undefined;\n  });\n\n  const getClassList = createMemo(() => {\n    const cls: Record<string, any> = { ...linkProps.classList };\n    if (typeof linkProps.navActiveClass === \"string\") {\n      cls[linkProps.navActiveClass] = isActive();\n    }\n    return cls;\n  });\n\n  function onClick(\n    ev: MouseEvent & { target: HTMLElement; currentTarget: HTMLElement }\n  ) {\n    ev.preventDefault();\n    switch (linkProps.to) {\n      case \"@@forward\":\n        linkProps.forward?.();\n        break;\n      case \"@@back\":\n        linkProps.back?.();\n        break;\n      default:\n        router5.navigate(linkProps.to!, linkProps.params ?? {});\n        if (typeof linkProps.onClick === \"function\") linkProps.onClick(ev);\n        break;\n    }\n    ev.target.blur();\n  }\n\n  return () =>\n    linkProps.display === \"button\" ? (\n      <button\n        {...(innerProps as any)}\n        disabled={linkProps.disabled}\n        classList={getClassList()}\n        onClick={onClick}\n      />\n    ) : linkProps.to.startsWith(\"@@\") ? (\n      <button\n        {...(innerProps as any)}\n        classList={getClassList()}\n        onClick={onClick}\n      />\n    ) : (\n      <a\n        {...(innerProps as any)}\n        classList={getClassList()}\n        href={getHref()}\n        onClick={onClick}\n      />\n    );\n}\n\nconst alwaysInactive = () => false;\n","import {\n  JSX,\n  createContext,\n  useContext,\n  Match,\n  Show,\n  createMemo,\n} from \"solid-js\";\nimport { useRoute } from \"../context\";\n\nconst MatchContext = createContext<string>(\"\");\n\nexport type MatchRouteProps = PathProps & { children: JSX.Element };\n\nexport interface ExactPathProps {\n  path: string;\n  prefix?: undefined;\n}\n\nexport interface PrefixPathProps {\n  prefix: string;\n  path?: undefined;\n}\n\n/**\n * ```ts\n * type PathProps = { path: string } | { prefix: string };\n * ```\n *\n * If [[ExactPathProps.path]] is given, then the match is exact, which means\n * that the current route name must be equal to `context.path + path` where\n * `context.path` means the current path created by other match components above\n * this one.\n *\n * If [[PrefixPathProps.prefix]] is given, then the match only requires that the\n * current route start with `context.path + prefix`.\n *\n */\nexport type PathProps = ExactPathProps | PrefixPathProps;\n\nfunction doesMatch(\n  ctx: string,\n  here: string,\n  props: PathProps\n): [string, boolean] {\n  const suffix = props.path !== undefined ? props.path : props.prefix;\n  const exact = props.path !== undefined;\n  const target = ctx !== \"\" ? `${ctx}.${suffix}` : suffix;\n  return [target, exact ? here === target : here.startsWith(target)];\n}\n\n/**\n * Not reactive on the routes being used\n *\n * Prefer this over [[Switch]] + [[MatchRoute]]\n */\nexport function SwitchRoutes(props: {\n  children: MatchRouteProps[];\n  fallback?: JSX.Element;\n}): JSX.Element {\n  const ctx = useContext(MatchContext);\n  const route = useRoute();\n  const getIndex = createMemo<undefined | [number, string]>(\n    () => {\n      const here = route().name;\n      const children = props.children;\n      for (let i = 0; i < children.length; i++) {\n        const [target, when] = doesMatch(ctx, here, children[i]);\n        if (when) return [i, target];\n      }\n      return undefined;\n    },\n    undefined,\n    (a, b) => {\n      const same =\n        a === b || (a !== undefined && b !== undefined && a[0] === b[0]);\n      return same;\n    }\n  );\n  return createMemo(() => {\n    const ix = getIndex();\n    if (ix !== undefined) {\n      const [i, target] = ix;\n      return (\n        <MatchContext.Provider value={target}>\n          {props.children[i].children}\n        </MatchContext.Provider>\n      );\n    }\n    return props.fallback;\n  });\n}\n\nexport type ShowRouteProps = MatchRouteProps & { fallback?: JSX.Element };\n\n/**\n * Create a [[Show]] node against a given route.\n */\nexport function ShowRoute(props: ShowRouteProps): JSX.Element {\n  const getMatch = createGetMatch(props);\n  return () => {\n    const [target, when] = getMatch();\n    return (\n      <Show when={when} fallback={props.fallback}>\n        <MatchContext.Provider value={target}>\n          {props.children}\n        </MatchContext.Provider>\n      </Show>\n    );\n  };\n}\n\n/**\n * Create a [[Match]] node against a given route.\n */\nexport function MatchRoute(props: MatchRouteProps): JSX.Element {\n  const getMatch = createGetMatch(props);\n  return (\n    <Match when={getMatch()[1]}>\n      <MatchContext.Provider value={getMatch()[0]}>\n        {props.children}\n      </MatchContext.Provider>\n    </Match>\n  );\n}\n\nfunction createGetMatch(props: PathProps): () => [string, boolean] {\n  const route = useRoute();\n  const ctx = useContext(MatchContext);\n  return createMemo<[string, boolean]>(\n    () => doesMatch(ctx, route().name, props),\n    undefined,\n    (a, b) => a && a[1] === b[1]\n  );\n}\n","import { JSX, untrack } from \"solid-js\";\nimport { MatchRouteProps, SwitchRoutes } from \"./MatchRoute\";\nimport {\n  OptionalNestedPathTo,\n  RouteLike,\n  RouteMeta,\n  ToRouteArray,\n} from \"../types\";\nimport { useRoute } from \"context\";\n\n/**\n * Tells `solid-typefu-router5` how to render a node if the path leading to\n * it matches the current route name.\n */\nexport type RouterRenderNode<Params> = {\n  /** Defaults to rendering the children. */\n  render?: (props: { children?: JSX.Element; params: Params }) => JSX.Element;\n\n  /** Fallback children to use if none are available to give to [[render]]. Default: nothing */\n  fallback?: (props: { params: Params }) => JSX.Element;\n};\n\nexport type RSM<RM extends RouteMeta[]> = RM extends [infer R, ...infer RS]\n  ? R extends { name: infer Name; params: infer Params }\n    ? RS extends RouteMeta[]\n      ? OptionalNestedPathTo<ToRouteArray<Name>, RouterRenderNode<Params>> &\n          RSM<RS>\n      : never\n    : never\n  : {};\n\nexport type RenderNodeLike = RouterRenderNode<any>;\nexport type RouteNodeLike = { name: string; children?: RouteTreeLike };\nexport type RouteTreeLike = RouteNodeLike[];\nexport type RenderTreeLike = RenderNodeLike & { [k: string]: RenderTreeLike };\n\n/**\n * Given a tree of routes and render instructions for each route, return an\n * element that selects the correct renderer for the current route.\n *\n * Also supports using routes to choose how to provide props to a single\n * renderer.\n */\nexport default function RouteStateMachine<\n  T extends RenderTreeLike,\n  A extends RouteLike\n>(tree: T, _assumed?: A): JSX.Element {\n  const route = useRoute();\n  function traverse(path: string[], node: RenderTreeLike): JSX.Element {\n    const children: MatchRouteProps[] = [];\n    const {\n      render: RenderHere = passthru,\n      fallback: RenderFallback = nofallback,\n      ...routes\n    } = node;\n    for (const key in routes) {\n      const next = [...path, key];\n      const child = routes[key]!;\n      children.push({\n        prefix: key,\n        children: traverse(next, child),\n      });\n    }\n    return () => (\n      <RenderHere params={route().params as any}>\n        <SwitchRoutes\n          fallback={() => <RenderFallback params={route().params as any} />}\n          children={children}\n        />\n      </RenderHere>\n    );\n  }\n  return untrack(() => traverse([], tree));\n}\n\nfunction nofallback() {\n  return undefined;\n}\n\nfunction passthru(props: { children?: JSX.Element; params: any }): JSX.Element {\n  return props.children;\n}\n","import createSolidRouter, { useRoute } from \"solid-typefu-router5\";\nimport browserPluginFactory from \"router5-plugin-browser\";\nimport { render } from \"solid-js/dom\";\nimport createRouter from \"router5\";\nimport { For } from \"solid-js\";\n\nconst routes = [\n  { name: \"home\", path: \"/\" },\n  {\n    name: \"users\",\n    path: \"/users?page\",\n    children: [\n      { name: \"profile\", path: \"/:id<\\\\d+>\" },\n      { name: \"edit\", path: \"/edit\" },\n    ],\n  },\n  { name: \"about\", path: \"/about\" },\n] as const;\n\nconst { Link, Router, Provider } = createSolidRouter({\n  routes,\n  back: () => window.history.back(),\n  forward: () => window.history.forward(),\n  createRouter5: (routes) => {\n    const router = createRouter(routes, { allowNotFound: true });\n    router.usePlugin(browserPluginFactory({ useHash: false }));\n    return router;\n  },\n});\n\nconst About = () => (\n  <>\n    <h1>About</h1>\n    <p>\n      This is the about page of the <code>solid-typefu-router5</code> example\n      project.\n    </p>\n  </>\n);\n\nconst Home = () => (\n  <>\n    <h1>Home</h1>\n    <p>\n      This is the <code>solid-typefu-router5</code> example project.\n    </p>\n  </>\n);\n\nfunction userList(page: number) {\n  return [5 * page, 5 * page + 1, 5 * page + 2, 5 * page + 3, 5 * page + 4];\n}\n\nconst Users = (props: { page: number }) => (\n  <>\n    <h1>Users</h1>\n    <p>Page: {props.page}</p>\n    <ul>\n      <For each={userList(props.page)}>\n        {(user) => (\n          <li>\n            <Link to=\"users.profile\" params={{ id: \"\" + user }}>\n              To user {user}\n            </Link>\n          </li>\n        )}\n      </For>\n    </ul>\n    <Link\n      to=\"users\"\n      params={{ page: \"\" + (props.page - 1) }}\n      display=\"button\"\n      disabled={props.page <= 0}\n    >\n      Previous page\n    </Link>\n    <br />\n    <Link to=\"users\" params={{ page: \"\" + (props.page + 1) }} display=\"button\">\n      Next page\n    </Link>\n    <hr />\n  </>\n);\n\nconst UserProfile = (props: { id: number }) => (\n  <>\n    <h1>User {props.id} profile</h1>\n    <p>hello world!</p>\n  </>\n);\n\nconst App = () => {\n  const route = useRoute();\n  return (\n    <div>\n      <b>Route: </b>\n      <code>{JSON.stringify(route())}</code>\n      <hr />\n      <nav class=\"nav\">\n        <ul>\n          <li>\n            <Link to=\"@@back\">Back</Link> / <Link to=\"@@forward\">Forward</Link>\n          </li>\n          <li>\n            <Link to=\"home\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"users\" params={{ page: \"0\" }}>\n              Users\n            </Link>\n          </li>\n          <li>\n            <Link to=\"about\">About</Link>\n          </li>\n        </ul>\n      </nav>\n      <hr />\n      <Router>\n        {{\n          about: { render: About },\n          home: { render: Home },\n          users: {\n            fallback: (p) => <Users page={Number(p.params.page ?? 0)} />,\n            profile: {\n              render: (p: { params: { id: string } }) => (\n                <UserProfile id={Number(p.params.id)} />\n              ),\n            },\n          },\n        }}\n      </Router>\n    </div>\n  );\n};\n\n// end interesting parts\n\nrender(\n  () => (\n    <Provider>\n      <App />\n    </Provider>\n  ),\n  document.getElementById(\"app\") as any\n);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export type arrayFormat = 'none' | 'brackets' | 'index'\nexport type booleanFormat = 'none' | 'string' | 'unicode' | 'empty-true'\nexport type nullFormat = 'default' | 'string' | 'hidden'\n\nexport interface IOptions {\n  arrayFormat?: arrayFormat\n  booleanFormat?: booleanFormat\n  nullFormat?: nullFormat\n}\n\nexport interface IFinalOptions {\n  arrayFormat: arrayFormat\n  booleanFormat: booleanFormat\n  nullFormat: nullFormat\n}\n\nexport const makeOptions = (opts: IOptions = {}): IFinalOptions => ({\n  arrayFormat: opts.arrayFormat || 'none',\n  booleanFormat: opts.booleanFormat || 'none',\n  nullFormat: opts.nullFormat || 'default'\n})\n\nconst encodeValue = (value: any): string => encodeURIComponent(value)\n\nconst decodeValue = (value: string): string => decodeURIComponent(value)\n\nconst encodeBoolean = (\n  name: string,\n  value: boolean,\n  opts: IFinalOptions\n): string => {\n  if (opts.booleanFormat === 'empty-true' && value) {\n    return name\n  }\n\n  let encodedValue\n\n  if (opts.booleanFormat === 'unicode') {\n    encodedValue = value ? '' : ''\n  } else {\n    encodedValue = value.toString()\n  }\n\n  return `${name}=${encodedValue}`\n}\n\nconst encodeNull = (name: string, opts: IFinalOptions): string => {\n  if (opts.nullFormat === 'hidden') {\n    return ''\n  }\n\n  if (opts.nullFormat === 'string') {\n    return `${name}=null`\n  }\n\n  return name\n}\n\ntype nameEncoder = (val: string, index: number) => string\n\nconst getNameEncoder = (opts: IFinalOptions): nameEncoder => {\n  if (opts.arrayFormat === 'index') {\n    return (name: string, index: number): string => `${name}[${index}]`\n  }\n\n  if (opts.arrayFormat === 'brackets') {\n    return (name: string): string => `${name}[]`\n  }\n\n  return (name: string): string => name\n}\n\nexport const encodeArray = (\n  name: string,\n  arr: any[],\n  opts: IFinalOptions\n): string => {\n  const encodeName = getNameEncoder(opts)\n\n  return arr\n    .map((val, index) => `${encodeName(name, index)}=${encodeValue(val)}`)\n    .join('&')\n}\n\nexport const encode = (\n  name: string,\n  value: any,\n  opts: IFinalOptions\n): string => {\n  if (value === null) {\n    return encodeNull(name, opts)\n  }\n\n  if (typeof value === 'boolean') {\n    return encodeBoolean(name, value, opts)\n  }\n\n  if (Array.isArray(value)) {\n    return encodeArray(name, value, opts)\n  }\n\n  return `${name}=${encodeValue(value)}`\n}\n\nexport const decode = (\n  value: any,\n  opts: IFinalOptions\n): boolean | string | null => {\n  if (value === undefined) {\n    return opts.booleanFormat === 'empty-true' ? true : null\n  }\n\n  if (opts.booleanFormat === 'string') {\n    if (value === 'true') {\n      return true\n    }\n    if (value === 'false') {\n      return false\n    }\n  }\n\n  if (opts.booleanFormat === 'unicode') {\n    if (decodeValue(value) === '') {\n      return true\n    }\n    if (decodeValue(value) === '') {\n      return false\n    }\n  }\n\n  if (opts.nullFormat === 'string') {\n    if (value === 'null') {\n      return null\n    }\n  }\n\n  return decodeValue(value)\n}\n","export const getSearch = (path: string): string => {\n  const pos = path.indexOf('?')\n\n  if (pos === -1) {\n    return path\n  }\n\n  return path.slice(pos + 1)\n}\n\nexport const isSerialisable = (val: any): boolean => val !== undefined\n\nexport interface IParsedName {\n  hasBrackets: boolean\n  name: string\n}\n\nexport const parseName = (name: string): IParsedName => {\n  const bracketPosition = name.indexOf('[')\n  const hasBrackets = bracketPosition !== -1\n\n  return {\n    hasBrackets,\n    name: hasBrackets ? name.slice(0, bracketPosition) : name\n  }\n}\n","import { decode, encode, IOptions, makeOptions } from './encode'\nimport { getSearch, isSerialisable, parseName } from './utils'\n\nexport { IOptions }\n\nexport type SearchParams = Record<\n  string,\n  string | boolean | null | Array<string | boolean | null> | undefined\n>\n\n/**\n * Parse a querystring and return an object of parameters\n */\nexport const parse = <T extends Record<string, any> = SearchParams>(\n  path: string,\n  opts?: IOptions\n): T => {\n  const options = makeOptions(opts)\n\n  return getSearch(path)\n    .split('&')\n    .reduce<Record<string, any>>((params, param) => {\n      const [rawName, value] = param.split('=')\n      const { hasBrackets, name } = parseName(rawName)\n      const currentValue = params[name]\n      const decodedValue = decode(value, options)\n\n      if (currentValue === undefined) {\n        params[name] = hasBrackets ? [decodedValue] : decodedValue\n      } else {\n        params[name] = (Array.isArray(currentValue)\n          ? currentValue\n          : [currentValue]\n        ).concat(decodedValue)\n      }\n\n      return params\n    }, {}) as T\n}\n\n/**\n * Build a querystring from an object of parameters\n */\nexport const build = <T extends Record<string, any> = SearchParams>(\n  params: T,\n  opts?: IOptions\n): string => {\n  const options = makeOptions(opts)\n\n  return Object.keys(params)\n    .filter(paramName => isSerialisable(params[paramName]))\n    .map(paramName => encode(paramName, params[paramName], options))\n    .filter(Boolean)\n    .join('&')\n}\n\nexport interface IOmitResponse {\n  querystring: string\n  removedParams: object\n}\n\n/**\n * Remove a list of parameters from a querystring\n */\nexport const omit = (\n  path: string,\n  paramsToOmit: string[],\n  opts?: IOptions\n): IOmitResponse => {\n  const options = makeOptions(opts)\n  const searchPart = getSearch(path)\n  if (searchPart === '') {\n    return {\n      querystring: '',\n      removedParams: {}\n    }\n  }\n\n  const [kept, removed] = path.split('&').reduce<[string[], string[]]>(\n    ([left, right]: [string[], string[]], chunk: string) => {\n      const rawName = chunk.split('=')[0]\n      const { name } = parseName(rawName)\n\n      return paramsToOmit.indexOf(name) === -1\n        ? [left.concat(chunk), right]\n        : [left, right.concat(chunk)]\n    },\n    [[], []]\n  )\n\n  return {\n    querystring: kept.join('&'),\n    removedParams: parse(removed.join('&'), options)\n  }\n}\n\nexport interface IKeepResponse {\n  querystring: string\n  keptParams: object\n}\n\n/**\n * Remove a list of parameters from a querystring\n */\nexport const keep = (\n  path: string,\n  paramsToKeep: string[],\n  opts?: IOptions\n): IKeepResponse => {\n  const options = makeOptions(opts)\n  const searchPart = getSearch(path)\n  if (searchPart === '') {\n    return {\n      keptParams: {},\n      querystring: ''\n    }\n  }\n\n  const kept = path.split('&').reduce<string[]>((acc, chunk: string) => {\n    const rawName = chunk.split('=')[0]\n    const { name } = parseName(rawName)\n\n    if (paramsToKeep.includes(name)) {\n      acc.push(chunk)\n    }\n\n    return acc\n  }, [])\n\n  return {\n    keptParams: parse(kept.join('&'), options),\n    querystring: kept.join('&')\n  }\n}\n","/**\n * We encode using encodeURIComponent but we want to\n * preserver certain characters which are commonly used\n * (sub delimiters and ':')\n * \n * https://www.ietf.org/rfc/rfc3986.txt\n * \n * reserved    = gen-delims / sub-delims\n * \n * gen-delims  = \":\" / \"/\" / \"?\" / \"#\" / \"[\" / \"]\" / \"@\"\n * \n * sub-delims  = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n              / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n */\n\nconst excludeSubDelimiters = /[^!$'()*+,;|:]/g\n\nexport type URLParamsEncodingType =\n  | 'default'\n  | 'uri'\n  | 'uriComponent'\n  | 'none'\n  | 'legacy'\n\nexport const encodeURIComponentExcludingSubDelims = (segment: string): string =>\n  segment.replace(excludeSubDelimiters, match => encodeURIComponent(match))\n\nconst encodingMethods: Record<\n  URLParamsEncodingType,\n  (param: string) => string\n> = {\n  default: encodeURIComponentExcludingSubDelims,\n  uri: encodeURI,\n  uriComponent: encodeURIComponent,\n  none: val => val,\n  legacy: encodeURI\n}\n\nconst decodingMethods: Record<\n  URLParamsEncodingType,\n  (param: string) => string\n> = {\n  default: decodeURIComponent,\n  uri: decodeURI,\n  uriComponent: decodeURIComponent,\n  none: val => val,\n  legacy: decodeURIComponent\n}\n\nexport const encodeParam = (\n  param: string | number | boolean,\n  encoding: URLParamsEncodingType,\n  isSpatParam: boolean\n): string => {\n  const encoder =\n    encodingMethods[encoding] || encodeURIComponentExcludingSubDelims\n\n  if (isSpatParam) {\n    return String(param)\n      .split('/')\n      .map(encoder)\n      .join('/')\n  }\n\n  return encoder(String(param))\n}\n\nexport const decodeParam = (\n  param: string,\n  encoding: URLParamsEncodingType\n): string => (decodingMethods[encoding] || decodeURIComponent)(param)\n","export const defaultOrConstrained = (match: string): string =>\n  '(' +\n  (match ? match.replace(/(^<|>$)/g, '') : \"[a-zA-Z0-9-_.~%':|=+\\\\*@$]+\") +\n  ')'\n\nexport type RegExpFactory = (match: any) => RegExp\n\nexport interface IRule {\n  /* The name of the rule */\n  name: string\n  /* The regular expression used to find a token in a path definition */\n  pattern: RegExp\n  /* The derived regular expression to match a path */\n  regex?: RegExp | RegExpFactory\n}\n\nconst rules: IRule[] = [\n  {\n    name: 'url-parameter',\n    pattern: /^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\n    regex: (match: RegExpMatchArray) =>\n      new RegExp(defaultOrConstrained(match[2]))\n  },\n  {\n    name: 'url-parameter-splat',\n    pattern: /^\\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,\n    regex: /([^?]*)/\n  },\n  {\n    name: 'url-parameter-matrix',\n    pattern: /^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\n    regex: (match: RegExpMatchArray) =>\n      new RegExp(';' + match[1] + '=' + defaultOrConstrained(match[2]))\n  },\n  {\n    name: 'query-parameter',\n    pattern: /^(?:\\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/\n  },\n  {\n    name: 'delimiter',\n    pattern: /^(\\/|\\?)/,\n    regex: (match: RegExpMatchArray) => new RegExp('\\\\' + match[0])\n  },\n  {\n    name: 'sub-delimiter',\n    pattern: /^(!|&|-|_|\\.|;)/,\n    regex: (match: RegExpMatchArray) => new RegExp(match[0])\n  },\n  {\n    name: 'fragment',\n    pattern: /^([0-9a-zA-Z]+)/,\n    regex: (match: RegExpMatchArray) => new RegExp(match[0])\n  }\n]\n\nexport default rules\n","import rules from './rules'\n\nexport interface Token {\n  type: string\n  match: string\n  val: any\n  otherVal: any\n  regex?: RegExp\n}\n\nconst tokenise = (str: string, tokens: Token[] = []): Token[] => {\n  // Look for a matching rule\n  const matched = rules.some(rule => {\n    const match = str.match(rule.pattern)\n    if (!match) {\n      return false\n    }\n\n    tokens.push({\n      type: rule.name,\n      match: match[0],\n      val: match.slice(1, 2),\n      otherVal: match.slice(2),\n      regex: rule.regex instanceof Function ? rule.regex(match) : rule.regex\n    })\n\n    if (match[0].length < str.length) {\n      tokens = tokenise(str.substr(match[0].length), tokens)\n    }\n    return true\n  })\n\n  // If no rules matched, throw an error (possible malformed path)\n  if (!matched) {\n    throw new Error(`Could not parse path '${str}'`)\n  }\n\n  return tokens\n}\n\nexport default tokenise\n","import {\n  build as buildQueryParams,\n  IOptions,\n  parse as parseQueryParams\n} from 'search-params'\n\nimport { URLParamsEncodingType, decodeParam, encodeParam } from './encoding'\nimport { defaultOrConstrained } from './rules'\nimport tokenise, { Token } from './tokeniser'\n\nexport { URLParamsEncodingType }\n\nconst exists = (val: any) => val !== undefined && val !== null\n\nconst optTrailingSlash = (source: string, strictTrailingSlash: boolean) => {\n  if (strictTrailingSlash) {\n    return source\n  }\n\n  if (source === '\\\\/') {\n    return source\n  }\n\n  return source.replace(/\\\\\\/$/, '') + '(?:\\\\/)?'\n}\n\nconst upToDelimiter = (source: string, delimiter?: boolean) => {\n  if (!delimiter) {\n    return source\n  }\n\n  return /(\\/)$/.test(source) ? source : source + '(\\\\/|\\\\?|\\\\.|;|$)'\n}\n\nconst appendQueryParam = (\n  params: Record<string, any>,\n  param: string,\n  val = ''\n) => {\n  const existingVal = params[param]\n\n  if (existingVal === undefined) {\n    params[param] = val\n  } else {\n    params[param] = Array.isArray(existingVal)\n      ? existingVal.concat(val)\n      : [existingVal, val]\n  }\n\n  return params\n}\n\nexport interface PathOptions {\n  /**\n   * Query parameters buiding and matching options, see\n   * https://github.com/troch/search-params#options\n   */\n  queryParams?: IOptions\n  /**\n   * Specifies the method used to encode URL parameters:\n   *   - `'default': `encodeURIComponent` and `decodeURIComponent`\n   *      are used but some characters to encode and decode URL parameters,\n   *      but some characters are preserved when encoding\n   *      (sub-delimiters: `+`, `:`, `'`, `!`, `,`, `;`, `'*'`).\n   *   - `'uriComponent'`: use `encodeURIComponent` and `decodeURIComponent`\n   *      for encoding and decoding URL parameters.\n   *   - `'uri'`: use `encodeURI` and `decodeURI for encoding amd decoding\n   *      URL parameters.\n   *   - `'none'`: no encoding or decoding is performed\n   *   - `'legacy'`: the approach for version 5.x and below (not recoomended)\n   */\n  urlParamsEncoding?: URLParamsEncodingType\n}\n\nexport interface InternalPathOptions {\n  queryParams?: IOptions\n  urlParamsEncoding: URLParamsEncodingType\n}\n\nconst defaultOptions: InternalPathOptions = {\n  urlParamsEncoding: 'default'\n}\n\nexport interface PathPartialTestOptions extends PathOptions {\n  caseSensitive?: boolean\n  delimited?: boolean\n}\n\nexport interface PathTestOptions extends PathOptions {\n  caseSensitive?: boolean\n  strictTrailingSlash?: boolean\n}\n\nexport interface PathBuildOptions extends PathOptions {\n  ignoreConstraints?: boolean\n  ignoreSearch?: boolean\n}\n\nexport type TestMatch<\n  T extends Record<string, any> = Record<string, any>\n> = T | null\n\nexport class Path<T extends Record<string, any> = Record<string, any>> {\n  public static createPath<T extends Record<string, any> = Record<string, any>>(\n    path: string,\n    options?: PathOptions\n  ) {\n    return new Path<T>(path, options)\n  }\n\n  public path: string\n  public tokens: Token[]\n  public hasUrlParams: boolean\n  public hasSpatParam: boolean\n  public hasMatrixParams: boolean\n  public hasQueryParams: boolean\n  public options: InternalPathOptions\n  public spatParams: string[]\n  public urlParams: string[]\n  public queryParams: string[]\n  public params: string[]\n  public source: string\n\n  constructor(path: string, options?: PathOptions) {\n    if (!path) {\n      throw new Error('Missing path in Path constructor')\n    }\n    this.path = path\n    this.options = {\n      ...defaultOptions,\n      ...options\n    }\n    this.tokens = tokenise(path)\n\n    this.hasUrlParams =\n      this.tokens.filter(t => /^url-parameter/.test(t.type)).length > 0\n    this.hasSpatParam =\n      this.tokens.filter(t => /splat$/.test(t.type)).length > 0\n    this.hasMatrixParams =\n      this.tokens.filter(t => /matrix$/.test(t.type)).length > 0\n    this.hasQueryParams =\n      this.tokens.filter(t => /^query-parameter/.test(t.type)).length > 0\n    // Extract named parameters from tokens\n    this.spatParams = this.getParams('url-parameter-splat')\n    this.urlParams = this.getParams(/^url-parameter/)\n    // Query params\n    this.queryParams = this.getParams('query-parameter')\n    // All params\n    this.params = this.urlParams.concat(this.queryParams)\n    // Check if hasQueryParams\n    // Regular expressions for url part only (full and partial match)\n    this.source = this.tokens\n      .filter(t => t.regex !== undefined)\n      .map(t => t.regex!.source)\n      .join('')\n  }\n\n  public isQueryParam(name: string): boolean {\n    return this.queryParams.indexOf(name) !== -1\n  }\n\n  public isSpatParam(name: string): boolean {\n    return this.spatParams.indexOf(name) !== -1\n  }\n\n  public test(path: string, opts?: PathTestOptions): TestMatch<T> {\n    const options = {\n      caseSensitive: false,\n      strictTrailingSlash: false,\n      ...this.options,\n      ...opts\n    } as const\n    // trailingSlash: falsy => non optional, truthy => optional\n    const source = optTrailingSlash(this.source, options.strictTrailingSlash)\n    // Check if exact match\n    const match = this.urlTest(\n      path,\n      source + (this.hasQueryParams ? '(\\\\?.*$|$)' : '$'),\n      options.caseSensitive,\n      options.urlParamsEncoding\n    )\n    // If no match, or no query params, no need to go further\n    if (!match || !this.hasQueryParams) {\n      return match\n    }\n    // Extract query params\n    const queryParams = parseQueryParams(path, options.queryParams)\n    const unexpectedQueryParams = Object.keys(queryParams).filter(\n      p => !this.isQueryParam(p)\n    )\n\n    if (unexpectedQueryParams.length === 0) {\n      // Extend url match\n      Object.keys(queryParams).forEach(\n        // @ts-ignore\n        p => (match[p] = (queryParams as any)[p])\n      )\n\n      return match\n    }\n\n    return null\n  }\n\n  public partialTest(\n    path: string,\n    opts?: PathPartialTestOptions\n  ): TestMatch<T> {\n    const options = {\n      caseSensitive: false,\n      delimited: true,\n      ...this.options,\n      ...opts\n    } as const\n    // Check if partial match (start of given path matches regex)\n    // trailingSlash: falsy => non optional, truthy => optional\n    const source = upToDelimiter(this.source, options.delimited)\n    const match = this.urlTest(\n      path,\n      source,\n      options.caseSensitive,\n      options.urlParamsEncoding\n    )\n\n    if (!match) {\n      return match\n    }\n\n    if (!this.hasQueryParams) {\n      return match\n    }\n\n    const queryParams = parseQueryParams(path, options.queryParams)\n\n    Object.keys(queryParams)\n      .filter(p => this.isQueryParam(p))\n      .forEach(p => appendQueryParam(match, p, (queryParams as any)[p]))\n\n    return match\n  }\n\n  public build(params: T = {} as T, opts?: PathBuildOptions): string {\n    const options = {\n      ignoreConstraints: false,\n      ignoreSearch: false,\n      queryParams: {},\n      ...this.options,\n      ...opts\n    } as const\n    const encodedUrlParams = Object.keys(params)\n      .filter(p => !this.isQueryParam(p))\n      .reduce<Record<string, any>>((acc, key) => {\n        if (!exists(params[key])) {\n          return acc\n        }\n\n        const val = params[key]\n        const isSpatParam = this.isSpatParam(key)\n\n        if (typeof val === 'boolean') {\n          acc[key] = val\n        } else if (Array.isArray(val)) {\n          acc[key] = val.map(v =>\n            encodeParam(v, options.urlParamsEncoding, isSpatParam)\n          )\n        } else {\n          acc[key] = encodeParam(val, options.urlParamsEncoding, isSpatParam)\n        }\n\n        return acc\n      }, {})\n\n    // Check all params are provided (not search parameters which are optional)\n    if (this.urlParams.some(p => !exists(params[p]))) {\n      const missingParameters = this.urlParams.filter(p => !exists(params[p]))\n      throw new Error(\n        \"Cannot build path: '\" +\n          this.path +\n          \"' requires missing parameters { \" +\n          missingParameters.join(', ') +\n          ' }'\n      )\n    }\n\n    // Check constraints\n    if (!options.ignoreConstraints) {\n      const constraintsPassed = this.tokens\n        .filter(t => /^url-parameter/.test(t.type) && !/-splat$/.test(t.type))\n        .every(t =>\n          new RegExp('^' + defaultOrConstrained(t.otherVal[0]) + '$').test(\n            encodedUrlParams[t.val]\n          )\n        )\n\n      if (!constraintsPassed) {\n        throw new Error(\n          `Some parameters of '${this.path}' are of invalid format`\n        )\n      }\n    }\n\n    const base = this.tokens\n      .filter(t => /^query-parameter/.test(t.type) === false)\n      .map(t => {\n        if (t.type === 'url-parameter-matrix') {\n          return `;${t.val}=${encodedUrlParams[t.val[0]]}`\n        }\n\n        return /^url-parameter/.test(t.type)\n          ? encodedUrlParams[t.val[0]]\n          : t.match\n      })\n      .join('')\n\n    if (options.ignoreSearch) {\n      return base\n    }\n\n    const searchParams = this.queryParams\n      .filter(p => Object.keys(params).indexOf(p) !== -1)\n      .reduce<Record<string, any>>((sparams, paramName) => {\n        sparams[paramName] = params[paramName]\n        return sparams\n      }, {})\n    const searchPart = buildQueryParams(searchParams, options.queryParams)\n\n    return searchPart ? base + '?' + searchPart : base\n  }\n\n  private getParams(type: string | RegExp): string[] {\n    const predicate =\n      type instanceof RegExp\n        ? (t: Token) => type.test(t.type)\n        : (t: Token) => t.type === type\n\n    return this.tokens.filter(predicate).map(t => t.val[0])\n  }\n\n  private urlTest(\n    path: string,\n    source: string,\n    caseSensitive: boolean,\n    urlParamsEncoding: URLParamsEncodingType\n  ): TestMatch<T> {\n    const regex = new RegExp('^' + source, caseSensitive ? '' : 'i')\n    const match = path.match(regex)\n    if (!match) {\n      return null\n    } else if (!this.urlParams.length) {\n      return {} as T\n    }\n    // Reduce named params to key-value pairs\n    return match\n      .slice(1, this.urlParams.length + 1)\n      .reduce<Record<string, any>>((params, m, i) => {\n        params[this.urlParams[i]] = decodeParam(m, urlParamsEncoding)\n        return params\n      }, {}) as T\n  }\n}\n\nexport default Path\n","import { build } from 'search-params'\nimport {\n  BuildOptions,\n  MatchResponse,\n  RouteNode,\n  RouteNodeState,\n  RouteNodeStateMeta\n} from './RouteNode'\n\nexport const getMetaFromSegments = (\n  segments: RouteNode[]\n): RouteNodeStateMeta => {\n  let accName = ''\n\n  return segments.reduce<RouteNodeStateMeta>((meta, segment) => {\n    const urlParams =\n      segment.parser?.urlParams.reduce<Record<string, any>>((params, p) => {\n        params[p] = 'url'\n        return params\n      }, {}) ?? {}\n\n    const allParams =\n      segment.parser?.queryParams.reduce<Record<string, any>>((params, p) => {\n        params[p] = 'query'\n        return params\n      }, urlParams) ?? {}\n\n    if (segment.name !== undefined) {\n      accName = accName ? accName + '.' + segment.name : segment.name\n      meta[accName] = allParams\n    }\n    return meta\n  }, {})\n}\n\nexport const buildStateFromMatch = (\n  match: MatchResponse\n): RouteNodeState | null => {\n  if (!match || !match.segments || !match.segments.length) {\n    return null\n  }\n\n  const name = match.segments\n    .map(segment => segment.name)\n    .filter(name => name)\n    .join('.')\n  const params = match.params\n\n  return {\n    name,\n    params,\n    meta: getMetaFromSegments(match.segments)\n  }\n}\n\nexport const buildPathFromSegments = (\n  segments: RouteNode[],\n  params: Record<string, any> = {},\n  options: BuildOptions = {}\n) => {\n  const { queryParamsMode = 'default', trailingSlashMode = 'default' } = options\n  const searchParams: string[] = []\n  const nonSearchParams: string[] = []\n\n  for (const segment of segments) {\n    const { parser } = segment\n\n    if (parser) {\n      searchParams.push(...parser.queryParams)\n      nonSearchParams.push(...parser.urlParams)\n      nonSearchParams.push(...parser.spatParams)\n    }\n  }\n\n  if (queryParamsMode === 'loose') {\n    const extraParams = Object.keys(params).reduce<string[]>(\n      (acc, p) =>\n        searchParams.indexOf(p) === -1 && nonSearchParams.indexOf(p) === -1\n          ? acc.concat(p)\n          : acc,\n      []\n    )\n    searchParams.push(...extraParams)\n  }\n\n  const searchParamsObject = searchParams.reduce<Record<string, any>>(\n    (acc, paramName) => {\n      if (Object.keys(params).indexOf(paramName) !== -1) {\n        acc[paramName] = params[paramName]\n      }\n\n      return acc\n    },\n    {}\n  )\n\n  const searchPart = build(searchParamsObject, options.queryParams)\n\n  const path = segments\n    .reduce<string>((path, segment) => {\n      const segmentPath =\n        segment.parser?.build(params, {\n          ignoreSearch: true,\n          queryParams: options.queryParams,\n          urlParamsEncoding: options.urlParamsEncoding\n        }) ?? ''\n\n      return segment.absolute ? segmentPath : path + segmentPath\n    }, '')\n    // remove repeated slashes\n    .replace(/\\/\\/{1,}/g, '/')\n\n  let finalPath = path\n\n  if (trailingSlashMode === 'always') {\n    finalPath = /\\/$/.test(path) ? path : `${path}/`\n  } else if (trailingSlashMode === 'never' && path !== '/') {\n    finalPath = /\\/$/.test(path) ? path.slice(0, -1) : path\n  }\n\n  return finalPath + (searchPart ? '?' + searchPart : '')\n}\n\nexport const getPathFromSegments = (segments: RouteNode[]): string | null =>\n  segments ? segments.map(segment => segment.path).join('') : null\n","import { omit, parse } from 'search-params'\nimport { MatchOptions, MatchResponse, RouteNode } from './RouteNode'\nimport { TestMatch } from 'path-parser'\n\nconst getPath = (path: string): string => path.split('?')[0]\n\nconst getSearch = (path: string): string => path.split('?')[1] || ''\n\nconst matchChildren = (\n  nodes: RouteNode[],\n  pathSegment: string,\n  currentMatch: MatchResponse,\n  options: MatchOptions = {},\n  consumedBefore?: string\n): MatchResponse | null => {\n  const {\n    queryParamsMode = 'default',\n    strictTrailingSlash = false,\n    strongMatching = true,\n    caseSensitive = false\n  } = options\n  const isRoot = nodes.length === 1 && nodes[0].name === ''\n  // for (child of node.children) {\n  for (const child of nodes) {\n    // Partially match path\n    let match: TestMatch | null = null\n    let remainingPath\n    let segment = pathSegment\n\n    if (consumedBefore === '/' && child.path === '/') {\n      // when we encounter repeating slashes we add the slash\n      // back to the URL to make it de facto pathless\n      segment = '/' + pathSegment\n    }\n\n    if (!child.children.length) {\n      match = child.parser!.test(segment, {\n        caseSensitive,\n        strictTrailingSlash,\n        queryParams: options.queryParams,\n        urlParamsEncoding: options.urlParamsEncoding\n      })\n    }\n\n    if (!match) {\n      match = child.parser!.partialTest(segment, {\n        delimited: strongMatching,\n        caseSensitive,\n        queryParams: options.queryParams,\n        urlParamsEncoding: options.urlParamsEncoding\n      })\n    }\n\n    if (match) {\n      // Remove consumed segment from path\n      let consumedPath = child.parser!.build(match, {\n        ignoreSearch: true,\n        urlParamsEncoding: options.urlParamsEncoding\n      })\n\n      if (!strictTrailingSlash && !child.children.length) {\n        consumedPath = consumedPath.replace(/\\/$/, '')\n      }\n\n      // Can't create a regexp from the path because it might contain a\n      // regexp character.\n      if (segment.toLowerCase().indexOf(consumedPath.toLowerCase()) === 0) {\n        remainingPath = segment.slice(consumedPath.length)\n      } else {\n        remainingPath = segment\n      }\n\n      if (!strictTrailingSlash && !child.children.length) {\n        remainingPath = remainingPath.replace(/^\\/\\?/, '?')\n      }\n\n      const { querystring } = omit(\n        getSearch(segment.replace(consumedPath, '')),\n        child.parser!.queryParams,\n        options.queryParams\n      )\n      remainingPath =\n        getPath(remainingPath) + (querystring ? `?${querystring}` : '')\n      if (\n        !strictTrailingSlash &&\n        !isRoot &&\n        remainingPath === '/' &&\n        !/\\/$/.test(consumedPath)\n      ) {\n        remainingPath = ''\n      }\n\n      currentMatch.segments.push(child)\n      Object.keys(match).forEach(\n        param => (currentMatch.params[param] = match![param])\n      )\n\n      if (!isRoot && !remainingPath.length) {\n        // fully matched\n        return currentMatch\n      }\n      if (\n        !isRoot &&\n        queryParamsMode !== 'strict' &&\n        remainingPath.indexOf('?') === 0\n      ) {\n        // unmatched queryParams in non strict mode\n        const remainingQueryParams = parse(\n          remainingPath.slice(1),\n          options.queryParams\n        ) as any\n\n        Object.keys(remainingQueryParams).forEach(\n          name => (currentMatch.params[name] = remainingQueryParams[name])\n        )\n        return currentMatch\n      }\n      // Continue matching on non absolute children\n      const children = child.getNonAbsoluteChildren()\n      // If no children to match against but unmatched path left\n      if (!children.length) {\n        return null\n      }\n      // Else: remaining path and children\n      return matchChildren(\n        children,\n        remainingPath,\n        currentMatch,\n        options,\n        consumedPath\n      )\n    }\n  }\n\n  return null\n}\n\nexport default matchChildren\n","import { RouteNode } from './RouteNode'\n\nexport default function sortChildren(children: RouteNode[]) {\n  const originalChildren = children.slice(0)\n\n  return children.sort(sortPredicate(originalChildren))\n}\n\nconst sortPredicate = (originalChildren: RouteNode[]) => (\n  left: RouteNode,\n  right: RouteNode\n): number => {\n  const leftPath = left.path\n    .replace(/<.*?>/g, '')\n    .split('?')[0]\n    .replace(/(.+)\\/$/, '$1')\n  const rightPath = right.path\n    .replace(/<.*?>/g, '')\n    .split('?')[0]\n    .replace(/(.+)\\/$/, '$1')\n\n  // '/' last\n  if (leftPath === '/') {\n    return 1\n  }\n  if (rightPath === '/') {\n    return -1\n  }\n  // Spat params last\n  if (left.parser?.hasSpatParam) {\n    return 1\n  }\n  if (right.parser?.hasSpatParam) {\n    return -1\n  }\n  // No spat, number of segments (less segments last)\n  const leftSegments = (leftPath.match(/\\//g) || []).length\n  const rightSegments = (rightPath.match(/\\//g) || []).length\n  if (leftSegments < rightSegments) {\n    return 1\n  }\n  if (leftSegments > rightSegments) {\n    return -1\n  }\n  // Same number of segments, number of URL params ascending\n  const leftParamsCount = left.parser?.urlParams.length ?? 0\n  const rightParamsCount = right.parser?.urlParams.length ?? 0\n  if (leftParamsCount < rightParamsCount) {\n    return -1\n  }\n  if (leftParamsCount > rightParamsCount) {\n    return 1\n  }\n  // Same number of segments and params, last segment length descending\n  const leftParamLength = (leftPath.split('/').slice(-1)[0] || '').length\n  const rightParamLength = (rightPath.split('/').slice(-1)[0] || '').length\n  if (leftParamLength < rightParamLength) {\n    return 1\n  }\n  if (leftParamLength > rightParamLength) {\n    return -1\n  }\n  // Same last segment length, preserve definition order. Note that we\n  // cannot just return 0, as sort is not guaranteed to be a stable sort.\n  return originalChildren.indexOf(left) - originalChildren.indexOf(right)\n}\n","import { Path, URLParamsEncodingType } from 'path-parser'\nimport { IOptions as QueryParamsOptions } from 'search-params'\n\nimport {\n  buildPathFromSegments,\n  buildStateFromMatch,\n  getMetaFromSegments,\n  getPathFromSegments\n} from './helpers'\nimport matchChildren from './matchChildren'\nimport sortChildren from './sortChildren'\n\nexport interface RouteDefinition {\n  name: string\n  path: string\n  [key: string]: any\n}\nexport type Route = RouteNode | RouteDefinition\nexport type Callback = (...args: any[]) => void\nexport type TrailingSlashMode = 'default' | 'never' | 'always'\nexport type QueryParamsMode = 'default' | 'strict' | 'loose'\n\nexport interface BuildOptions {\n  trailingSlashMode?: TrailingSlashMode\n  queryParamsMode?: QueryParamsMode\n  queryParams?: QueryParamsOptions\n  urlParamsEncoding?: URLParamsEncodingType\n}\n\nexport interface MatchOptions {\n  caseSensitive?: boolean\n  trailingSlashMode?: TrailingSlashMode\n  queryParamsMode?: QueryParamsMode\n  queryParams?: QueryParamsOptions\n  strictTrailingSlash?: boolean\n  strongMatching?: boolean\n  urlParamsEncoding?: URLParamsEncodingType\n}\n\nexport { QueryParamsOptions }\n\nexport interface MatchResponse {\n  segments: RouteNode[]\n  params: Record<string, any>\n}\n\nexport interface RouteNodeStateMeta {\n  [routeName: string]: {\n    [routeParams: string]: 'query' | 'url'\n  }\n}\n\nexport interface RouteNodeState {\n  name: string\n  params: Record<string, any>\n  meta: RouteNodeStateMeta\n}\n\nexport interface RouteNodeOptions {\n  finalSort?: boolean\n  onAdd?: Callback\n  parent?: RouteNode\n  sort?: boolean\n}\n\nexport class RouteNode {\n  public name: string\n  public absolute: boolean\n  public path: string\n  public parser: Path | null\n  public children: RouteNode[]\n  public parent?: RouteNode\n\n  constructor(\n    name: string = '',\n    path: string = '',\n    childRoutes: Route[] = [],\n    options: RouteNodeOptions = {}\n  ) {\n    this.name = name\n    this.absolute = /^~/.test(path)\n    this.path = this.absolute ? path.slice(1) : path\n\n    this.parser = this.path ? new Path(this.path) : null\n    this.children = []\n    this.parent = options.parent\n\n    this.checkParents()\n\n    this.add(\n      childRoutes,\n      options.onAdd,\n      options.finalSort ? false : options.sort !== false\n    )\n\n    if (options.finalSort) {\n      this.sortDescendants()\n    }\n\n    return this\n  }\n\n  public getParentSegments(segments: RouteNode[] = []): RouteNode[] {\n    return this.parent && this.parent.parser\n      ? this.parent.getParentSegments(segments.concat(this.parent))\n      : segments.reverse()\n  }\n\n  public setParent(parent: RouteNode) {\n    this.parent = parent\n    this.checkParents()\n  }\n\n  public setPath(path: string = '') {\n    this.path = path\n    this.parser = path ? new Path(path) : null\n  }\n\n  public add(\n    route: Route | Route[],\n    cb?: Callback,\n    sort: boolean = true\n  ): this {\n    if (route === undefined || route === null) {\n      return this\n    }\n\n    if (route instanceof Array) {\n      route.forEach(r => this.add(r, cb, sort))\n      return this\n    }\n\n    if (!(route instanceof RouteNode) && !(route instanceof Object)) {\n      throw new Error(\n        'RouteNode.add() expects routes to be an Object or an instance of RouteNode.'\n      )\n    } else if (route instanceof RouteNode) {\n      route.setParent(this)\n      this.addRouteNode(route, sort)\n    } else {\n      if (!route.name || !route.path) {\n        throw new Error(\n          'RouteNode.add() expects routes to have a name and a path defined.'\n        )\n      }\n\n      const routeNode = new RouteNode(route.name, route.path, route.children, {\n        finalSort: false,\n        onAdd: cb,\n        parent: this,\n        sort\n      })\n      const fullName = routeNode\n        .getParentSegments([routeNode])\n        .map(_ => _.name)\n        .join('.')\n      if (cb) {\n        cb({\n          ...route,\n          name: fullName\n        })\n      }\n      this.addRouteNode(routeNode, sort)\n    }\n\n    return this\n  }\n\n  public addNode(name: string, path: string) {\n    this.add(new RouteNode(name, path))\n    return this\n  }\n\n  public getPath(routeName: string): string | null {\n    const segmentsByName = this.getSegmentsByName(routeName)\n\n    return segmentsByName ? getPathFromSegments(segmentsByName) : null\n  }\n\n  public getNonAbsoluteChildren(): RouteNode[] {\n    return this.children.filter(child => !child.absolute)\n  }\n\n  public sortChildren() {\n    if (this.children.length) {\n      sortChildren(this.children)\n    }\n  }\n\n  public sortDescendants() {\n    this.sortChildren()\n    this.children.forEach(child => child.sortDescendants())\n  }\n\n  public buildPath(\n    routeName: string,\n    params: Record<string, any> = {},\n    options: BuildOptions = {}\n  ): string {\n    const segments = this.getSegmentsByName(routeName)\n\n    if (!segments) {\n      throw new Error(`[route-node][buildPath] '{routeName}' is not defined`)\n    }\n\n    return buildPathFromSegments(segments, params, options)\n  }\n\n  public buildState(\n    name: string,\n    params: Record<string, any> = {}\n  ): RouteNodeState | null {\n    const segments = this.getSegmentsByName(name)\n\n    if (!segments || !segments.length) {\n      return null\n    }\n\n    return {\n      name,\n      params,\n      meta: getMetaFromSegments(segments)\n    }\n  }\n\n  public matchPath(\n    path: string,\n    options: MatchOptions = {}\n  ): RouteNodeState | null {\n    if (path === '' && !options.strictTrailingSlash) {\n      path = '/'\n    }\n\n    const match = this.getSegmentsMatchingPath(path, options)\n\n    if (!match) {\n      return null\n    }\n\n    const matchedSegments = match.segments\n\n    if (matchedSegments[0].absolute) {\n      const firstSegmentParams = matchedSegments[0].getParentSegments()\n\n      matchedSegments.reverse()\n      matchedSegments.push(...firstSegmentParams)\n      matchedSegments.reverse()\n    }\n\n    const lastSegment = matchedSegments[matchedSegments.length - 1]\n    const lastSegmentSlashChild = lastSegment.findSlashChild()\n\n    if (lastSegmentSlashChild) {\n      matchedSegments.push(lastSegmentSlashChild)\n    }\n\n    return buildStateFromMatch(match)\n  }\n\n  private addRouteNode(route: RouteNode, sort: boolean = true): this {\n    const names = route.name.split('.')\n\n    if (names.length === 1) {\n      // Check duplicated routes\n      if (this.children.map(child => child.name).indexOf(route.name) !== -1) {\n        throw new Error(\n          `Alias \"${route.name}\" is already defined in route node`\n        )\n      }\n\n      // Check duplicated paths\n      if (this.children.map(child => child.path).indexOf(route.path) !== -1) {\n        throw new Error(`Path \"${route.path}\" is already defined in route node`)\n      }\n\n      this.children.push(route)\n\n      if (sort) {\n        this.sortChildren()\n      }\n    } else {\n      // Locate parent node\n      const segments = this.getSegmentsByName(names.slice(0, -1).join('.'))\n      if (segments) {\n        route.name = names[names.length - 1]\n        segments[segments.length - 1].add(route)\n      } else {\n        throw new Error(\n          `Could not add route named '${route.name}', parent is missing.`\n        )\n      }\n    }\n\n    return this\n  }\n\n  private checkParents() {\n    if (this.absolute && this.hasParentsParams()) {\n      throw new Error(\n        '[RouteNode] A RouteNode with an abolute path cannot have parents with route parameters'\n      )\n    }\n  }\n\n  private hasParentsParams(): boolean {\n    if (this.parent && this.parent.parser) {\n      const parser = this.parent.parser\n      const hasParams =\n        parser.hasUrlParams ||\n        parser.hasSpatParam ||\n        parser.hasMatrixParams ||\n        parser.hasQueryParams\n\n      return hasParams || this.parent.hasParentsParams()\n    }\n\n    return false\n  }\n\n  private findAbsoluteChildren(): RouteNode[] {\n    return this.children.reduce<RouteNode[]>(\n      (absoluteChildren, child) =>\n        absoluteChildren\n          .concat(child.absolute ? child : [])\n          .concat(child.findAbsoluteChildren()),\n      []\n    )\n  }\n\n  private findSlashChild(): RouteNode | undefined {\n    const slashChildren = this.getNonAbsoluteChildren().filter(\n      child => child.parser && /^\\/(\\?|$)/.test(child.parser.path)\n    )\n\n    return slashChildren[0]\n  }\n\n  private getSegmentsByName(routeName: string): RouteNode[] | null {\n    const findSegmentByName = (name: string, routes: RouteNode[]) => {\n      const filteredRoutes = routes.filter(r => r.name === name)\n      return filteredRoutes.length ? filteredRoutes[0] : undefined\n    }\n    const segments: RouteNode[] = []\n    let routes = this.parser ? [this] : this.children\n    const names = (this.parser ? [''] : []).concat(routeName.split('.'))\n\n    const matched = names.every(name => {\n      const segment = findSegmentByName(name, routes)\n      if (segment) {\n        routes = segment.children\n        segments.push(segment)\n        return true\n      }\n      return false\n    })\n\n    return matched ? segments : null\n  }\n\n  private getSegmentsMatchingPath(\n    path: string,\n    options: MatchOptions\n  ): MatchResponse | null {\n    const topLevelNodes = this.parser ? [this] : this.children\n    const startingNodes = topLevelNodes.reduce<RouteNode[]>(\n      (nodes, node) => nodes.concat(node, node.findAbsoluteChildren()),\n      []\n    )\n\n    const currentMatch = {\n      segments: [],\n      params: {}\n    }\n\n    const finalMatch = matchChildren(startingNodes, path, currentMatch, options)\n\n    if (\n      finalMatch &&\n      finalMatch.segments.length === 1 &&\n      finalMatch.segments[0].name === ''\n    ) {\n      return null\n    }\n\n    return finalMatch\n  }\n}\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","var nameToIDs = function (name) {\r\n    return name\r\n        .split('.')\r\n        .reduce(function (ids, name) {\r\n        return ids.concat(ids.length ? ids[ids.length - 1] + '.' + name : name);\r\n    }, []);\r\n};\r\nvar exists = function (val) { return val !== undefined && val !== null; };\r\nvar hasMetaParams = function (state) { return state && state.meta && state.meta.params; };\r\nvar extractSegmentParams = function (name, state) {\r\n    if (!hasMetaParams(state) || !exists(state.meta.params[name]))\r\n        return {};\r\n    return Object.keys(state.meta.params[name]).reduce(function (params, p) {\r\n        params[p] = state.params[p];\r\n        return params;\r\n    }, {});\r\n};\r\nfunction transitionPath(toState, fromState) {\r\n    var toStateOptions = (toState.meta && toState.meta && toState.meta.options) || {};\r\n    var fromStateIds = fromState ? nameToIDs(fromState.name) : [];\r\n    var toStateIds = nameToIDs(toState.name);\r\n    var maxI = Math.min(fromStateIds.length, toStateIds.length);\r\n    function pointOfDifference() {\r\n        var i;\r\n        var _loop_1 = function () {\r\n            var left = fromStateIds[i];\r\n            var right = toStateIds[i];\r\n            if (left !== right)\r\n                return { value: i };\r\n            var leftParams = extractSegmentParams(left, toState);\r\n            var rightParams = extractSegmentParams(right, fromState);\r\n            if (Object.keys(leftParams).length !==\r\n                Object.keys(rightParams).length)\r\n                return { value: i };\r\n            if (Object.keys(leftParams).length === 0)\r\n                return \"continue\";\r\n            var different = Object.keys(leftParams).some(function (p) { return rightParams[p] !== leftParams[p]; });\r\n            if (different) {\r\n                return { value: i };\r\n            }\r\n        };\r\n        for (i = 0; i < maxI; i += 1) {\r\n            var state_1 = _loop_1();\r\n            if (typeof state_1 === \"object\")\r\n                return state_1.value;\r\n        }\r\n        return i;\r\n    }\r\n    var i;\r\n    if (!fromState || toStateOptions.reload) {\r\n        i = 0;\r\n    }\r\n    else if (!hasMetaParams(fromState) && !hasMetaParams(toState)) {\r\n        i = 0;\r\n    }\r\n    else {\r\n        i = pointOfDifference();\r\n    }\r\n    var toDeactivate = fromStateIds.slice(i).reverse();\r\n    var toActivate = toStateIds.slice(i);\r\n    var intersection = fromState && i > 0 ? fromStateIds[i - 1] : '';\r\n    return {\r\n        intersection: intersection,\r\n        toDeactivate: toDeactivate,\r\n        toActivate: toActivate\r\n    };\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nfunction shouldUpdateNode(nodeName) {\r\n    return function (toState, fromSate) {\r\n        var _a = transitionPath(toState, fromSate), intersection = _a.intersection, toActivate = _a.toActivate, toDeactivateReversed = _a.toDeactivate;\r\n        var toDeactivate = __spreadArrays(toDeactivateReversed).reverse();\r\n        if (toState.meta.options && toState.meta.options.reload) {\r\n            return true;\r\n        }\r\n        if (nodeName === intersection) {\r\n            return true;\r\n        }\r\n        if (toActivate.indexOf(nodeName) === -1) {\r\n            return false;\r\n        }\r\n        var matching = true;\r\n        for (var i = 0; i < toActivate.length; i += 1) {\r\n            var activatedSegment = toActivate[i];\r\n            var sameLevelDeactivatedSegment = toDeactivate[i];\r\n            matching = activatedSegment === sameLevelDeactivatedSegment;\r\n            if (matching && activatedSegment === nodeName) {\r\n                return true;\r\n            }\r\n            if (!matching) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n}\n\nexport default transitionPath;\nexport { nameToIDs, shouldUpdateNode };\n","import { RouteNode } from 'route-node';\nexport { RouteNode } from 'route-node';\nimport $$observable from 'symbol-observable';\nimport transitionPath, { nameToIDs } from 'router5-transition-path';\nexport { default as transitionPath } from 'router5-transition-path';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultOptions = {\r\n    trailingSlashMode: 'default',\r\n    queryParamsMode: 'default',\r\n    strictTrailingSlash: false,\r\n    autoCleanUp: true,\r\n    allowNotFound: false,\r\n    strongMatching: true,\r\n    rewritePathOnMatch: true,\r\n    caseSensitive: false,\r\n    urlParamsEncoding: 'default'\r\n};\r\nfunction withOptions(options) {\r\n    return function (router) {\r\n        var routerOptions = __assign(__assign({}, defaultOptions), options);\r\n        router.getOptions = function () { return routerOptions; };\r\n        router.setOption = function (option, value) {\r\n            routerOptions[option] = value;\r\n            return router;\r\n        };\r\n        return router;\r\n    };\r\n}\n\nvar errorCodes = {\r\n    ROUTER_NOT_STARTED: 'NOT_STARTED',\r\n    NO_START_PATH_OR_STATE: 'NO_START_PATH_OR_STATE',\r\n    ROUTER_ALREADY_STARTED: 'ALREADY_STARTED',\r\n    ROUTE_NOT_FOUND: 'ROUTE_NOT_FOUND',\r\n    SAME_STATES: 'SAME_STATES',\r\n    CANNOT_DEACTIVATE: 'CANNOT_DEACTIVATE',\r\n    CANNOT_ACTIVATE: 'CANNOT_ACTIVATE',\r\n    TRANSITION_ERR: 'TRANSITION_ERR',\r\n    TRANSITION_CANCELLED: 'CANCELLED'\r\n};\r\nvar constants = {\r\n    UNKNOWN_ROUTE: '@@router5/UNKNOWN_ROUTE',\r\n    ROUTER_START: '$start',\r\n    ROUTER_STOP: '$stop',\r\n    TRANSITION_START: '$$start',\r\n    TRANSITION_CANCEL: '$$cancel',\r\n    TRANSITION_SUCCESS: '$$success',\r\n    TRANSITION_ERROR: '$$error'\r\n};\n\nfunction withRoutes(routes) {\r\n    return function (router) {\r\n        router.forward = function (fromRoute, toRoute) {\r\n            router.config.forwardMap[fromRoute] = toRoute;\r\n            return router;\r\n        };\r\n        var rootNode = routes instanceof RouteNode\r\n            ? routes\r\n            : new RouteNode('', '', routes, { onAdd: onRouteAdded });\r\n        function onRouteAdded(route) {\r\n            if (route.canActivate)\r\n                router.canActivate(route.name, route.canActivate);\r\n            if (route.forwardTo)\r\n                router.forward(route.name, route.forwardTo);\r\n            if (route.decodeParams)\r\n                router.config.decoders[route.name] = route.decodeParams;\r\n            if (route.encodeParams)\r\n                router.config.encoders[route.name] = route.encodeParams;\r\n            if (route.defaultParams)\r\n                router.config.defaultParams[route.name] = route.defaultParams;\r\n        }\r\n        router.rootNode = rootNode;\r\n        router.add = function (routes, finalSort) {\r\n            rootNode.add(routes, onRouteAdded, !finalSort);\r\n            if (finalSort) {\r\n                rootNode.sortDescendants();\r\n            }\r\n            return router;\r\n        };\r\n        router.addNode = function (name, path, canActivateHandler) {\r\n            rootNode.addNode(name, path);\r\n            if (canActivateHandler)\r\n                router.canActivate(name, canActivateHandler);\r\n            return router;\r\n        };\r\n        router.isActive = function (name, params, strictEquality, ignoreQueryParams) {\r\n            if (params === void 0) { params = {}; }\r\n            if (strictEquality === void 0) { strictEquality = false; }\r\n            if (ignoreQueryParams === void 0) { ignoreQueryParams = true; }\r\n            var activeState = router.getState();\r\n            if (!activeState)\r\n                return false;\r\n            if (strictEquality || activeState.name === name) {\r\n                return router.areStatesEqual(router.makeState(name, params), activeState, ignoreQueryParams);\r\n            }\r\n            return router.areStatesDescendants(router.makeState(name, params), activeState);\r\n        };\r\n        router.buildPath = function (route, params) {\r\n            if (route === constants.UNKNOWN_ROUTE) {\r\n                return params.path;\r\n            }\r\n            var paramsWithDefault = __assign(__assign({}, router.config.defaultParams[route]), params);\r\n            var _a = router.getOptions(), trailingSlashMode = _a.trailingSlashMode, queryParamsMode = _a.queryParamsMode, queryParams = _a.queryParams;\r\n            var encodedParams = router.config.encoders[route]\r\n                ? router.config.encoders[route](paramsWithDefault)\r\n                : paramsWithDefault;\r\n            return router.rootNode.buildPath(route, encodedParams, {\r\n                trailingSlashMode: trailingSlashMode,\r\n                queryParamsMode: queryParamsMode,\r\n                queryParams: queryParams,\r\n                urlParamsEncoding: router.getOptions().urlParamsEncoding\r\n            });\r\n        };\r\n        router.matchPath = function (path, source) {\r\n            var options = router.getOptions();\r\n            var match = router.rootNode.matchPath(path, options);\r\n            if (match) {\r\n                var name_1 = match.name, params = match.params, meta = match.meta;\r\n                var decodedParams = router.config.decoders[name_1]\r\n                    ? router.config.decoders[name_1](params)\r\n                    : params;\r\n                var _a = router.forwardState(name_1, decodedParams), routeName = _a.name, routeParams = _a.params;\r\n                var builtPath = options.rewritePathOnMatch === false\r\n                    ? path\r\n                    : router.buildPath(routeName, routeParams);\r\n                return router.makeState(routeName, routeParams, builtPath, {\r\n                    params: meta,\r\n                    source: source\r\n                });\r\n            }\r\n            return null;\r\n        };\r\n        router.setRootPath = function (rootPath) {\r\n            router.rootNode.setPath(rootPath);\r\n        };\r\n        return router;\r\n    };\r\n}\n\nfunction withDependencies(dependencies) {\r\n    return function (router) {\r\n        var routerDependencies = dependencies;\r\n        router.setDependency = function (dependencyName, dependency) {\r\n            routerDependencies[dependencyName] = dependency;\r\n            return router;\r\n        };\r\n        router.setDependencies = function (deps) {\r\n            Object.keys(deps).forEach(function (name) {\r\n                return router.setDependency(name, deps[name]);\r\n            });\r\n            return router;\r\n        };\r\n        router.getDependencies = function () { return routerDependencies; };\r\n        router.getInjectables = function () { return [router, router.getDependencies()]; };\r\n        router.executeFactory = function (factoryFunction) {\r\n            return factoryFunction.apply(void 0, router.getInjectables());\r\n        };\r\n        return router;\r\n    };\r\n}\n\nfunction withState(router) {\r\n    var stateId = 0;\r\n    var routerState = null;\r\n    router.getState = function () { return routerState; };\r\n    router.setState = function (state) {\r\n        routerState = state;\r\n    };\r\n    router.makeState = function (name, params, path, meta, forceId) { return ({\r\n        name: name,\r\n        params: __assign(__assign({}, router.config.defaultParams[name]), params),\r\n        path: path,\r\n        meta: meta\r\n            ? __assign(__assign({}, meta), { id: forceId === undefined ? ++stateId : forceId }) : undefined\r\n    }); };\r\n    router.makeNotFoundState = function (path, options) {\r\n        return router.makeState(constants.UNKNOWN_ROUTE, { path: path }, path, {\r\n            options: options\r\n        });\r\n    };\r\n    router.areStatesEqual = function (state1, state2, ignoreQueryParams) {\r\n        if (ignoreQueryParams === void 0) { ignoreQueryParams = true; }\r\n        if (state1.name !== state2.name)\r\n            return false;\r\n        var getUrlParams = function (name) {\r\n            return router.rootNode\r\n                //@ts-ignore\r\n                .getSegmentsByName(name)\r\n                .map(function (segment) { return segment.parser['urlParams']; })\r\n                .reduce(function (params, p) { return params.concat(p); }, []);\r\n        };\r\n        var state1Params = ignoreQueryParams\r\n            ? getUrlParams(state1.name)\r\n            : Object.keys(state1.params);\r\n        var state2Params = ignoreQueryParams\r\n            ? getUrlParams(state2.name)\r\n            : Object.keys(state2.params);\r\n        return (state1Params.length === state2Params.length &&\r\n            state1Params.every(function (p) { return state1.params[p] === state2.params[p]; }));\r\n    };\r\n    router.areStatesDescendants = function (parentState, childState) {\r\n        var regex = new RegExp('^' + parentState.name + '\\\\.(.*)$');\r\n        if (!regex.test(childState.name))\r\n            return false;\r\n        // If child state name extends parent state name, and all parent state params\r\n        // are in child state params.\r\n        return Object.keys(parentState.params).every(function (p) { return parentState.params[p] === childState.params[p]; });\r\n    };\r\n    router.forwardState = function (routeName, routeParams) {\r\n        var name = router.config.forwardMap[routeName] || routeName;\r\n        var params = __assign(__assign(__assign({}, router.config.defaultParams[routeName]), router.config.defaultParams[name]), routeParams);\r\n        return {\r\n            name: name,\r\n            params: params\r\n        };\r\n    };\r\n    router.buildState = function (routeName, routeParams) {\r\n        var _a = router.forwardState(routeName, routeParams), name = _a.name, params = _a.params;\r\n        return router.rootNode.buildState(name, params);\r\n    };\r\n    return router;\r\n}\n\nvar eventsMap = {\r\n    onStart: constants.ROUTER_START,\r\n    onStop: constants.ROUTER_STOP,\r\n    onTransitionSuccess: constants.TRANSITION_SUCCESS,\r\n    onTransitionStart: constants.TRANSITION_START,\r\n    onTransitionError: constants.TRANSITION_ERROR,\r\n    onTransitionCancel: constants.TRANSITION_CANCEL\r\n};\r\nfunction withPlugins(router) {\r\n    var routerPlugins = [];\r\n    router.getPlugins = function () { return routerPlugins; };\r\n    router.usePlugin = function () {\r\n        var plugins = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            plugins[_i] = arguments[_i];\r\n        }\r\n        var removePluginFns = plugins.map(function (plugin) {\r\n            routerPlugins.push(plugin);\r\n            return startPlugin(plugin);\r\n        });\r\n        return function () {\r\n            routerPlugins = routerPlugins.filter(function (plugin) { return plugins.indexOf(plugin) === -1; });\r\n            removePluginFns.forEach(function (removePlugin) { return removePlugin(); });\r\n        };\r\n    };\r\n    function startPlugin(plugin) {\r\n        var appliedPlugin = router.executeFactory(plugin);\r\n        var removeEventListeners = Object.keys(eventsMap)\r\n            .map(function (methodName) {\r\n            if (appliedPlugin[methodName]) {\r\n                return router.addEventListener(eventsMap[methodName], appliedPlugin[methodName]);\r\n            }\r\n        })\r\n            .filter(Boolean);\r\n        return function () {\r\n            removeEventListeners.forEach(function (removeListener) { return removeListener(); });\r\n            if (appliedPlugin.teardown) {\r\n                appliedPlugin.teardown();\r\n            }\r\n        };\r\n    }\r\n    return router;\r\n}\n\nfunction withMiddleware(router) {\r\n    var middlewareFactories = [];\r\n    var middlewareFunctions = [];\r\n    router.useMiddleware = function () {\r\n        var middlewares = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            middlewares[_i] = arguments[_i];\r\n        }\r\n        var removePluginFns = middlewares.map(function (middleware) {\r\n            var middlewareFunction = router.executeFactory(middleware);\r\n            middlewareFactories.push(middleware);\r\n            middlewareFunctions.push(middlewareFunction);\r\n            return function () {\r\n                middlewareFactories = middlewareFactories.filter(function (m) { return m !== middleware; });\r\n                middlewareFunctions = middlewareFunctions.filter(function (m) { return m !== middlewareFunction; });\r\n            };\r\n        });\r\n        return function () { return removePluginFns.forEach(function (fn) { return fn(); }); };\r\n    };\r\n    router.clearMiddleware = function () {\r\n        middlewareFactories = [];\r\n        middlewareFunctions = [];\r\n        return router;\r\n    };\r\n    router.getMiddlewareFactories = function () { return middlewareFactories; };\r\n    router.getMiddlewareFunctions = function () { return middlewareFunctions; };\r\n    return router;\r\n}\n\nfunction withObservability(router) {\r\n    var callbacks = {};\r\n    router.invokeEventListeners = function (eventName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        (callbacks[eventName] || []).forEach(function (cb) { return cb.apply(void 0, args); });\r\n    };\r\n    router.removeEventListener = function (eventName, cb) {\r\n        callbacks[eventName] = callbacks[eventName].filter(function (_cb) { return _cb !== cb; });\r\n    };\r\n    router.addEventListener = function (eventName, cb) {\r\n        callbacks[eventName] = (callbacks[eventName] || []).concat(cb);\r\n        return function () { return router.removeEventListener(eventName, cb); };\r\n    };\r\n    function subscribe(listener) {\r\n        var isObject = typeof listener === 'object';\r\n        var finalListener = isObject ? listener.next.bind(listener) : listener;\r\n        var unsubscribeHandler = router.addEventListener(constants.TRANSITION_SUCCESS, function (toState, fromState) {\r\n            finalListener({\r\n                route: toState,\r\n                previousRoute: fromState\r\n            });\r\n        });\r\n        return isObject\r\n            ? { unsubscribe: unsubscribeHandler }\r\n            : unsubscribeHandler;\r\n    }\r\n    function observable() {\r\n        var _a;\r\n        return _a = {\r\n                subscribe: function (observer) {\r\n                    if (typeof observer !== 'object' || observer === null) {\r\n                        throw new TypeError('Expected the observer to be an object.');\r\n                    }\r\n                    return subscribe(observer);\r\n                }\r\n            },\r\n            _a[$$observable] = function () {\r\n                return this;\r\n            },\r\n            _a;\r\n    }\r\n    router.subscribe = subscribe;\r\n    //@ts-ignore\r\n    router[$$observable] = observable;\r\n    //@ts-ignore\r\n    router['@@observable'] = observable;\r\n    return router;\r\n}\n\nfunction resolve(functions, _a, callback) {\r\n    var isCancelled = _a.isCancelled, toState = _a.toState, fromState = _a.fromState, _b = _a.errorKey, errorKey = _b === void 0 ? undefined : _b;\r\n    var remainingFunctions = Array.isArray(functions)\r\n        ? functions\r\n        : Object.keys(functions);\r\n    var isState = function (obj) {\r\n        return typeof obj === 'object' &&\r\n            obj.name !== undefined &&\r\n            obj.params !== undefined &&\r\n            obj.path !== undefined;\r\n    };\r\n    var hasStateChanged = function (toState, fromState) {\r\n        return fromState.name !== toState.name ||\r\n            fromState.params !== toState.params ||\r\n            fromState.path !== toState.path;\r\n    };\r\n    var mergeStates = function (toState, fromState) { return (__assign(__assign(__assign({}, fromState), toState), { meta: __assign(__assign({}, fromState.meta), toState.meta) })); };\r\n    var processFn = function (stepFn, errBase, state, _done) {\r\n        var done = function (err, newState) {\r\n            if (err) {\r\n                _done(err);\r\n            }\r\n            else if (newState && newState !== state && isState(newState)) {\r\n                if (hasStateChanged(newState, state)) {\r\n                    console.error('[router5][transition] Warning: state values (name, params, path) were changed during transition process.');\r\n                }\r\n                _done(null, mergeStates(newState, state));\r\n            }\r\n            else {\r\n                _done(null, state);\r\n            }\r\n        };\r\n        var res = stepFn.call(null, state, fromState, done);\r\n        if (isCancelled()) {\r\n            done(null);\r\n        }\r\n        else if (typeof res === 'boolean') {\r\n            done(res ? null : errBase);\r\n        }\r\n        else if (isState(res)) {\r\n            done(null, res);\r\n        }\r\n        else if (res && typeof res.then === 'function') {\r\n            res.then(function (resVal) {\r\n                if (resVal instanceof Error)\r\n                    done({ error: resVal }, null);\r\n                else\r\n                    done(null, resVal);\r\n            }, function (err) {\r\n                if (err instanceof Error) {\r\n                    console.error(err.stack || err);\r\n                    done(__assign(__assign({}, errBase), { promiseError: err }), null);\r\n                }\r\n                else {\r\n                    done(typeof err === 'object'\r\n                        ? __assign(__assign({}, errBase), err) : errBase, null);\r\n                }\r\n            });\r\n        }\r\n        // else: wait for done to be called\r\n    };\r\n    var next = function (err, state) {\r\n        var _a;\r\n        if (isCancelled()) {\r\n            callback();\r\n        }\r\n        else if (err) {\r\n            callback(err);\r\n        }\r\n        else {\r\n            if (!remainingFunctions.length) {\r\n                callback(null, state);\r\n            }\r\n            else {\r\n                var isMapped = typeof remainingFunctions[0] === 'string';\r\n                var errBase = errorKey && isMapped\r\n                    ? (_a = {}, _a[errorKey] = remainingFunctions[0], _a) : {};\r\n                var stepFn = isMapped\r\n                    ? functions[remainingFunctions[0]]\r\n                    : remainingFunctions[0];\r\n                remainingFunctions = remainingFunctions.slice(1);\r\n                processFn(stepFn, errBase, state, next);\r\n            }\r\n        }\r\n    };\r\n    next(null, toState);\r\n}\n\nfunction transition(router, toState, fromState, opts, callback) {\r\n    var cancelled = false;\r\n    var completed = false;\r\n    var options = router.getOptions();\r\n    var _a = router.getLifecycleFunctions(), canDeactivateFunctions = _a[0], canActivateFunctions = _a[1];\r\n    var middlewareFunctions = router.getMiddlewareFunctions();\r\n    var isCancelled = function () { return cancelled; };\r\n    var cancel = function () {\r\n        if (!cancelled && !completed) {\r\n            cancelled = true;\r\n            callback({ code: errorCodes.TRANSITION_CANCELLED }, null);\r\n        }\r\n    };\r\n    var done = function (err, state) {\r\n        completed = true;\r\n        if (isCancelled()) {\r\n            return;\r\n        }\r\n        if (!err && options.autoCleanUp) {\r\n            var activeSegments_1 = nameToIDs(toState.name);\r\n            Object.keys(canDeactivateFunctions).forEach(function (name) {\r\n                if (activeSegments_1.indexOf(name) === -1)\r\n                    router.clearCanDeactivate(name);\r\n            });\r\n        }\r\n        callback(err, state || toState);\r\n    };\r\n    var makeError = function (base, err) { return (__assign(__assign({}, base), (err instanceof Object ? err : { error: err }))); };\r\n    var isUnknownRoute = toState.name === constants.UNKNOWN_ROUTE;\r\n    var asyncBase = { isCancelled: isCancelled, toState: toState, fromState: fromState };\r\n    var _b = transitionPath(toState, fromState), toDeactivate = _b.toDeactivate, toActivate = _b.toActivate;\r\n    var canDeactivate = !fromState || opts.forceDeactivate\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            var canDeactivateFunctionMap = toDeactivate\r\n                .filter(function (name) { return canDeactivateFunctions[name]; })\r\n                .reduce(function (fnMap, name) {\r\n                var _a;\r\n                return (__assign(__assign({}, fnMap), (_a = {}, _a[name] = canDeactivateFunctions[name], _a)));\r\n            }, {});\r\n            resolve(canDeactivateFunctionMap, __assign(__assign({}, asyncBase), { errorKey: 'segment' }), function (err) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.CANNOT_DEACTIVATE }, err)\r\n                    : null);\r\n            });\r\n        };\r\n    var canActivate = isUnknownRoute\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            var canActivateFunctionMap = toActivate\r\n                .filter(function (name) { return canActivateFunctions[name]; })\r\n                .reduce(function (fnMap, name) {\r\n                var _a;\r\n                return (__assign(__assign({}, fnMap), (_a = {}, _a[name] = canActivateFunctions[name], _a)));\r\n            }, {});\r\n            resolve(canActivateFunctionMap, __assign(__assign({}, asyncBase), { errorKey: 'segment' }), function (err) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.CANNOT_ACTIVATE }, err)\r\n                    : null);\r\n            });\r\n        };\r\n    var middleware = !middlewareFunctions.length\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            return resolve(middlewareFunctions, __assign({}, asyncBase), function (err, state) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.TRANSITION_ERR }, err)\r\n                    : null, state || toState);\r\n            });\r\n        };\r\n    var pipeline = []\r\n        .concat(canDeactivate)\r\n        .concat(canActivate)\r\n        .concat(middleware);\r\n    resolve(pipeline, asyncBase, done);\r\n    return cancel;\r\n}\n\nvar noop = function () { };\r\nfunction withNavigation(router) {\r\n    var cancelCurrentTransition;\r\n    router.navigate = navigate;\r\n    router.navigate = navigate;\r\n    router.navigateToDefault = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var opts = typeof args[0] === 'object' ? args[0] : {};\r\n        var done = args.length === 2\r\n            ? args[1]\r\n            : typeof args[0] === 'function'\r\n                ? args[0]\r\n                : noop;\r\n        var options = router.getOptions();\r\n        if (options.defaultRoute) {\r\n            return navigate(options.defaultRoute, options.defaultParams, opts, done);\r\n        }\r\n        return function () { };\r\n    };\r\n    router.cancel = function () {\r\n        if (cancelCurrentTransition) {\r\n            cancelCurrentTransition('navigate');\r\n            cancelCurrentTransition = null;\r\n        }\r\n        return router;\r\n    };\r\n    function navigate() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var name = args[0];\r\n        var lastArg = args[args.length - 1];\r\n        var done = typeof lastArg === 'function' ? lastArg : noop;\r\n        var params = typeof args[1] === 'object' ? args[1] : {};\r\n        var opts = typeof args[2] === 'object' ? args[2] : {};\r\n        if (!router.isStarted()) {\r\n            done({ code: errorCodes.ROUTER_NOT_STARTED });\r\n            return;\r\n        }\r\n        var route = router.buildState(name, params);\r\n        if (!route) {\r\n            var err = { code: errorCodes.ROUTE_NOT_FOUND };\r\n            done(err);\r\n            router.invokeEventListeners(constants.TRANSITION_ERROR, null, router.getState(), err);\r\n            return;\r\n        }\r\n        var toState = router.makeState(route.name, route.params, router.buildPath(route.name, route.params), { params: route.meta, options: opts });\r\n        var sameStates = router.getState()\r\n            ? router.areStatesEqual(router.getState(), toState, false)\r\n            : false;\r\n        // Do not proceed further if states are the same and no reload\r\n        // (no deactivation and no callbacks)\r\n        if (sameStates && !opts.reload && !opts.force) {\r\n            var err = { code: errorCodes.SAME_STATES };\r\n            done(err);\r\n            router.invokeEventListeners(constants.TRANSITION_ERROR, toState, router.getState(), err);\r\n            return;\r\n        }\r\n        var fromState = router.getState();\r\n        if (opts.skipTransition) {\r\n            done(null, toState);\r\n            return noop;\r\n        }\r\n        // Transition\r\n        return router.transitionToState(toState, fromState, opts, function (err, state) {\r\n            if (err) {\r\n                if (err.redirect) {\r\n                    var _a = err.redirect, name_1 = _a.name, params_1 = _a.params;\r\n                    navigate(name_1, params_1, __assign(__assign({}, opts), { force: true, redirected: true }), done);\r\n                }\r\n                else {\r\n                    done(err);\r\n                }\r\n            }\r\n            else {\r\n                router.invokeEventListeners(constants.TRANSITION_SUCCESS, state, fromState, opts);\r\n                done(null, state);\r\n            }\r\n        });\r\n    }\r\n    router.transitionToState = function (toState, fromState, options, done) {\r\n        if (options === void 0) { options = {}; }\r\n        if (done === void 0) { done = noop; }\r\n        router.cancel();\r\n        router.invokeEventListeners(constants.TRANSITION_START, toState, fromState);\r\n        cancelCurrentTransition = transition(router, toState, fromState, options, function (err, state) {\r\n            cancelCurrentTransition = null;\r\n            state = state || toState;\r\n            if (err) {\r\n                if (err.code === errorCodes.TRANSITION_CANCELLED) {\r\n                    router.invokeEventListeners(constants.TRANSITION_CANCEL, toState, fromState);\r\n                }\r\n                else {\r\n                    router.invokeEventListeners(constants.TRANSITION_ERROR, toState, fromState, err);\r\n                }\r\n                done(err);\r\n            }\r\n            else {\r\n                router.setState(state);\r\n                done(null, state);\r\n            }\r\n        });\r\n        return cancelCurrentTransition;\r\n    };\r\n    return router;\r\n}\n\nvar noop$1 = function () { };\r\nfunction withRouterLifecycle(router) {\r\n    var started = false;\r\n    router.isStarted = function () { return started; };\r\n    //@ts-ignore\r\n    router.start = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var options = router.getOptions();\r\n        var lastArg = args[args.length - 1];\r\n        var done = typeof lastArg === 'function' ? lastArg : noop$1;\r\n        var startPathOrState = typeof args[0] !== 'function' ? args[0] : undefined;\r\n        if (started) {\r\n            done({ code: errorCodes.ROUTER_ALREADY_STARTED });\r\n            return router;\r\n        }\r\n        var startPath, startState;\r\n        started = true;\r\n        router.invokeEventListeners(constants.ROUTER_START);\r\n        // callback\r\n        var cb = function (err, state, invokeErrCb) {\r\n            if (invokeErrCb === void 0) { invokeErrCb = true; }\r\n            if (!err)\r\n                router.invokeEventListeners(constants.TRANSITION_SUCCESS, state, null, { replace: true });\r\n            if (err && invokeErrCb)\r\n                router.invokeEventListeners(constants.TRANSITION_ERROR, state, null, err);\r\n            done(err, state);\r\n        };\r\n        if (startPathOrState === undefined && !options.defaultRoute) {\r\n            return cb({ code: errorCodes.NO_START_PATH_OR_STATE });\r\n        }\r\n        if (typeof startPathOrState === 'string') {\r\n            startPath = startPathOrState;\r\n        }\r\n        else if (typeof startPathOrState === 'object') {\r\n            startState = startPathOrState;\r\n        }\r\n        if (!startState) {\r\n            // If no supplied start state, get start state\r\n            startState =\r\n                startPath === undefined ? null : router.matchPath(startPath);\r\n            // Navigate to default function\r\n            var navigateToDefault_1 = function () {\r\n                return router.navigateToDefault({ replace: true }, done);\r\n            };\r\n            var redirect_1 = function (route) {\r\n                return router.navigate(route.name, route.params, { replace: true, reload: true, redirected: true }, done);\r\n            };\r\n            var transitionToState = function (state) {\r\n                router.transitionToState(state, router.getState(), {}, function (err, state) {\r\n                    if (!err)\r\n                        cb(null, state);\r\n                    else if (err.redirect)\r\n                        redirect_1(err.redirect);\r\n                    else if (options.defaultRoute)\r\n                        navigateToDefault_1();\r\n                    else\r\n                        cb(err, null, false);\r\n                });\r\n            };\r\n            // If matched start path\r\n            if (startState) {\r\n                transitionToState(startState);\r\n            }\r\n            else if (options.defaultRoute) {\r\n                // If default, navigate to default\r\n                navigateToDefault_1();\r\n            }\r\n            else if (options.allowNotFound) {\r\n                transitionToState(router.makeNotFoundState(startPath, { replace: true }));\r\n            }\r\n            else {\r\n                // No start match, no default => do nothing\r\n                cb({ code: errorCodes.ROUTE_NOT_FOUND, path: startPath }, null);\r\n            }\r\n        }\r\n        else {\r\n            // Initialise router with provided start state\r\n            router.setState(startState);\r\n            cb(null, startState);\r\n        }\r\n        return router;\r\n    };\r\n    router.stop = function () {\r\n        if (started) {\r\n            router.setState(null);\r\n            started = false;\r\n            router.invokeEventListeners(constants.ROUTER_STOP);\r\n        }\r\n        return router;\r\n    };\r\n    return router;\r\n}\n\nvar toFunction = function (val) { return (typeof val === 'function' ? val : function () { return function () { return val; }; }); };\r\nfunction withRouteLifecycle(router) {\r\n    var canDeactivateFactories = {};\r\n    var canActivateFactories = {};\r\n    var canDeactivateFunctions = {};\r\n    var canActivateFunctions = {};\r\n    router.getLifecycleFactories = function () {\r\n        return [canDeactivateFactories, canActivateFactories];\r\n    };\r\n    router.getLifecycleFunctions = function () {\r\n        return [canDeactivateFunctions, canActivateFunctions];\r\n    };\r\n    router.canDeactivate = function (name, canDeactivateHandler) {\r\n        var factory = toFunction(canDeactivateHandler);\r\n        canDeactivateFactories[name] = factory;\r\n        canDeactivateFunctions[name] = router.executeFactory(factory);\r\n        return router;\r\n    };\r\n    router.clearCanDeactivate = function (name) {\r\n        canDeactivateFactories[name] = undefined;\r\n        canDeactivateFunctions[name] = undefined;\r\n        return router;\r\n    };\r\n    router.canActivate = function (name, canActivateHandler) {\r\n        var factory = toFunction(canActivateHandler);\r\n        canActivateFactories[name] = factory;\r\n        canActivateFunctions[name] = router.executeFactory(factory);\r\n        return router;\r\n    };\r\n    return router;\r\n}\n\nvar pipe = function () {\r\n    var fns = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        fns[_i] = arguments[_i];\r\n    }\r\n    return function (arg) {\r\n        return fns.reduce(function (prev, fn) { return fn(prev); }, arg);\r\n    };\r\n};\r\nvar createRouter = function (routes, options, dependencies) {\r\n    if (routes === void 0) { routes = []; }\r\n    if (options === void 0) { options = {}; }\r\n    if (dependencies === void 0) { dependencies = {}; }\r\n    var config = {\r\n        decoders: {},\r\n        encoders: {},\r\n        defaultParams: {},\r\n        forwardMap: {}\r\n    };\r\n    return pipe(withOptions(options), withDependencies(dependencies), withObservability, withState, withRouterLifecycle, withRouteLifecycle, withNavigation, withPlugins, withMiddleware, withRoutes(routes))({ config: config });\r\n};\n\nfunction cloneRouter(router, dependencies) {\r\n    var clonedRouter = createRouter(router.rootNode, router.getOptions(), dependencies);\r\n    clonedRouter.useMiddleware.apply(clonedRouter, router.getMiddlewareFactories());\r\n    clonedRouter.usePlugin.apply(clonedRouter, router.getPlugins());\r\n    clonedRouter.config = router.config;\r\n    var _a = router.getLifecycleFactories(), canDeactivateFactories = _a[0], canActivateFactories = _a[1];\r\n    Object.keys(canDeactivateFactories).forEach(function (name) {\r\n        return clonedRouter.canDeactivate(name, canDeactivateFactories[name]);\r\n    });\r\n    Object.keys(canActivateFactories).forEach(function (name) {\r\n        return clonedRouter.canActivate(name, canActivateFactories[name]);\r\n    });\r\n    return clonedRouter;\r\n}\n\nexport default createRouter;\nexport { cloneRouter, constants, createRouter, errorCodes };\n","import { errorCodes, constants } from 'router5';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nvar value = function (arg) { return function () { return arg; }; };\r\nvar noop = function () { };\r\nvar isBrowser = typeof window !== 'undefined' && window.history;\r\nvar getBase = function () { return window.location.pathname; };\r\nvar supportsPopStateOnHashChange = function () {\r\n    return window.navigator.userAgent.indexOf('Trident') === -1;\r\n};\r\nvar pushState = function (state, title, path) {\r\n    return window.history.pushState(state, title, path);\r\n};\r\nvar replaceState = function (state, title, path) {\r\n    return window.history.replaceState(state, title, path);\r\n};\r\nvar addPopstateListener = function (fn, opts) {\r\n    var shouldAddHashChangeListener = opts.useHash && !supportsPopStateOnHashChange();\r\n    window.addEventListener('popstate', fn);\r\n    if (shouldAddHashChangeListener) {\r\n        window.addEventListener('hashchange', fn);\r\n    }\r\n    return function () {\r\n        window.removeEventListener('popstate', fn);\r\n        if (shouldAddHashChangeListener) {\r\n            window.removeEventListener('hashchange', fn);\r\n        }\r\n    };\r\n};\r\nvar getLocation = function (opts) {\r\n    var path = opts.useHash\r\n        ? window.location.hash.replace(new RegExp('^#' + opts.hashPrefix), '')\r\n        : window.location.pathname.replace(new RegExp('^' + opts.base), '');\r\n    // Fix issue with browsers that don't URL encode characters (Edge)\r\n    var correctedPath = safelyEncodePath(path);\r\n    return (correctedPath || '/') + window.location.search;\r\n};\r\nvar safelyEncodePath = function (path) {\r\n    try {\r\n        return encodeURI(decodeURI(path));\r\n    }\r\n    catch (_) {\r\n        return path;\r\n    }\r\n};\r\nvar getState = function () { return window.history.state; };\r\nvar getHash = function () { return window.location.hash; };\r\nvar browser = {};\r\nif (isBrowser) {\r\n    browser = {\r\n        getBase: getBase,\r\n        pushState: pushState,\r\n        replaceState: replaceState,\r\n        addPopstateListener: addPopstateListener,\r\n        getLocation: getLocation,\r\n        getState: getState,\r\n        getHash: getHash\r\n    };\r\n}\r\nelse {\r\n    browser = {\r\n        getBase: value(''),\r\n        pushState: noop,\r\n        replaceState: noop,\r\n        addPopstateListener: noop,\r\n        getLocation: value(''),\r\n        getState: value(null),\r\n        getHash: value('')\r\n    };\r\n}\r\nvar safeBrowser = browser;\n\nvar defaultOptions = {\r\n    forceDeactivate: true,\r\n    useHash: false,\r\n    hashPrefix: '',\r\n    base: '',\r\n    mergeState: false,\r\n    preserveHash: true\r\n};\r\nvar source = 'popstate';\r\nfunction browserPluginFactory(opts, browser) {\r\n    if (browser === void 0) { browser = safeBrowser; }\r\n    var options = __assign(__assign({}, defaultOptions), opts);\r\n    var transitionOptions = {\r\n        forceDeactivate: options.forceDeactivate,\r\n        source: source\r\n    };\r\n    var removePopStateListener;\r\n    return function browserPlugin(router) {\r\n        var routerOptions = router.getOptions();\r\n        var routerStart = router.start;\r\n        router.buildUrl = function (route, params) {\r\n            var base = options.base || '';\r\n            var prefix = options.useHash ? \"#\" + options.hashPrefix : '';\r\n            var path = router.buildPath(route, params);\r\n            return base + prefix + path;\r\n        };\r\n        var urlToPath = function (url) {\r\n            var match = url.match(/^(?:http|https):\\/\\/(?:[0-9a-z_\\-.:]+?)(?=\\/)(.*)$/);\r\n            var path = match ? match[1] : url;\r\n            var pathParts = path.match(/^(.+?)(#.+?)?(\\?.+)?$/);\r\n            if (!pathParts)\r\n                throw new Error(\"[router5] Could not parse url \" + url);\r\n            var pathname = pathParts[1];\r\n            var hash = pathParts[2] || '';\r\n            var search = pathParts[3] || '';\r\n            return ((options.useHash\r\n                ? hash.replace(new RegExp('^#' + options.hashPrefix), '')\r\n                : options.base\r\n                    ? pathname.replace(new RegExp('^' + options.base), '')\r\n                    : pathname) + search);\r\n        };\r\n        router.matchUrl = function (url) { return router.matchPath(urlToPath(url)); };\r\n        router.start = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            if (args.length === 0 || typeof args[0] === 'function') {\r\n                routerStart.apply(void 0, __spreadArrays([browser.getLocation(options)], args));\r\n            }\r\n            else {\r\n                routerStart.apply(void 0, args);\r\n            }\r\n            return router;\r\n        };\r\n        router.replaceHistoryState = function (name, params, title) {\r\n            if (params === void 0) { params = {}; }\r\n            if (title === void 0) { title = ''; }\r\n            var route = router.buildState(name, params);\r\n            var state = router.makeState(route.name, route.params, router.buildPath(route.name, route.params), { params: route.meta });\r\n            var url = router.buildUrl(name, params);\r\n            router.lastKnownState = state;\r\n            browser.replaceState(state, title, url);\r\n        };\r\n        function updateBrowserState(state, url, replace) {\r\n            var trimmedState = state\r\n                ? {\r\n                    meta: state.meta,\r\n                    name: state.name,\r\n                    params: state.params,\r\n                    path: state.path\r\n                }\r\n                : state;\r\n            var finalState = options.mergeState === true\r\n                ? __assign(__assign({}, browser.getState()), trimmedState) : trimmedState;\r\n            if (replace)\r\n                browser.replaceState(finalState, '', url);\r\n            else\r\n                browser.pushState(finalState, '', url);\r\n        }\r\n        function onPopState(evt) {\r\n            var routerState = router.getState();\r\n            // Do nothing if no state or if last know state is poped state (it should never happen)\r\n            var newState = !evt.state || !evt.state.name;\r\n            var state = newState\r\n                ? router.matchPath(browser.getLocation(options), source)\r\n                : router.makeState(evt.state.name, evt.state.params, evt.state.path, __assign(__assign({}, evt.state.meta), { source: source }), evt.state.meta.id);\r\n            var defaultRoute = routerOptions.defaultRoute, defaultParams = routerOptions.defaultParams;\r\n            if (!state) {\r\n                // If current state is already the default route, we will have a double entry\r\n                // Navigating back and forth will emit SAME_STATES error\r\n                defaultRoute &&\r\n                    router.navigateToDefault(__assign(__assign({}, transitionOptions), { reload: true, replace: true }));\r\n                return;\r\n            }\r\n            if (routerState &&\r\n                router.areStatesEqual(state, routerState, false)) {\r\n                return;\r\n            }\r\n            router.transitionToState(state, routerState, transitionOptions, function (err, toState) {\r\n                if (err) {\r\n                    if (err.redirect) {\r\n                        var _a = err.redirect, name_1 = _a.name, params = _a.params;\r\n                        router.navigate(name_1, params, __assign(__assign({}, transitionOptions), { replace: true, force: true, redirected: true }));\r\n                    }\r\n                    else if (err.code === errorCodes.CANNOT_DEACTIVATE) {\r\n                        var url = router.buildUrl(routerState.name, routerState.params);\r\n                        if (!newState) {\r\n                            // Keep history state unchanged but use current URL\r\n                            updateBrowserState(state, url, true);\r\n                        }\r\n                        // else do nothing or history will be messed up\r\n                        // TODO: history.back()?\r\n                    }\r\n                    else {\r\n                        // Force navigation to default state\r\n                        defaultRoute &&\r\n                            router.navigate(defaultRoute, defaultParams, __assign(__assign({}, transitionOptions), { reload: true, replace: true }));\r\n                    }\r\n                }\r\n                else {\r\n                    router.invokeEventListeners(constants.TRANSITION_SUCCESS, toState, routerState, { replace: true });\r\n                }\r\n            });\r\n        }\r\n        function onStart() {\r\n            if (options.useHash && !options.base) {\r\n                // Guess base\r\n                options.base = browser.getBase();\r\n            }\r\n            removePopStateListener = browser.addPopstateListener(onPopState, options);\r\n        }\r\n        function teardown() {\r\n            if (removePopStateListener) {\r\n                removePopStateListener();\r\n                removePopStateListener = undefined;\r\n            }\r\n        }\r\n        function onTransitionSuccess(toState, fromState, opts) {\r\n            var historyState = browser.getState();\r\n            var hasState = historyState &&\r\n                historyState.meta &&\r\n                historyState.name &&\r\n                historyState.params;\r\n            var statesAreEqual = fromState && router.areStatesEqual(fromState, toState, false);\r\n            var replace = opts.replace || !hasState || statesAreEqual;\r\n            var url = router.buildUrl(toState.name, toState.params);\r\n            if (fromState === null &&\r\n                options.useHash === false &&\r\n                options.preserveHash === true) {\r\n                url += browser.getHash();\r\n            }\r\n            updateBrowserState(toState, url, replace);\r\n        }\r\n        return {\r\n            onStart: onStart,\r\n            onStop: teardown,\r\n            teardown: teardown,\r\n            onTransitionSuccess: onTransitionSuccess,\r\n            onPopState: onPopState\r\n        };\r\n    };\r\n}\n\nexport default browserPluginFactory;\n","import createSolidRouter, { useRoute } from \"solid-typefu-router5\";\nimport browserPluginFactory from \"router5-plugin-browser\";\nimport { render } from \"solid-js/dom\";\nimport createRouter from \"router5\";\nimport { For } from \"solid-js\";\n\nconst routes = [\n  { name: \"home\", path: \"/\" },\n  {\n    name: \"users\",\n    path: \"/users?page\",\n    children: [\n      { name: \"profile\", path: \"/:id<\\\\d+>\" },\n      { name: \"edit\", path: \"/edit\" },\n    ],\n  },\n  { name: \"about\", path: \"/about\" },\n] as const;\n\nconst { Link, Router, Provider } = createSolidRouter({\n  routes,\n  back: () => window.history.back(),\n  forward: () => window.history.forward(),\n  createRouter5: (routes) => {\n    const router = createRouter(routes, { allowNotFound: true });\n    router.usePlugin(browserPluginFactory({ useHash: false }));\n    return router;\n  },\n});\n\nconst About = () => (\n  <>\n    <h1>About</h1>\n    <p>\n      This is the about page of the <code>solid-typefu-router5</code> example\n      project.\n    </p>\n  </>\n);\n\nconst Home = () => (\n  <>\n    <h1>Home</h1>\n    <p>\n      This is the <code>solid-typefu-router5</code> example project.\n    </p>\n  </>\n);\n\nfunction userList(page: number) {\n  return [5 * page, 5 * page + 1, 5 * page + 2, 5 * page + 3, 5 * page + 4];\n}\n\nconst Users = (props: { page: number }) => (\n  <>\n    <h1>Users</h1>\n    <p>Page: {props.page}</p>\n    <ul>\n      <For each={userList(props.page)}>\n        {(user) => (\n          <li>\n            <Link to=\"users.profile\" params={{ id: \"\" + user }}>\n              To user {user}\n            </Link>\n          </li>\n        )}\n      </For>\n    </ul>\n    <Link\n      to=\"users\"\n      params={{ page: \"\" + (props.page - 1) }}\n      display=\"button\"\n      disabled={props.page <= 0}\n    >\n      Previous page\n    </Link>\n    <br />\n    <Link to=\"users\" params={{ page: \"\" + (props.page + 1) }} display=\"button\">\n      Next page\n    </Link>\n    <hr />\n  </>\n);\n\nconst UserProfile = (props: { id: number }) => (\n  <>\n    <h1>User {props.id} profile</h1>\n    <p>hello world!</p>\n  </>\n);\n\nconst App = () => {\n  const route = useRoute();\n  return (\n    <div>\n      <b>Route: </b>\n      <code>{JSON.stringify(route())}</code>\n      <hr />\n      <nav class=\"nav\">\n        <ul>\n          <li>\n            <Link to=\"@@back\">Back</Link> / <Link to=\"@@forward\">Forward</Link>\n          </li>\n          <li>\n            <Link to=\"home\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"users\" params={{ page: \"0\" }}>\n              Users\n            </Link>\n          </li>\n          <li>\n            <Link to=\"about\">About</Link>\n          </li>\n        </ul>\n      </nav>\n      <hr />\n      <Router>\n        {{\n          about: { render: About },\n          home: { render: Home },\n          users: {\n            fallback: (p) => <Users page={Number(p.params.page ?? 0)} />,\n            profile: {\n              render: (p: { params: { id: string } }) => (\n                <UserProfile id={Number(p.params.id)} />\n              ),\n            },\n          },\n        }}\n      </Router>\n    </div>\n  );\n};\n\n// end interesting parts\n\nrender(\n  () => (\n    <Provider>\n      <App />\n    </Provider>\n  ),\n  document.getElementById(\"app\") as any\n);\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}